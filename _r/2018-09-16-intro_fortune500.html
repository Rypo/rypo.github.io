---
title: "Introduction: Fortune 500 Companies R"
permalink: /r/intro-fortune-500
excerpt: "A brief introduction to data analysis with R using the fortune 500 dataset."
categories: [r, intro]
tags: [r, introduction, fortune500, EDA]
layout: rmd
author: "Ryan Gust"
created: 2018-09-16
date: 2018-09-16
last_modified_at: 2019-01-08
header:
  teaser: assets/images/thumbs/chart-unsplash-lchesser.png
---

<div id="overview" class="section level2">
<h2>Overview</h2>
<p>The purpose of this introductory notebook is to get our feet wet with R, starting off with a simple, but certainly not boring, dataset. We will be using the Fortune 500 companies list from 1955-2005.</p>
<p>We’ll do some simple plotting with <code>ggplot</code> to explore the data in greater detail and addressing issues with the data as we find them.</p>
<div id="imports" class="section level3">
<h3>Imports</h3>
<pre class="r"><code>library(tidyverse)
library(DT)</code></pre>
<p><a href="https://www.tidyverse.org/">Tidyverse</a> is the bread and butter of many R-based analyses, it provides us with ggplot, pipe operators (<code>%&gt;%</code>), spreading, dataframe manipulations, and much, much more.</p>
</div>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<p>The external data used in this notebook can be obtained from: <a href="https://www.dataquest.io/blog/large_files/fortune500.csv" class="uri">https://www.dataquest.io/blog/large_files/fortune500.csv</a></p>
<p>The CSV file contains information about fortune 500 companies spanning the years 1955 - 2005.<br> There are 25500 rows representing 51 (years) sets of 500 (companies).</p>
<p><strong>The provided columns include:</strong></p>
<ul>
<li><code>Year</code> - year that the fortune 500 list was published</li>
<li><code>Rank</code> - company’s position on the fortune 500 list</li>
<li><code>Company</code> - name of the company</li>
<li><code>Revenue (in millions)</code> - company’s revenue for that year</li>
<li><code>Profit (in millions)</code> - company’s profit for that year</li>
</ul>
<pre class="r"><code>f500 &lt;- read.csv(&#39;data/fortune500.csv&#39;)
# f500 &lt;- datatable(f500, 
#          #extensions = c(&#39;FixedColumns&#39;,&quot;FixedHeader&quot;),
#           options = list(scrollX = TRUE, 
#                          paging=TRUE,
#                          fixedHeader=FALSE))
# #(f500 &lt;- read.csv(&#39;data/fortune500.csv&#39;))
head(f500, n=20)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Year"],"name":[1],"type":["int"],"align":["right"]},{"label":["Rank"],"name":[2],"type":["int"],"align":["right"]},{"label":["Company"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["Revenue..in.millions."],"name":[4],"type":["dbl"],"align":["right"]},{"label":["Profit..in.millions."],"name":[5],"type":["fctr"],"align":["left"]}],"data":[{"1":"1955","2":"1","3":"General Motors","4":"9823.5","5":"806","_rn_":"1"},{"1":"1955","2":"2","3":"Exxon Mobil","4":"5661.4","5":"584.8","_rn_":"2"},{"1":"1955","2":"3","3":"U.S. Steel","4":"3250.4","5":"195.4","_rn_":"3"},{"1":"1955","2":"4","3":"General Electric","4":"2959.1","5":"212.6","_rn_":"4"},{"1":"1955","2":"5","3":"Esmark","4":"2510.8","5":"19.1","_rn_":"5"},{"1":"1955","2":"6","3":"Chrysler","4":"2071.6","5":"18.5","_rn_":"6"},{"1":"1955","2":"7","3":"Armour","4":"2056.1","5":"1.6","_rn_":"7"},{"1":"1955","2":"8","3":"Gulf Oil","4":"1705.3","5":"182.8","_rn_":"8"},{"1":"1955","2":"9","3":"Mobil","4":"1703.6","5":"183.8","_rn_":"9"},{"1":"1955","2":"10","3":"DuPont","4":"1687.7","5":"344.4","_rn_":"10"},{"1":"1955","2":"11","3":"Amoco","4":"1667.4","5":"132.8","_rn_":"11"},{"1":"1955","2":"12","3":"Bethlehem Steel","4":"1660.3","5":"117.2","_rn_":"12"},{"1":"1955","2":"13","3":"CBS","4":"1631.0","5":"84.6","_rn_":"13"},{"1":"1955","2":"14","3":"Texaco","4":"1574.4","5":"226.1","_rn_":"14"},{"1":"1955","2":"15","3":"AT&T Technologies","4":"1526.2","5":"55.8","_rn_":"15"},{"1":"1955","2":"16","3":"Shell Oil","4":"1312.1","5":"121.1","_rn_":"16"},{"1":"1955","2":"17","3":"Kraft","4":"1210.3","5":"37.4","_rn_":"17"},{"1":"1955","2":"18","3":"ChevronTexaco","4":"1113.3","5":"211.9","_rn_":"18"},{"1":"1955","2":"19","3":"Goodyear Tire & Rubber","4":"1090.1","5":"48.1","_rn_":"19"},{"1":"1955","2":"20","3":"Boeing","4":"1033.2","5":"37","_rn_":"20"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code># Remove the trailing peroid from column names 
colnames(f500) &lt;- gsub(&#39;\\.$&#39;,&#39;&#39;,colnames(f500))</code></pre>
</div>
<div id="exploratory-data-analysis" class="section level2">
<h2>Exploratory Data Analysis</h2>
<p>The dataset has a handful of missing values which we will need to deal with and some interesting duplicates that may or may not be data errors.</p>
<pre class="r"><code>all(complete.cases(f500))</code></pre>
<pre><code>## [1] TRUE</code></pre>
<pre class="r"><code>str(f500)</code></pre>
<pre><code>## &#39;data.frame&#39;:    25500 obs. of  5 variables:
##  $ Year                : int  1955 1955 1955 1955 1955 1955 1955 1955 1955 1955 ...
##  $ Rank                : int  1 2 3 4 5 6 7 8 9 10 ...
##  $ Company             : Factor w/ 1887 levels &quot;3Com&quot;,&quot;3M&quot;,&quot;A-T-O&quot;,..: 724 618 1727 718 607 369 145 787 1171 561 ...
##  $ Revenue..in.millions: num  9824 5661 3250 2959 2511 ...
##  $ Profit..in.millions : Factor w/ 6977 levels &quot;-0.1&quot;,&quot;-0.2&quot;,..: 6486 5688 2940 3143 2864 2733 1341 2774 2787 4313 ...</code></pre>
<p>The complete cases statement here is telling us that there is no missing values, however, something is amiss in the <code>Profit..in.millions</code> field. It was read in as a factor rather than a double, a strong indication that some other value may be used as a stand-in for N/A</p>
<pre class="r"><code>summary(f500$Profit..in.millions)</code></pre>
<pre><code>##    N.A.       4       3     5.7       6     3.1     2.6       5       7 
##     369      73      71      67      67      66      65      65      65 
##     3.7     4.1     4.7     3.4     3.6     4.8     6.1     4.3     6.6 
##      64      64      64      63      62      62      62      60      60 
##     2.8     4.2     6.2     2.4     3.5     9.4     2.7     4.9     5.4 
##      59      59      59      58      58      58      56      56      56 
##     5.8     9.6     2.2     5.5     6.5     5.1     1.9     3.3     3.8 
##      56      56      55      55      55      54      53      53      53 
##     4.6       8     4.4     5.2     6.9     7.3    10.1     2.5     3.2 
##      53      53      52      52      52      52      51      51      51 
##     5.6     7.4    12.1     6.3     6.4     8.1     8.4     2.9     7.1 
##      51      51      50      50      50      50      50      49      49 
##     7.2       9     4.5     7.8    10.2    11.1     3.9     7.7     7.9 
##      49      49      48      48      47      47      47      47      47 
##       2     2.3     5.9    10.4    22.1     6.7     7.6     8.2     1.4 
##      46      46      46      45      45      45      45      45      44 
##     1.8    10.8    11.3     8.9    13.1      14    15.2     7.5     8.3 
##      44      44      44      44      43      43      43      43      43 
##     8.7     1.3    10.7     5.3      13      19     9.1       1     1.7 
##      43      42      42      42      41      41      41      40      40 
##    14.1      15     8.8     9.5     1.1     1.2    12.4     9.2     1.6 
##      40      40      40      40      39      39      39      39      38 
## (Other) 
##   20152</code></pre>
<p>The string <code>N.A.</code> is likely the root of this issue</p>
<pre class="r"><code>f500 %&gt;% filter(Profit..in.millions == &#39;N.A.&#39;)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Year"],"name":[1],"type":["int"],"align":["right"]},{"label":["Rank"],"name":[2],"type":["int"],"align":["right"]},{"label":["Company"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["Revenue..in.millions"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["Profit..in.millions"],"name":[5],"type":["fctr"],"align":["left"]}],"data":[{"1":"1955","2":"229","3":"Norton","4":"135.0","5":"N.A."},{"1":"1955","2":"291","3":"Schlitz Brewing","4":"100.0","5":"N.A."},{"1":"1955","2":"295","3":"Pacific Vegetable Oil","4":"97.9","5":"N.A."},{"1":"1955","2":"297","3":"Liebmann Breweries","4":"96.0","5":"N.A."},{"1":"1955","2":"353","3":"Minneapolis-Moline","4":"77.4","5":"N.A."},{"1":"1955","2":"465","3":"Gilfillan Bros.","4":"54.0","5":"N.A."},{"1":"1956","2":"213","3":"Norton","4":"160.5","5":"N.A."},{"1":"1956","2":"358","3":"Liebmann Breweries","4":"83.0","5":"N.A."},{"1":"1957","2":"226","3":"Norton","4":"173.0","5":"N.A."},{"1":"1957","2":"373","3":"Liebmann Breweries","4":"90.0","5":"N.A."},{"1":"1957","2":"420","3":"Crowell-Collier Publishing","4":"74.8","5":"N.A."},{"1":"1958","2":"218","3":"Hearst Consolidated Publications","4":"195.7","5":"N.A."},{"1":"1958","2":"239","3":"Norton","4":"176.8","5":"N.A."},{"1":"1958","2":"401","3":"Liebmann Breweries","4":"85.0","5":"N.A."},{"1":"1959","2":"265","3":"Norton","4":"150.0","5":"N.A."},{"1":"1959","2":"457","3":"Joy Global","4":"68.9","5":"N.A."},{"1":"1959","2":"492","3":"Suntide Refining","4":"63.0","5":"N.A."},{"1":"1960","2":"255","3":"Norton","4":"174.9","5":"N.A."},{"1":"1961","2":"254","3":"Norton","4":"181.9","5":"N.A."},{"1":"1961","2":"443","3":"Alco Products","4":"86.7","5":"N.A."},{"1":"1962","2":"255","3":"Norton","4":"178.8","5":"N.A."},{"1":"1962","2":"499","3":"Fuller (W.P.)","4":"76.2","5":"N.A."},{"1":"1965","2":"486","3":"Seaboard","4":"101.5","5":"N.A."},{"1":"1971","2":"33","3":"Lockheed Martin","4":"2535.0","5":"N.A."},{"1":"1971","2":"184","3":"Land O'Lakes","4":"654.3","5":"N.A."},{"1":"1971","2":"192","3":"Farmland Industries","4":"612.8","5":"N.A."},{"1":"1971","2":"194","3":"Agway","4":"597.9","5":"N.A."},{"1":"1971","2":"297","3":"Gold Kist Holdings","4":"347.9","5":"N.A."},{"1":"1971","2":"314","3":"Dairylea Cooperative","4":"327.3","5":"N.A."},{"1":"1971","2":"482","3":"Farmers Union Central Exchange","4":"175.3","5":"N.A."},{"1":"1972","2":"147","3":"Associated Milk Producers","4":"853.4","5":"N.A."},{"1":"1972","2":"173","3":"Land O'Lakes","4":"721.7","5":"N.A."},{"1":"1972","2":"189","3":"Agway","4":"668.5","5":"N.A."},{"1":"1972","2":"190","3":"Farmland Industries","4":"668.1","5":"N.A."},{"1":"1972","2":"289","3":"Gold Kist Holdings","4":"381.2","5":"N.A."},{"1":"1972","2":"318","3":"Dairylea Cooperative","4":"345.0","5":"N.A."},{"1":"1972","2":"432","3":"Great Western United","4":"234.1","5":"N.A."},{"1":"1972","2":"460","3":"Farmers Union Central Exchange","4":"203.2","5":"N.A."},{"1":"1973","2":"133","3":"Associated Milk Producers","4":"1070.5","5":"N.A."},{"1":"1973","2":"185","3":"Land O'Lakes","4":"748.4","5":"N.A."},{"1":"1973","2":"188","3":"Farmland Industries","4":"735.2","5":"N.A."},{"1":"1973","2":"196","3":"Agway","4":"701.0","5":"N.A."},{"1":"1973","2":"280","3":"Gold Kist Holdings","4":"454.5","5":"N.A."},{"1":"1973","2":"331","3":"Dairylea Cooperative","4":"358.5","5":"N.A."},{"1":"1973","2":"460","3":"Farmers Union Central Exchange","4":"232.2","5":"N.A."},{"1":"1974","2":"155","3":"Associated Milk Producers","4":"1102.8","5":"N.A."},{"1":"1974","2":"182","3":"Land O'Lakes","4":"935.3","5":"N.A."},{"1":"1974","2":"186","3":"Farmland Industries","4":"902.6","5":"N.A."},{"1":"1974","2":"198","3":"Agway","4":"826.0","5":"N.A."},{"1":"1974","2":"266","3":"Gold Kist Holdings","4":"573.0","5":"N.A."},{"1":"1974","2":"373","3":"Dairylea Cooperative","4":"375.7","5":"N.A."},{"1":"1974","2":"443","3":"Farmers Union Central Exchange","4":"300.2","5":"N.A."},{"1":"1975","2":"141","3":"Associated Milk Producers","4":"1416.3","5":"N.A."},{"1":"1975","2":"162","3":"Farmland Industries","4":"1233.0","5":"N.A."},{"1":"1975","2":"183","3":"Land O'Lakes","4":"1100.1","5":"N.A."},{"1":"1975","2":"193","3":"Agway","4":"1040.0","5":"N.A."},{"1":"1975","2":"262","3":"Gold Kist Holdings","4":"720.6","5":"N.A."},{"1":"1975","2":"435","3":"Dairylea Cooperative","4":"359.5","5":"N.A."},{"1":"1976","2":"135","3":"Farmland Industries","4":"1507.8","5":"N.A."},{"1":"1976","2":"141","3":"Associated Milk Producers","4":"1477.9","5":"N.A."},{"1":"1976","2":"154","3":"Agway","4":"1329.4","5":"N.A."},{"1":"1976","2":"180","3":"Land O'Lakes","4":"1124.0","5":"N.A."},{"1":"1976","2":"239","3":"Gold Kist Holdings","4":"815.2","5":"N.A."},{"1":"1976","2":"359","3":"CF Industries","4":"468.1","5":"N.A."},{"1":"1976","2":"438","3":"Dairylea Cooperative","4":"355.1","5":"N.A."},{"1":"1977","2":"123","3":"Farmland Industries","4":"1840.4","5":"N.A."},{"1":"1977","2":"137","3":"Associated Milk Producers","4":"1623.3","5":"N.A."},{"1":"1977","2":"162","3":"Agway","4":"1415.4","5":"N.A."},{"1":"1977","2":"183","3":"Land O'Lakes","4":"1241.6","5":"N.A."},{"1":"1977","2":"251","3":"Gold Kist Holdings","4":"892.9","5":"N.A."},{"1":"1977","2":"354","3":"CF Industries","4":"527.8","5":"N.A."},{"1":"1977","2":"460","3":"Dairylea Cooperative","4":"364.1","5":"N.A."},{"1":"1978","2":"78","3":"Farmland Industries","4":"3016.4","5":"N.A."},{"1":"1978","2":"150","3":"Associated Milk Producers","4":"1640.7","5":"N.A."},{"1":"1978","2":"155","3":"Agway","4":"1592.4","5":"N.A."},{"1":"1978","2":"181","3":"Land O'Lakes","4":"1407.6","5":"N.A."},{"1":"1978","2":"232","3":"Gold Kist Holdings","4":"1054.5","5":"N.A."},{"1":"1978","2":"282","3":"Peabody Holding","4":"816.5","5":"N.A."},{"1":"1978","2":"330","3":"CF Industries","4":"632.8","5":"N.A."},{"1":"1978","2":"481","3":"Midland Cooperatives","4":"372.4","5":"N.A."},{"1":"1978","2":"488","3":"Dairylea Cooperative","4":"368.1","5":"N.A."},{"1":"1979","2":"91","3":"Farmland Industries","4":"3215.7","5":"N.A."},{"1":"1979","2":"153","3":"Lykes","4":"1857.9","5":"N.A."},{"1":"1979","2":"163","3":"Associated Milk Producers","4":"1766.0","5":"N.A."},{"1":"1979","2":"173","3":"Agway","4":"1700.9","5":"N.A."},{"1":"1979","2":"194","3":"Land O'Lakes","4":"1490.3","5":"N.A."},{"1":"1979","2":"217","3":"Gold Kist Holdings","4":"1290.0","5":"N.A."},{"1":"1979","2":"342","3":"CF Industries","4":"671.1","5":"N.A."},{"1":"1979","2":"448","3":"Olinkraft","4":"447.4","5":"N.A."},{"1":"1979","2":"483","3":"Midland Cooperatives","4":"404.2","5":"N.A."},{"1":"1980","2":"87","3":"Farmland Industries","4":"3835.7","5":"N.A."},{"1":"1980","2":"142","3":"Land O'Lakes","4":"2442.7","5":"N.A."},{"1":"1980","2":"171","3":"Agway","4":"2049.1","5":"N.A."},{"1":"1980","2":"200","3":"Gold Kist Holdings","4":"1639.8","5":"N.A."},{"1":"1980","2":"279","3":"CF Industries","4":"1023.1","5":"N.A."},{"1":"1980","2":"436","3":"Midland Cooperatives","4":"518.0","5":"N.A."},{"1":"1980","2":"486","3":"Jonathan Logan","4":"426.1","5":"N.A."},{"1":"1981","2":"80","3":"Farmland Industries","4":"4725.1","5":"N.A."},{"1":"1981","2":"109","3":"Land O'Lakes","4":"3303.7","5":"N.A."},{"1":"1981","2":"147","3":"Agway","4":"2658.6","5":"N.A."},{"1":"1981","2":"193","3":"Gold Kist Holdings","4":"1881.6","5":"N.A."},{"1":"1981","2":"267","3":"CF Industries","4":"1233.1","5":"N.A."},{"1":"1981","2":"350","3":"White Motor","4":"800.0","5":"N.A."},{"1":"1981","2":"464","3":"Midland Cooperatives","4":"523.5","5":"N.A."},{"1":"1981","2":"470","3":"Natl. Coop. Refinery Assn.","4":"510.9","5":"N.A."},{"1":"1982","2":"64","3":"Farmland Industries","4":"5503.3","5":"N.A."},{"1":"1982","2":"100","3":"Agway","4":"3828.3","5":"N.A."},{"1":"1982","2":"115","3":"Land O'Lakes","4":"3470.2","5":"N.A."},{"1":"1982","2":"212","3":"Gold Kist Holdings","4":"1781.7","5":"N.A."},{"1":"1982","2":"265","3":"Farmers Union Central Exch.","4":"1325.7","5":"N.A."},{"1":"1982","2":"283","3":"MID-AMERICA DAIRYMEN","4":"1164.9","5":"N.A."},{"1":"1982","2":"303","3":"CF Industries","4":"1053.7","5":"N.A."},{"1":"1982","2":"374","3":"Natl. Coop. Refinery Assn.","4":"758.0","5":"N.A."},{"1":"1982","2":"388","3":"Saxon Industries","4":"714.9","5":"N.A."},{"1":"1982","2":"467","3":"Midland Cooperatives","4":"511.5","5":"N.A."},{"1":"1983","2":"97","3":"Agway","4":"3833.0","5":"N.A."},{"1":"1983","2":"100","3":"Land O'Lakes","4":"3770.1","5":"N.A."},{"1":"1983","2":"230","3":"Gold Kist Holdings","4":"1517.2","5":"N.A."},{"1":"1983","2":"234","3":"Farmers Union Central Exch.","4":"1470.6","5":"N.A."},{"1":"1983","2":"253","3":"MID-AMERICA DAIRYMEN","4":"1270.7","5":"N.A."},{"1":"1983","2":"311","3":"CF Industries","4":"918.9","5":"N.A."},{"1":"1983","2":"331","3":"Natl. Coop. Refinery Assn.","4":"842.6","5":"N.A."},{"1":"1983","2":"443","3":"Sun-Diamond Growers","4":"511.4","5":"N.A."},{"1":"1983","2":"485","3":"Wisconsin Dairies Cooperative","4":"439.4","5":"N.A."},{"1":"1984","2":"98","3":"Agway","4":"3768.2","5":"N.A."},{"1":"1984","2":"121","3":"Land O'Lakes","4":"3264.8","5":"N.A."},{"1":"1984","2":"238","3":"Gold Kist Holdings","4":"1461.4","5":"N.A."},{"1":"1984","2":"243","3":"Farmers Union Central Exch.","4":"1409.1","5":"N.A."},{"1":"1984","2":"247","3":"MID-AMERICA DAIRYMEN","4":"1356.6","5":"N.A."},{"1":"1984","2":"295","3":"NVF","4":"1000.0","5":"N.A."},{"1":"1984","2":"328","3":"CF Industries","4":"862.0","5":"N.A."},{"1":"1984","2":"348","3":"Natl. Coop. Refinery Assn.","4":"784.4","5":"N.A."},{"1":"1984","2":"430","3":"Michigan Milk Prod. Assoc.","4":"562.0","5":"N.A."},{"1":"1984","2":"447","3":"Sun-Diamond Growers","4":"522.2","5":"N.A."},{"1":"1984","2":"480","3":"Wisconsin Dairies Cooperative","4":"447.6","5":"N.A."},{"1":"1985","2":"96","3":"Agway","4":"4101.5","5":"N.A."},{"1":"1985","2":"161","3":"Land O'Lakes","4":"2278.4","5":"N.A."},{"1":"1985","2":"227","3":"Gold Kist Holdings","4":"1624.7","5":"N.A."},{"1":"1985","2":"237","3":"Farmers Union Central Exch.","4":"1487.8","5":"N.A."},{"1":"1985","2":"255","3":"MID-AMERICA DAIRYMEN","4":"1306.8","5":"N.A."},{"1":"1985","2":"328","3":"CF Industries","4":"908.0","5":"N.A."},{"1":"1985","2":"349","3":"Storage Technology","4":"808.6","5":"N.A."},{"1":"1985","2":"371","3":"Natl. Coop. Refinery Assn.","4":"730.2","5":"N.A."},{"1":"1985","2":"438","3":"Michigan Milk Prod. Assoc.","4":"553.3","5":"N.A."},{"1":"1985","2":"454","3":"Sun-Diamond Growers","4":"517.4","5":"N.A."},{"1":"1985","2":"474","3":"Wisconsin Dairies Cooperative","4":"460.9","5":"N.A."},{"1":"1985","2":"478","3":"Ocean Spray","4":"457.0","5":"N.A."},{"1":"1985","2":"490","3":"Oak Industries","4":"435.0","5":"N.A."},{"1":"1986","2":"87","3":"Farmland Industries","4":"4371.0","5":"N.A."},{"1":"1986","2":"95","3":"Agway","4":"4067.2","5":"N.A."},{"1":"1986","2":"148","3":"Levi Strauss","4":"2584.0","5":"N.A."},{"1":"1986","2":"154","3":"Revlon","4":"2450.7","5":"N.A."},{"1":"1986","2":"164","3":"Land O'Lakes","4":"2267.1","5":"N.A."},{"1":"1986","2":"175","3":"Uniroyal","4":"2115.0","5":"N.A."},{"1":"1986","2":"230","3":"Fruit of the Loom","4":"1538.7","5":"N.A."},{"1":"1986","2":"236","3":"Gold Kist Holdings","4":"1499.7","5":"N.A."},{"1":"1986","2":"250","3":"Farmers Union Central Exch.","4":"1375.8","5":"N.A."},{"1":"1986","2":"254","3":"MID-AMERICA DAIRYMEN","4":"1344.3","5":"N.A."},{"1":"1986","2":"261","3":"NVF","4":"1274.8","5":"N.A."},{"1":"1986","2":"314","3":"Cluett Peabody","4":"961.7","5":"N.A."},{"1":"1986","2":"326","3":"CF Industries","4":"920.9","5":"N.A."},{"1":"1986","2":"339","3":"Natl. Coop. Refinery Assn.","4":"894.6","5":"N.A."},{"1":"1986","2":"381","3":"Scott & Fetzer","4":"709.4","5":"N.A."},{"1":"1986","2":"402","3":"AG Processing","4":"643.5","5":"N.A."},{"1":"1986","2":"438","3":"Guardian Industries","4":"552.2","5":"N.A."},{"1":"1986","2":"442","3":"Riceland Foods","4":"542.8","5":"N.A."},{"1":"1986","2":"448","3":"California & Hawaiian Sugar","4":"537.1","5":"N.A."},{"1":"1986","2":"452","3":"Ocean Spray","4":"532.0","5":"N.A."},{"1":"1986","2":"460","3":"Michigan Milk Prod. Assoc.","4":"517.1","5":"N.A."},{"1":"1986","2":"471","3":"Sun-Diamond Growers","4":"487.2","5":"N.A."},{"1":"1986","2":"483","3":"Wisconsin Dairies Cooperative","4":"464.4","5":"N.A."},{"1":"1987","2":"112","3":"Agway","4":"3510.5","5":"N.A."},{"1":"1987","2":"126","3":"Chesebrough-Pond's","4":"3121.3","5":"N.A."},{"1":"1987","2":"142","3":"Farmland Industries","4":"2690.1","5":"N.A."},{"1":"1987","2":"143","3":"Fruehauf","4":"2680.0","5":"N.A."},{"1":"1987","2":"167","3":"Land O'Lakes","4":"2215.1","5":"N.A."},{"1":"1987","2":"209","3":"Revlon","4":"1650.0","5":"N.A."},{"1":"1987","2":"237","3":"MID-AMERICA DAIRYMEN","4":"1420.3","5":"N.A."},{"1":"1987","2":"239","3":"Gold Kist Holdings","4":"1394.9","5":"N.A."},{"1":"1987","2":"260","3":"Farmers Union Central Exch.","4":"1220.2","5":"N.A."},{"1":"1987","2":"279","3":"NVF","4":"1099.9","5":"N.A."},{"1":"1987","2":"295","3":"Winn Enterprises","4":"1017.3","5":"N.A."},{"1":"1987","2":"300","3":"Sequa","4":"984.6","5":"N.A."},{"1":"1987","2":"322","3":"Sheller-Globe","4":"940.0","5":"N.A."},{"1":"1987","2":"352","3":"Chromalloy American","4":"813.0","5":"N.A."},{"1":"1987","2":"366","3":"CF Industries","4":"766.1","5":"N.A."},{"1":"1987","2":"378","3":"Natl. Coop. Refinery Assn.","4":"715.9","5":"N.A."},{"1":"1987","2":"405","3":"Warnaco Group","4":"630.0","5":"N.A."},{"1":"1987","2":"408","3":"AG Processing","4":"625.4","5":"N.A."},{"1":"1987","2":"410","3":"Ocean Spray","4":"624.3","5":"N.A."},{"1":"1987","2":"459","3":"California & Hawaiian Sugar","4":"526.3","5":"N.A."},{"1":"1987","2":"470","3":"Sun-Diamond Growers","4":"496.4","5":"N.A."},{"1":"1987","2":"482","3":"Wisconsin Dairies Cooperative","4":"459.2","5":"N.A."},{"1":"1987","2":"494","3":"Michigan Milk Prod. Assoc.","4":"431.6","5":"N.A."},{"1":"1988","2":"42","3":"Beatrice","4":"8926.0","5":"N.A."},{"1":"1988","2":"116","3":"Owens-Illinois","4":"3715.0","5":"N.A."},{"1":"1988","2":"119","3":"BorgWarner","4":"3554.0","5":"N.A."},{"1":"1988","2":"130","3":"Burlington Industries Equity","4":"3279.0","5":"N.A."},{"1":"1988","2":"132","3":"Agway","4":"3265.0","5":"N.A."},{"1":"1988","2":"158","3":"Farmland Industries","4":"2581.0","5":"N.A."},{"1":"1988","2":"167","3":"Revlon","4":"2398.0","5":"N.A."},{"1":"1988","2":"179","3":"Land O'Lakes","4":"2189.0","5":"N.A."},{"1":"1988","2":"232","3":"Gold Kist Holdings","4":"1500.0","5":"N.A."},{"1":"1988","2":"233","3":"MID-AMERICA DAIRYMEN","4":"1500.0","5":"N.A."},{"1":"1988","2":"257","3":"Sequa","4":"1350.0","5":"N.A."},{"1":"1988","2":"295","3":"Farmers Union Central Exch.","4":"1139.0","5":"N.A."},{"1":"1988","2":"363","3":"CF Industries","4":"810.0","5":"N.A."},{"1":"1988","2":"377","3":"International Controls","4":"760.0","5":"N.A."},{"1":"1988","2":"385","3":"Ocean Spray","4":"723.0","5":"N.A."},{"1":"1988","2":"400","3":"AG Processing","4":"676.0","5":"N.A."},{"1":"1988","2":"403","3":"Joy Technologies","4":"665.0","5":"N.A."},{"1":"1988","2":"435","3":"California & Hawaiian Sugar","4":"588.0","5":"N.A."},{"1":"1988","2":"448","3":"Natl. Coop. Refinery Assn.","4":"561.0","5":"N.A."},{"1":"1988","2":"468","3":"Sun-Diamond Growers","4":"523.0","5":"N.A."},{"1":"1989","2":"124","3":"Agway","4":"3644.0","5":"N.A."},{"1":"1989","2":"153","3":"Farmland Industries","4":"2805.0","5":"N.A."},{"1":"1989","2":"171","3":"Walter Industries","4":"2507.0","5":"N.A."},{"1":"1989","2":"172","3":"Revlon","4":"2477.0","5":"N.A."},{"1":"1989","2":"179","3":"Land O'Lakes","4":"2355.0","5":"N.A."},{"1":"1989","2":"219","3":"Fort Howard","4":"1859.0","5":"N.A."},{"1":"1989","2":"235","3":"MID-AMERICA DAIRYMEN","4":"1655.0","5":"N.A."},{"1":"1989","2":"250","3":"Chicago Pacific","4":"1500.0","5":"N.A."},{"1":"1989","2":"287","3":"Farmers Union Central Exch.","4":"1259.0","5":"N.A."},{"1":"1989","2":"328","3":"Gold Kist Holdings","4":"1044.0","5":"N.A."},{"1":"1989","2":"331","3":"MacMillan","4":"1019.0","5":"N.A."},{"1":"1989","2":"345","3":"CF Industries","4":"958.0","5":"N.A."},{"1":"1989","2":"351","3":"AG Processing","4":"910.0","5":"N.A."},{"1":"1989","2":"368","3":"Sheller-Globe","4":"835.0","5":"N.A."},{"1":"1989","2":"382","3":"Ocean Spray","4":"767.0","5":"N.A."},{"1":"1989","2":"387","3":"Insilco","4":"753.0","5":"N.A."},{"1":"1989","2":"430","3":"Riceland Foods","4":"633.0","5":"N.A."},{"1":"1989","2":"447","3":"Bell & Howell","4":"600.0","5":"N.A."},{"1":"1989","2":"448","3":"Natl. Coop. Refinery Assn.","4":"600.0","5":"N.A."},{"1":"1989","2":"471","3":"Sun-Diamond Growers","4":"554.0","5":"N.A."},{"1":"1989","2":"483","3":"Big Three Industries","4":"525.0","5":"N.A."},{"1":"1989","2":"490","3":"Prairie Farms Dairy","4":"512.0","5":"N.A."},{"1":"1989","2":"491","3":"Dr Pepper/Seven-Up","4":"510.0","5":"N.A."},{"1":"1989","2":"495","3":"Grow Group","4":"507.0","5":"N.A."},{"1":"1990","2":"140","3":"Agway","4":"3234.8","5":"N.A."},{"1":"1990","2":"152","3":"Farmland Industries","4":"2976.9","5":"N.A."},{"1":"1990","2":"183","3":"Land O'Lakes","4":"2442.2","5":"N.A."},{"1":"1990","2":"194","3":"Thiokol","4":"2269.0","5":"N.A."},{"1":"1990","2":"195","3":"Uniroyal Goodrich Tire","4":"2266.9","5":"N.A."},{"1":"1990","2":"228","3":"Cyprus Amax Minerals","4":"1797.7","5":"N.A."},{"1":"1990","2":"253","3":"Himont","4":"1600.0","5":"N.A."},{"1":"1990","2":"308","3":"Gold Kist Holdings","4":"1216.3","5":"N.A."},{"1":"1990","2":"319","3":"Foodbrands America","4":"1148.3","5":"N.A."},{"1":"1990","2":"338","3":"Anchor Glass Container","4":"1040.1","5":"N.A."},{"1":"1990","2":"358","3":"AG Processing","4":"949.3","5":"N.A."},{"1":"1990","2":"366","3":"Ocean Spray","4":"873.1","5":"N.A."},{"1":"1990","2":"373","3":"CF Industries","4":"855.9","5":"N.A."},{"1":"1990","2":"378","3":"Dresser-Rand","4":"848.0","5":"N.A."},{"1":"1990","2":"406","3":"Tri Valley Growers","4":"746.6","5":"N.A."},{"1":"1990","2":"429","3":"Riceland Foods","4":"684.3","5":"N.A."},{"1":"1990","2":"436","3":"Natl. Coop. Refinery Assn.","4":"663.2","5":"N.A."},{"1":"1990","2":"481","3":"Prairie Farms Dairy","4":"578.1","5":"N.A."},{"1":"1990","2":"486","3":"Sun-Diamond Growers","4":"572.2","5":"N.A."},{"1":"1991","2":"99","3":"BASF","4":"5381.2","5":"N.A."},{"1":"1991","2":"137","3":"Agway","4":"3607.9","5":"N.A."},{"1":"1991","2":"143","3":"Farmland Industries","4":"3379.1","5":"N.A."},{"1":"1991","2":"188","3":"Land O'Lakes","4":"2414.8","5":"N.A."},{"1":"1991","2":"226","3":"MID-AMERICA DAIRYMEN","4":"1862.6","5":"N.A."},{"1":"1991","2":"306","3":"Gold Kist Holdings","4":"1192.9","5":"N.A."},{"1":"1991","2":"328","3":"Domino Sugar","4":"1093.0","5":"N.A."},{"1":"1991","2":"329","3":"Rohr","4":"1091.9","5":"N.A."},{"1":"1991","2":"344","3":"Dresser-Rand","4":"1019.1","5":"N.A."},{"1":"1991","2":"361","3":"Ocean Spray","4":"915.1","5":"N.A."},{"1":"1991","2":"362","3":"Mueller Industries","4":"910.0","5":"N.A."},{"1":"1991","2":"363","3":"CF Industries","4":"903.1","5":"N.A."},{"1":"1991","2":"379","3":"AG Processing","4":"850.2","5":"N.A."},{"1":"1991","2":"413","3":"Tri Valley Growers","4":"729.5","5":"N.A."},{"1":"1991","2":"420","3":"Finevest Foods","4":"716.0","5":"N.A."},{"1":"1991","2":"435","3":"Natl. Coop. Refinery Assn.","4":"675.2","5":"N.A."},{"1":"1991","2":"441","3":"Prairie Farms Dairy","4":"659.9","5":"N.A."},{"1":"1991","2":"448","3":"Riceland Foods","4":"643.9","5":"N.A."},{"1":"1991","2":"479","3":"Sun-Diamond Growers","4":"581.7","5":"N.A."},{"1":"1991","2":"489","3":"Wisconsin Dairies Cooperative","4":"563.1","5":"N.A."},{"1":"1992","2":"56","3":"Unilever U.S.","4":"8855.1","5":"N.A."},{"1":"1992","2":"128","3":"Farmland Industries","4":"3652.1","5":"N.A."},{"1":"1992","2":"134","3":"Agway","4":"3489.8","5":"N.A."},{"1":"1992","2":"180","3":"Land O'Lakes","4":"2458.1","5":"N.A."},{"1":"1992","2":"199","3":"Sequa","4":"2136.9","5":"N.A."},{"1":"1992","2":"226","3":"MID-AMERICA DAIRYMEN","4":"1751.5","5":"N.A."},{"1":"1992","2":"272","3":"DR Holdings Inc. of Delaware","4":"1391.1","5":"N.A."},{"1":"1992","2":"287","3":"Gold Kist Holdings","4":"1268.2","5":"N.A."},{"1":"1992","2":"304","3":"Dresser-Rand","4":"1192.4","5":"N.A."},{"1":"1992","2":"326","3":"Domino Sugar","4":"1057.6","5":"N.A."},{"1":"1992","2":"346","3":"Ocean Spray","4":"946.0","5":"N.A."},{"1":"1992","2":"368","3":"Natl. Coop. Refinery Assn.","4":"869.5","5":"N.A."},{"1":"1992","2":"369","3":"AG Processing","4":"866.1","5":"N.A."},{"1":"1992","2":"388","3":"Tri Valley Growers","4":"824.7","5":"N.A."},{"1":"1992","2":"397","3":"CF Industries","4":"803.1","5":"N.A."},{"1":"1992","2":"398","3":"Avondale Industries","4":"800.0","5":"N.A."},{"1":"1992","2":"399","3":"Du Pont Merck Pharmaceutical","4":"795.4","5":"N.A."},{"1":"1992","2":"450","3":"Riceland Foods","4":"640.6","5":"N.A."},{"1":"1992","2":"454","3":"Prairie Farms Dairy","4":"637.7","5":"N.A."},{"1":"1992","2":"466","3":"Sun-Diamond Growers","4":"602.9","5":"N.A."},{"1":"1992","2":"498","3":"Wisconsin Dairies Cooperative","4":"533.3","5":"N.A."},{"1":"1993","2":"145","3":"Farmland Industries","4":"3438.0","5":"N.A."},{"1":"1993","2":"149","3":"Agway","4":"3274.9","5":"N.A."},{"1":"1993","2":"181","3":"Land O'Lakes","4":"2561.8","5":"N.A."},{"1":"1993","2":"231","3":"MID-AMERICA DAIRYMEN","4":"1874.7","5":"N.A."},{"1":"1993","2":"239","3":"CENEX","4":"1778.5","5":"N.A."},{"1":"1993","2":"290","3":"Gold Kist Holdings","4":"1312.0","5":"N.A."},{"1":"1993","2":"296","3":"Dresser-Rand","4":"1294.4","5":"N.A."},{"1":"1993","2":"325","3":"AG Processing","4":"1129.8","5":"N.A."},{"1":"1993","2":"336","3":"Ocean Spray","4":"1090.8","5":"N.A."},{"1":"1993","2":"383","3":"CF Industries","4":"903.5","5":"N.A."},{"1":"1993","2":"411","3":"Tri Valley Growers","4":"795.1","5":"N.A."},{"1":"1993","2":"419","3":"Leslie Fay","4":"777.4","5":"N.A."},{"1":"1993","2":"458","3":"Prairie Farms Dairy","4":"659.3","5":"N.A."},{"1":"1993","2":"466","3":"Natl. Coop. Refinery Assn.","4":"646.4","5":"N.A."},{"1":"1993","2":"467","3":"Riceland Foods","4":"642.4","5":"N.A."},{"1":"1993","2":"478","3":"Sun-Diamond Growers","4":"623.2","5":"N.A."},{"1":"1994","2":"109","3":"Farmland Industries","4":"4722.9","5":"N.A."},{"1":"1994","2":"154","3":"Agway","4":"3148.7","5":"N.A."},{"1":"1994","2":"172","3":"Land O'Lakes","4":"2733.3","5":"N.A."},{"1":"1994","2":"215","3":"CENEX","4":"2048.0","5":"N.A."},{"1":"1994","2":"237","3":"MID-AMERICA DAIRYMEN","4":"1825.7","5":"N.A."},{"1":"1994","2":"252","3":"Sequa","4":"1697.0","5":"N.A."},{"1":"1994","2":"289","3":"Gold Kist Holdings","4":"1400.6","5":"N.A."},{"1":"1994","2":"321","3":"AG Processing","4":"1218.6","5":"N.A."},{"1":"1994","2":"332","3":"Ocean Spray","4":"1167.6","5":"N.A."},{"1":"1994","2":"379","3":"CF Industries","4":"905.5","5":"N.A."},{"1":"1994","2":"421","3":"Tri Valley Growers","4":"763.0","5":"N.A."},{"1":"1994","2":"440","3":"Natl. Coop. Refinery Assn.","4":"719.6","5":"N.A."},{"1":"1994","2":"442","3":"Prairie Farms Dairy","4":"709.3","5":"N.A."},{"1":"1994","2":"447","3":"Terex","4":"700.0","5":"N.A."},{"1":"1994","2":"462","3":"Riceland Foods","4":"682.5","5":"N.A."},{"1":"1994","2":"479","3":"Sun-Diamond Growers","4":"648.7","5":"N.A."},{"1":"1995","2":"174","3":"Farmland Industries","4":"6677.9","5":"N.A."},{"1":"1995","2":"370","3":"Agway","4":"3017.0","5":"N.A."},{"1":"1995","2":"376","3":"ServiceMaster","4":"2985.2","5":"N.A."},{"1":"1995","2":"438","3":"True Value","4":"2574.4","5":"N.A."},{"1":"1995","2":"457","3":"Roundy's","4":"2465.4","5":"N.A."},{"1":"1995","2":"478","3":"Ace Hardware","4":"2326.1","5":"N.A."},{"1":"1996","2":"164","3":"College Retirement Equities Fund","4":"7950.6","5":"N.A."},{"1":"1996","2":"178","3":"Farmland Industries","4":"7256.9","5":"N.A."},{"1":"1996","2":"487","3":"Spartan Stores","4":"2512.4","5":"N.A."},{"1":"1996","2":"490","3":"Roundy's","4":"2488.2","5":"N.A."},{"1":"1996","2":"497","3":"True Value","4":"2437.0","5":"N.A."},{"1":"1996","2":"498","3":"Ace Hardware","4":"2436.0","5":"N.A."},{"1":"1997","2":"86","3":"College Retirement Equities Fund","4":"13864.6","5":"N.A."},{"1":"1997","2":"151","3":"Farmland Industries","4":"9788.6","5":"N.A."},{"1":"1997","2":"478","3":"Ace Hardware","4":"2742.5","5":"N.A."},{"1":"1997","2":"498","3":"Roundy's","4":"2583.5","5":"N.A."},{"1":"1998","2":"170","3":"Farmland Industries","4":"9147.5","5":"N.A."},{"1":"1998","2":"432","3":"True Value","4":"3332.0","5":"N.A."},{"1":"1998","2":"482","3":"Ace Hardware","4":"2907.3","5":"N.A."},{"1":"1999","2":"184","3":"Farmland Industries","4":"8775.0","5":"N.A."},{"1":"1999","2":"360","3":"True Value","4":"4328.2","5":"N.A."},{"1":"1999","2":"467","3":"Ace Hardware","4":"3120.4","5":"N.A."},{"1":"2000","2":"161","3":"Farmland Industries","4":"10709.1","5":"N.A."},{"1":"2000","2":"267","3":"CHS","4":"6434.5","5":"N.A."},{"1":"2000","2":"357","3":"True Value","4":"4502.3","5":"N.A."},{"1":"2000","2":"482","3":"Ace Hardware","4":"3181.8","5":"N.A."},{"1":"2001","2":"160","3":"Farmland Industries","4":"12239.0","5":"N.A."},{"1":"2001","2":"223","3":"CHS","4":"8571.4","5":"N.A."},{"1":"2001","2":"403","3":"True Value","4":"4159.0","5":"N.A."},{"1":"2002","2":"5","3":"Enron","4":"138718.0","5":"N.A."},{"1":"2002","2":"170","3":"Farmland Industries","4":"11763.4","5":"N.A."},{"1":"2002","2":"244","3":"CHS","4":"7875.2","5":"N.A."},{"1":"2002","2":"452","3":"Roundy's","4":"3451.5","5":"N.A."},{"1":"2003","2":"237","3":"CHS","4":"7845.2","5":"N.A."},{"1":"2003","2":"243","3":"Farmland Industries","4":"7580.2","5":"N.A."},{"1":"2003","2":"297","3":"Land O'Lakes","4":"5847.0","5":"N.A."},{"1":"2003","2":"436","3":"Roundy's","4":"3637.9","5":"N.A."},{"1":"2003","2":"490","3":"Ace Hardware","4":"3029.0","5":"N.A."},{"1":"2005","2":"486","3":"Host Marriott","4":"3773.0","5":"N.A."}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>f500$Profit..in.millions &lt;- as.double(gsub(&#39;N\\.A\\.&#39;,0.0,f500$Profit..in.millions))</code></pre>
<p>Here, we can use gsub again to replace all the <code>N.A.</code> values with 0.0, casting it to a double</p>
<pre class="r"><code>sum(table(f500$Company) &gt; 50)</code></pre>
<pre><code>## [1] 74</code></pre>
<p>There are 74 companies who have been included all 51 years</p>
<pre class="r"><code>head(f500 %&gt;% count(Company, sort=TRUE), n=20)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Company"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["n"],"name":[2],"type":["int"],"align":["right"]}],"data":[{"1":"CBS","2":"57"},{"1":"OfficeMax","2":"55"},{"1":"3M","2":"51"},{"1":"Abbott Laboratories","2":"51"},{"1":"Alcoa","2":"51"},{"1":"Altria Group","2":"51"},{"1":"Amerada Hess","2":"51"},{"1":"American Standard","2":"51"},{"1":"Anheuser-Busch","2":"51"},{"1":"Archer Daniels Midland","2":"51"},{"1":"Ashland","2":"51"},{"1":"Avon Products","2":"51"},{"1":"Boeing","2":"51"},{"1":"Bristol-Myers Squibb","2":"51"},{"1":"Campbell Soup","2":"51"},{"1":"Caterpillar","2":"51"},{"1":"ChevronTexaco","2":"51"},{"1":"Coca-Cola","2":"51"},{"1":"Colgate-Palmolive","2":"51"},{"1":"ConocoPhillips","2":"51"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>It appears that CBS and OfficeMax, have duplicate entries in certain years, let’s see if we can track down the erroneous years.</p>
<pre class="r"><code>f500 %&gt;% 
  filter(Company %in% c(&quot;CBS&quot;, &quot;OfficeMax&quot;)) %&gt;% 
  group_by(Year, Company) %&gt;% 
  count() %&gt;% 
  filter(n &gt; 1)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Year"],"name":[1],"type":["int"],"align":["right"]},{"label":["Company"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["n"],"name":[3],"type":["int"],"align":["right"]}],"data":[{"1":"1972","2":"CBS","3":"2"},{"1":"1973","2":"CBS","3":"2"},{"1":"1974","2":"CBS","3":"2"},{"1":"1975","2":"CBS","3":"2"},{"1":"1976","2":"CBS","3":"2"},{"1":"1977","2":"CBS","3":"2"},{"1":"1978","2":"CBS","3":"2"},{"1":"1979","2":"CBS","3":"2"},{"1":"1980","2":"CBS","3":"2"},{"1":"1981","2":"CBS","3":"2"},{"1":"1995","2":"CBS","3":"2"},{"1":"1996","2":"OfficeMax","3":"2"},{"1":"1997","2":"OfficeMax","3":"2"},{"1":"1998","2":"OfficeMax","3":"2"},{"1":"1999","2":"OfficeMax","3":"2"},{"1":"2000","2":"OfficeMax","3":"2"},{"1":"2001","2":"OfficeMax","3":"2"},{"1":"2002","2":"OfficeMax","3":"2"},{"1":"2003","2":"OfficeMax","3":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>CBS is duplicated in years 1972-81, 1995 and OfficeMax is duplicated between 1996-2003. Since we only can assume that this is an error and cannot know for sure without understanding the data collection process, we will leave these entries be for now. It is also possible that these duplication are due to a merger between companies in later years, given that all company names are represented by their 2005 equivalent.</p>
<div id="plotting-exploration" class="section level3">
<h3>Plotting exploration</h3>
<pre class="r"><code>f500 %&gt;% 
  filter(Company %in% c(&#39;Kellogg&#39;,&#39;3M&#39;,&#39;Pfizer&#39;)) %&gt;% # Choose 3 arbitrary companies
  ggplot(mapping = aes(Year, Rank, color=Company)) +
  geom_line(aes(linetype=Company), size=1.2) +
  labs(title=&#39;Fortune 500 Rank - 3M, Kellogg, and Pfizer (1955-2005)&#39;) +
  scale_y_continuous(breaks = seq(0, 300, by=30), limits=c(300,1), trans = &#39;reverse&#39;) +
  geom_vline(xintercept = 1994)</code></pre>
<p><img src="/assets/images/rimgs/2018-09-16-intro-fortune500_files/figure-html/unnamed-chunk-11-1.png" width="864" /> Clearly, in 1994 there was a large upset in these particular company’s historical trends. In absence of other information, one may guess that the proliferation of the internet may be at play in these sharp declines.</p>
<pre class="r"><code>head(sprdf &lt;-f500 %&gt;% 
  filter(Year %in% 1993:1996) %&gt;% 
  select(c(Year,Company,Rank)) %&gt;% 
  spread(Year, Company), n=30)</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":[""],"name":["_rn_"],"type":[""],"align":["left"]},{"label":["Rank"],"name":[1],"type":["int"],"align":["right"]},{"label":["1993"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["1994"],"name":[3],"type":["fctr"],"align":["left"]},{"label":["1995"],"name":[4],"type":["fctr"],"align":["left"]},{"label":["1996"],"name":[5],"type":["fctr"],"align":["left"]}],"data":[{"1":"1","2":"General Motors","3":"General Motors","4":"General Motors","5":"General Motors","_rn_":"1"},{"1":"2","2":"Exxon Mobil","3":"Ford Motor","4":"Ford Motor","5":"Ford Motor","_rn_":"2"},{"1":"3","2":"Ford Motor","3":"Exxon Mobil","4":"Exxon Mobil","5":"Exxon Mobil","_rn_":"3"},{"1":"4","2":"Intl. Business Machines","3":"Intl. Business Machines","4":"Wal-Mart Stores","5":"Wal-Mart Stores","_rn_":"4"},{"1":"5","2":"General Electric","3":"General Electric","4":"AT&T","5":"AT&T","_rn_":"5"},{"1":"6","2":"Mobil","3":"Mobil","4":"General Electric","5":"Intl. Business Machines","_rn_":"6"},{"1":"7","2":"Altria Group","3":"Altria Group","4":"Intl. Business Machines","5":"General Electric","_rn_":"7"},{"1":"8","2":"ChevronTexaco","3":"Chrysler","4":"Mobil","5":"Mobil","_rn_":"8"},{"1":"9","2":"DuPont","3":"Texaco","4":"Sears Roebuck","5":"Chrysler","_rn_":"9"},{"1":"10","2":"Texaco","3":"DuPont","4":"Altria Group","5":"Altria Group","_rn_":"10"},{"1":"11","2":"Chrysler","3":"ChevronTexaco","4":"Chrysler","5":"Prudential Ins. Co. of America","_rn_":"11"},{"1":"12","2":"Boeing","3":"Procter & Gamble","4":"State Farm Insurance Cos","5":"State Farm Insurance Cos","_rn_":"12"},{"1":"13","2":"Procter & Gamble","3":"Amoco","4":"Prudential Ins. Co. of America","5":"DuPont","_rn_":"13"},{"1":"14","2":"Amoco","3":"Boeing","4":"DuPont","5":"Texaco","_rn_":"14"},{"1":"15","2":"PepsiCo","3":"PepsiCo","4":"Kmart Holding","5":"Sears Roebuck","_rn_":"15"},{"1":"16","2":"United Technologies","3":"ConAgra Foods","4":"Texaco","5":"Kmart Holding","_rn_":"16"},{"1":"17","2":"ConAgra Foods","3":"Shell Oil","4":"Citicorp","5":"Procter & Gamble","_rn_":"17"},{"1":"18","2":"Shell Oil","3":"United Technologies","4":"ChevronTexaco","5":"ChevronTexaco","_rn_":"18"},{"1":"19","2":"Eastman Kodak","3":"Hewlett-Packard","4":"Procter & Gamble","5":"Citicorp","_rn_":"19"},{"1":"20","2":"Dow Chemical","3":"Eastman Kodak","4":"PepsiCo","5":"Hewlett-Packard","_rn_":"20"},{"1":"21","2":"Xerox","3":"Dow Chemical","4":"Amoco","5":"PepsiCo","_rn_":"21"},{"1":"22","2":"Atlantic Richfield","3":"Atlantic Richfield","4":"Hewlett-Packard","5":"MetLife","_rn_":"22"},{"1":"23","2":"McDonnell Douglas","3":"Motorola","4":"ITT Industries","5":"Amoco","_rn_":"23"},{"1":"24","2":"Hewlett-Packard","3":"Marathon Oil","4":"ConAgra Foods","5":"Motorola","_rn_":"24"},{"1":"25","2":"Marathon Oil","3":"Nabisco Group Holdings","4":"Kroger","5":"American Intl. Group","_rn_":"25"},{"1":"26","2":"Nabisco Group Holdings","3":"Xerox","4":"American Intl. Group","5":"ConAgra Foods","_rn_":"26"},{"1":"27","2":"Digital Equipment","3":"Sara Lee","4":"MetLife","5":"Kroger","_rn_":"27"},{"1":"28","2":"3M","3":"McDonnell Douglas","4":"Motorola","5":"Target","_rn_":"28"},{"1":"29","2":"Johnson & Johnson","3":"Digital Equipment","4":"Boeing","5":"Lockheed Martin","_rn_":"29"},{"1":"30","2":"Tenneco Automotive","3":"Johnson & Johnson","4":"Target","5":"United Technologies","_rn_":"30"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>We can already spot a quite few changes in the top 10 ranks between ’94 and ’95. Only 1 company changed between ’93 and ’94 but just one year later we see 3 new companies as well as many shifts up and down the ladder.</p>
<pre class="r"><code>length(setdiff(sprdf$`1994`,sprdf$`1995`))</code></pre>
<pre><code>## [1] 291</code></pre>
<pre class="r"><code>length(setdiff(sprdf$`1993`,sprdf$`1994`))</code></pre>
<pre><code>## [1] 33</code></pre>
<p>Comparing all entries between 1994 and 1995 yields a set-wise difference of 291 companies, compare that to the previous year pair and we only see a total difference of 33 companies. Let’s see if this spike is abnormal compared to all other sequential pairs.</p>
<pre class="r"><code>f55.99 &lt;- f500 %&gt;% 
  filter(Year %in% 1955:1999) %&gt;% 
  select(c(Year,Company,Rank)) %&gt;% 
  spread(Year, Company)</code></pre>
<p>Note: years 2000-2005 refused to spread nicely due to duplicate value entries, so they were omitted. From the python analysis, we know that this range fits expectations regardless</p>
<pre class="r"><code>yoy.diff &lt;- vector()
for(i in 2:45) yoy.diff &lt;- c(yoy.diff, length(setdiff(f55.99[,i],f55.99[,i+1])))
yoy &lt;- data.frame(cbind(Year=as.numeric(colnames(f55.99[3:46])),diff.from.prev = as.numeric(yoy.diff)))</code></pre>
<pre class="r"><code>yoy %&gt;% 
  ggplot(aes(Year, diff.from.prev)) +
  geom_line() + geom_point() +
  labs(title=&quot;Number of differing companies compared to previous year&quot;) +
  scale_x_continuous(breaks = seq(1955,2000,5)) + 
  scale_y_continuous(breaks = seq(0,300,50))</code></pre>
<p><img src="/assets/images/rimgs/2018-09-16-intro-fortune500_files/figure-html/unnamed-chunk-16-1.png" width="672" /> A plot showing year over year difference verifies that 1994-1995 was indeed an anomaly. Our previous hypothesis that the sudden shift was due to the internet proliferating is almost certainly incorrect. The far more likely scenario is that there is either an error in the data collection process, or, the Fortune 500 list dramatically changed their company selection process.</p>
</div>
</div>
<div id="conclusions" class="section level2">
<h2>Conclusions</h2>
<p>This notebook took a brief look at the Fortune 500 companies dataset (1955-2005). Our analysis led to several interesting discoveries, namely, we found that CBS and OfficeMax are included twice in certain years, and from 1994 to 1995 there was a dramatic shift in included companies. Despite the chosen dataset being relatively simple, we still managed to extract some useful information out of it. We did not even use the revenue or profits columns, so there is still a lot of room for exploration.</p>
<div id="future-work" class="section level4">
<h4>Future Work</h4>
<p>We leave this notebook with some unanswered questions:</p>
<ul>
<li>What actually caused the ’94-95 shift?</li>
<li>Why were some companies included multiple times?</li>
</ul>
<p>A fully fleshed out analysis would seek external sources of information and bring it into the notebook to answer these questions. Additionally, we could certainly investigate profits and revenue to see how they correlate with ranking from year to year, or even do some simple linear modeling to really start to understand this data. These sort of analyses and many others will be performed in following notebooks, so have a look around if you’d like to dig a little deeper.</p>
</div>
</div>

{% comment %} </body>
</html> {% endcomment %}
