---
title: "Clustering on the World Happiness Report 2016"
permalink: /r/clustering-whr2019
excerpt: "Attempting to quantify happiness. Building clustering models on the 2016 World happiness report."
categories: [r, multimodel, EDA]
tags: [r, happiness, clustering, GMM, KMeans, AffinityPropagation, Agglomerative]
layout: rmd
author: "Ryan Gust"
date: 2018-12-26
updated: 2018-12-29
header:
  teaser: assets/images/thumbs/chart-unsplash-lchesser.png
---

<div id="overview" class="section level2">
<h2>Overview</h2>
<p>This notebook will run 4 main clustering models and 2 optional:</p>
<ul>
<li>K-means</li>
<li>Agglomerative Clustering</li>
<li>Affinity Propagation</li>
<li>Gaussian Mixture</li>
<li>DBSCAN (optional)</li>
<li>HDBSCAN (optional)</li>
</ul>
<p>on the 2016 World Happiness Report dataset.</p>
<p>Each model will be visualized in 3 different forms:</p>
<ul>
<li>A scatter plot using unaltered data</li>
<li>A scatter plot using scaled data</li>
<li>A Boxplot of the unaltered data</li>
</ul>
<div id="imports" class="section level3">
<h3>Imports</h3>
<pre class="r"><code>library(tidyverse)</code></pre>
<pre><code>## Registered S3 methods overwritten by &#39;ggplot2&#39;:
##   method         from 
##   [.quosures     rlang
##   c.quosures     rlang
##   print.quosures rlang</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;rvest&#39;:
##   method            from
##   read_xml.response xml2</code></pre>
<pre><code>## -- Attaching packages -------------------------------------------------------------------------------------------------------- tidyverse 1.2.1 --</code></pre>
<pre><code>## v ggplot2 3.1.1       v purrr   0.3.2  
## v tibble  2.1.1       v dplyr   0.8.0.1
## v tidyr   0.8.3       v stringr 1.4.0  
## v readr   1.3.1       v forcats 0.4.0</code></pre>
<pre><code>## -- Conflicts ----------------------------------------------------------------------------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(magrittr) # More pipe opperators</code></pre>
<pre><code>## 
## Attaching package: &#39;magrittr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     set_names</code></pre>
<pre><code>## The following object is masked from &#39;package:tidyr&#39;:
## 
##     extract</code></pre>
<pre class="r"><code>library(reshape2)</code></pre>
<pre><code>## 
## Attaching package: &#39;reshape2&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:tidyr&#39;:
## 
##     smiths</code></pre>
<pre class="r"><code>library(corrplot)</code></pre>
<pre><code>## corrplot 0.84 loaded</code></pre>
<pre class="r"><code>#library(cluster)
library(apcluster) # Affinity Propagation</code></pre>
<pre><code>## 
## Attaching package: &#39;apcluster&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     heatmap</code></pre>
<pre class="r"><code>library(factoextra) # Cluster visualization</code></pre>
<pre><code>## Welcome! Related Books: `Practical Guide To Cluster Analysis in R` at https://goo.gl/13EFCZ</code></pre>
<pre class="r"><code>library(ape) # dendrogram plotting
library(ClusterR) # Gaussian Mixtures</code></pre>
<pre><code>## Loading required package: gtools</code></pre>
<pre class="r"><code>library(dbscan) # DBSCAN, HDBSCAN</code></pre>
</div>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<p>The 2016 World Happiness Report dataset may be obtained from</p>
<p><a href="https://www.kaggle.com/unsdsn/world-happiness" class="uri">https://www.kaggle.com/unsdsn/world-happiness</a></p>
<p>The dataset models countries across the world using the fictitious country of ‘Dystopia’ as a baseline. Dystopia is the amalgam of the worst scores across the world combined to create a country worse than every other in all categories. So, in essence, this data is modeled in such a way as to measure how much better off is a country than the worst it could possibly be.</p>
<p>It has 13 variables, of which that last 7 are calculated via some weighting metric:</p>
<ul>
<li><code>Country</code> - Name of the country.</li>
<li><code>Region</code> - Region the country belongs to.</li>
<li><code>Happiness Rank</code> - Rank of the country based on the Happiness Score.</li>
<li><code>Happiness Score</code> - Metric measured in 2016 by asking sampled people: “How would you rate your happiness on a scale of 0 to 10 where 10 is the happiest.”</li>
<li><code>Lower Confidence Interval</code> - Lower Confidence Interval of the Happiness Score.</li>
<li><code>Upper Confidence Interval</code> - Upper Confidence Interval of the Happiness Score.</li>
<li><code>Economy (GDP per Capita)</code> - The extent to which GDP contributes to the calculation of the Happiness Score.</li>
<li><code>Family</code> - The extent to which Family contributes to the calculation of the Happiness Score.</li>
<li><code>Health (Life Expectancy)</code> - The extent to which Life expectancy contributed to the calculation of the Happiness Score.</li>
<li><code>Freedom</code> - The extent to which Freedom contributed to the calculation of the Happiness Score.</li>
<li><code>Trust (Government Corruption)</code> - The extent to which Perception of Corruption contributes to Happiness Score.</li>
<li><code>Generosity</code> - The extent to which Generosity contributed to the calculation of the Happiness Score.</li>
<li><code>Dystopia Residual</code> - The extent to which Dystopia Residual contributed to the calculation of the Happiness Score.</li>
</ul>
<p>Relevant files: <code>data/</code> - contains <code>happiness_2016.csv</code> the externally obtained data for this analysis. And <code>Lab9_R_edo.Rmd</code></p>
<pre class="r"><code>(whr &lt;- read.csv(&#39;data/happiness_2016.csv&#39;))</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Country"],"name":[1],"type":["fctr"],"align":["left"]},{"label":["Region"],"name":[2],"type":["fctr"],"align":["left"]},{"label":["Happiness.Rank"],"name":[3],"type":["int"],"align":["right"]},{"label":["Happiness.Score"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["Lower.Confidence.Interval"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Upper.Confidence.Interval"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Economy..GDP.per.Capita."],"name":[7],"type":["dbl"],"align":["right"]},{"label":["Family"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["Health..Life.Expectancy."],"name":[9],"type":["dbl"],"align":["right"]},{"label":["Freedom"],"name":[10],"type":["dbl"],"align":["right"]},{"label":["Trust..Government.Corruption."],"name":[11],"type":["dbl"],"align":["right"]},{"label":["Generosity"],"name":[12],"type":["dbl"],"align":["right"]},{"label":["Dystopia.Residual"],"name":[13],"type":["dbl"],"align":["right"]}],"data":[{"1":"Denmark","2":"Western Europe","3":"1","4":"7.526","5":"7.460","6":"7.592","7":"1.44178","8":"1.16374","9":"0.79504","10":"0.57941","11":"0.44453","12":"0.36171","13":"2.73939"},{"1":"Switzerland","2":"Western Europe","3":"2","4":"7.509","5":"7.428","6":"7.590","7":"1.52733","8":"1.14524","9":"0.86303","10":"0.58557","11":"0.41203","12":"0.28083","13":"2.69463"},{"1":"Iceland","2":"Western Europe","3":"3","4":"7.501","5":"7.333","6":"7.669","7":"1.42666","8":"1.18326","9":"0.86733","10":"0.56624","11":"0.14975","12":"0.47678","13":"2.83137"},{"1":"Norway","2":"Western Europe","3":"4","4":"7.498","5":"7.421","6":"7.575","7":"1.57744","8":"1.12690","9":"0.79579","10":"0.59609","11":"0.35776","12":"0.37895","13":"2.66465"},{"1":"Finland","2":"Western Europe","3":"5","4":"7.413","5":"7.351","6":"7.475","7":"1.40598","8":"1.13464","9":"0.81091","10":"0.57104","11":"0.41004","12":"0.25492","13":"2.82596"},{"1":"Canada","2":"North America","3":"6","4":"7.404","5":"7.335","6":"7.473","7":"1.44015","8":"1.09610","9":"0.82760","10":"0.57370","11":"0.31329","12":"0.44834","13":"2.70485"},{"1":"Netherlands","2":"Western Europe","3":"7","4":"7.339","5":"7.284","6":"7.394","7":"1.46468","8":"1.02912","9":"0.81231","10":"0.55211","11":"0.29927","12":"0.47416","13":"2.70749"},{"1":"New Zealand","2":"Australia and New Zealand","3":"8","4":"7.334","5":"7.264","6":"7.404","7":"1.36066","8":"1.17278","9":"0.83096","10":"0.58147","11":"0.41904","12":"0.49401","13":"2.47553"},{"1":"Australia","2":"Australia and New Zealand","3":"9","4":"7.313","5":"7.241","6":"7.385","7":"1.44443","8":"1.10476","9":"0.85120","10":"0.56837","11":"0.32331","12":"0.47407","13":"2.54650"},{"1":"Sweden","2":"Western Europe","3":"10","4":"7.291","5":"7.227","6":"7.355","7":"1.45181","8":"1.08764","9":"0.83121","10":"0.58218","11":"0.40867","12":"0.38254","13":"2.54734"},{"1":"Israel","2":"Middle East and Northern Africa","3":"11","4":"7.267","5":"7.199","6":"7.335","7":"1.33766","8":"0.99537","9":"0.84917","10":"0.36432","11":"0.08728","12":"0.32288","13":"3.31029"},{"1":"Austria","2":"Western Europe","3":"12","4":"7.119","5":"7.045","6":"7.193","7":"1.45038","8":"1.08383","9":"0.80565","10":"0.54355","11":"0.21348","12":"0.32865","13":"2.69343"},{"1":"United States","2":"North America","3":"13","4":"7.104","5":"7.020","6":"7.188","7":"1.50796","8":"1.04782","9":"0.77900","10":"0.48163","11":"0.14868","12":"0.41077","13":"2.72782"},{"1":"Costa Rica","2":"Latin America and Caribbean","3":"14","4":"7.087","5":"6.999","6":"7.175","7":"1.06879","8":"1.02152","9":"0.76146","10":"0.55225","11":"0.10547","12":"0.22553","13":"3.35168"},{"1":"Puerto Rico","2":"Latin America and Caribbean","3":"15","4":"7.039","5":"6.794","6":"7.284","7":"1.35943","8":"1.08113","9":"0.77758","10":"0.46823","11":"0.12275","12":"0.22202","13":"3.00760"},{"1":"Germany","2":"Western Europe","3":"16","4":"6.994","5":"6.930","6":"7.058","7":"1.44787","8":"1.09774","9":"0.81487","10":"0.53466","11":"0.28551","12":"0.30452","13":"2.50931"},{"1":"Brazil","2":"Latin America and Caribbean","3":"17","4":"6.952","5":"6.875","6":"7.029","7":"1.08754","8":"1.03938","9":"0.61415","10":"0.40425","11":"0.14166","12":"0.15776","13":"3.50733"},{"1":"Belgium","2":"Western Europe","3":"18","4":"6.929","5":"6.861","6":"6.997","7":"1.42539","8":"1.05249","9":"0.81959","10":"0.51354","11":"0.26248","12":"0.24240","13":"2.61355"},{"1":"Ireland","2":"Western Europe","3":"19","4":"6.907","5":"6.836","6":"6.978","7":"1.48341","8":"1.16157","9":"0.81455","10":"0.54008","11":"0.29754","12":"0.44963","13":"2.15988"},{"1":"Luxembourg","2":"Western Europe","3":"20","4":"6.871","5":"6.804","6":"6.938","7":"1.69752","8":"1.03999","9":"0.84542","10":"0.54870","11":"0.35329","12":"0.27571","13":"2.11055"},{"1":"Mexico","2":"Latin America and Caribbean","3":"21","4":"6.778","5":"6.680","6":"6.876","7":"1.11508","8":"0.71460","9":"0.71143","10":"0.37709","11":"0.18355","12":"0.11735","13":"3.55906"},{"1":"Singapore","2":"Southeastern Asia","3":"22","4":"6.739","5":"6.674","6":"6.804","7":"1.64555","8":"0.86758","9":"0.94719","10":"0.48770","11":"0.46987","12":"0.32706","13":"1.99375"},{"1":"United Kingdom","2":"Western Europe","3":"23","4":"6.725","5":"6.647","6":"6.803","7":"1.40283","8":"1.08672","9":"0.80991","10":"0.50036","11":"0.27399","12":"0.50156","13":"2.14999"},{"1":"Chile","2":"Latin America and Caribbean","3":"24","4":"6.705","5":"6.615","6":"6.795","7":"1.21670","8":"0.90587","9":"0.81883","10":"0.37789","11":"0.11451","12":"0.31595","13":"2.95505"},{"1":"Panama","2":"Latin America and Caribbean","3":"25","4":"6.701","5":"6.601","6":"6.801","7":"1.18306","8":"0.98912","9":"0.70835","10":"0.48927","11":"0.08423","12":"0.24180","13":"3.00559"},{"1":"Argentina","2":"Latin America and Caribbean","3":"26","4":"6.650","5":"6.560","6":"6.740","7":"1.15137","8":"1.06612","9":"0.69711","10":"0.42284","11":"0.07296","12":"0.10989","13":"3.12985"},{"1":"Czech Republic","2":"Central and Eastern Europe","3":"27","4":"6.596","5":"6.515","6":"6.677","7":"1.30915","8":"1.00793","9":"0.76376","10":"0.41418","11":"0.03986","12":"0.09929","13":"2.96211"},{"1":"United Arab Emirates","2":"Middle East and Northern Africa","3":"28","4":"6.573","5":"6.494","6":"6.652","7":"1.57352","8":"0.87114","9":"0.72993","10":"0.56215","11":"0.35561","12":"0.26591","13":"2.21507"},{"1":"Uruguay","2":"Latin America and Caribbean","3":"29","4":"6.545","5":"6.456","6":"6.634","7":"1.18157","8":"1.03143","9":"0.72183","10":"0.54388","11":"0.21394","12":"0.18056","13":"2.67139"},{"1":"Malta","2":"Western Europe","3":"30","4":"6.488","5":"6.409","6":"6.567","7":"1.30782","8":"1.09879","9":"0.80315","10":"0.54994","11":"0.17554","12":"0.56237","13":"1.99032"},{"1":"Colombia","2":"Latin America and Caribbean","3":"31","4":"6.481","5":"6.384","6":"6.578","7":"1.03032","8":"1.02169","9":"0.59659","10":"0.44735","11":"0.05399","12":"0.15626","13":"3.17471"},{"1":"France","2":"Western Europe","3":"32","4":"6.478","5":"6.397","6":"6.559","7":"1.39488","8":"1.00508","9":"0.83795","10":"0.46562","11":"0.17808","12":"0.12160","13":"2.47440"},{"1":"Thailand","2":"Southeastern Asia","3":"33","4":"6.474","5":"6.396","6":"6.552","7":"1.08930","8":"1.04477","9":"0.64915","10":"0.49553","11":"0.02833","12":"0.58696","13":"2.57960"},{"1":"Saudi Arabia","2":"Middle East and Northern Africa","3":"34","4":"6.379","5":"6.287","6":"6.471","7":"1.48953","8":"0.84829","9":"0.59267","10":"0.37904","11":"0.30008","12":"0.15457","13":"2.61482"},{"1":"Taiwan","2":"Eastern Asia","3":"34","4":"6.379","5":"6.305","6":"6.453","7":"1.39729","8":"0.92624","9":"0.79565","10":"0.32377","11":"0.06630","12":"0.25495","13":"2.61523"},{"1":"Qatar","2":"Middle East and Northern Africa","3":"36","4":"6.375","5":"6.178","6":"6.572","7":"1.82427","8":"0.87964","9":"0.71723","10":"0.56679","11":"0.48049","12":"0.32388","13":"1.58224"},{"1":"Spain","2":"Western Europe","3":"37","4":"6.361","5":"6.288","6":"6.434","7":"1.34253","8":"1.12945","9":"0.87896","10":"0.37545","11":"0.06137","12":"0.17665","13":"2.39663"},{"1":"Algeria","2":"Middle East and Northern Africa","3":"38","4":"6.355","5":"6.227","6":"6.483","7":"1.05266","8":"0.83309","9":"0.61804","10":"0.21006","11":"0.16157","12":"0.07044","13":"3.40904"},{"1":"Guatemala","2":"Latin America and Caribbean","3":"39","4":"6.324","5":"6.213","6":"6.435","7":"0.83454","8":"0.87119","9":"0.54039","10":"0.50379","11":"0.08701","12":"0.28808","13":"3.19863"},{"1":"Suriname","2":"Latin America and Caribbean","3":"40","4":"6.269","5":"6.073","6":"6.465","7":"1.09686","8":"0.77866","9":"0.50933","10":"0.52234","11":"0.12692","12":"0.16665","13":"3.06852"},{"1":"Kuwait","2":"Middle East and Northern Africa","3":"41","4":"6.239","5":"6.154","6":"6.324","7":"1.61714","8":"0.87758","9":"0.63569","10":"0.43166","11":"0.23669","12":"0.15965","13":"2.28085"},{"1":"Bahrain","2":"Middle East and Northern Africa","3":"42","4":"6.218","5":"6.128","6":"6.308","7":"1.44024","8":"0.94397","9":"0.65696","10":"0.47375","11":"0.25772","12":"0.17147","13":"2.27405"},{"1":"Trinidad and Tobago","2":"Latin America and Caribbean","3":"43","4":"6.168","5":"5.950","6":"6.386","7":"1.32572","8":"0.98569","9":"0.52608","10":"0.48453","11":"0.01241","12":"0.31935","13":"2.51394"},{"1":"Venezuela","2":"Latin America and Caribbean","3":"44","4":"6.084","5":"5.973","6":"6.195","7":"1.13367","8":"1.03302","9":"0.61904","10":"0.19847","11":"0.08304","12":"0.04250","13":"2.97468"},{"1":"Slovakia","2":"Central and Eastern Europe","3":"45","4":"6.078","5":"5.996","6":"6.160","7":"1.27973","8":"1.08268","9":"0.70367","10":"0.23391","11":"0.02947","12":"0.13837","13":"2.61065"},{"1":"El Salvador","2":"Latin America and Caribbean","3":"46","4":"6.068","5":"5.967","6":"6.169","7":"0.87370","8":"0.80975","9":"0.59600","10":"0.37269","11":"0.10613","12":"0.08877","13":"3.22134"},{"1":"Malaysia","2":"Southeastern Asia","3":"47","4":"6.005","5":"5.921","6":"6.089","7":"1.25142","8":"0.88025","9":"0.62366","10":"0.39031","11":"0.09081","12":"0.41474","13":"2.35384"},{"1":"Nicaragua","2":"Latin America and Caribbean","3":"48","4":"5.992","5":"5.877","6":"6.107","7":"0.69384","8":"0.89521","9":"0.65213","10":"0.46582","11":"0.16292","12":"0.29773","13":"2.82428"},{"1":"Uzbekistan","2":"Central and Eastern Europe","3":"49","4":"5.987","5":"5.896","6":"6.078","7":"0.73591","8":"1.16810","9":"0.50163","10":"0.60848","11":"0.28333","12":"0.34326","13":"2.34638"},{"1":"Italy","2":"Western Europe","3":"50","4":"5.977","5":"5.898","6":"6.056","7":"1.35495","8":"1.04167","9":"0.85102","10":"0.18827","11":"0.02556","12":"0.16684","13":"2.34918"},{"1":"Ecuador","2":"Latin America and Caribbean","3":"51","4":"5.976","5":"5.880","6":"6.072","7":"0.97306","8":"0.85974","9":"0.68613","10":"0.40270","11":"0.18037","12":"0.10074","13":"2.77366"},{"1":"Belize","2":"Latin America and Caribbean","3":"52","4":"5.956","5":"5.710","6":"6.202","7":"0.87616","8":"0.68655","9":"0.45569","10":"0.51231","11":"0.10771","12":"0.23684","13":"3.08039"},{"1":"Japan","2":"Eastern Asia","3":"53","4":"5.921","5":"5.850","6":"5.992","7":"1.38007","8":"1.06054","9":"0.91491","10":"0.46761","11":"0.18985","12":"0.10224","13":"1.80584"},{"1":"Kazakhstan","2":"Central and Eastern Europe","3":"54","4":"5.919","5":"5.837","6":"6.001","7":"1.22943","8":"0.95544","9":"0.57386","10":"0.40520","11":"0.11132","12":"0.15011","13":"2.49325"},{"1":"Moldova","2":"Central and Eastern Europe","3":"55","4":"5.897","5":"5.823","6":"5.971","7":"0.69177","8":"0.83132","9":"0.52309","10":"0.25202","11":"0.01903","12":"0.19997","13":"3.38007"},{"1":"Russia","2":"Central and Eastern Europe","3":"56","4":"5.856","5":"5.789","6":"5.923","7":"1.23228","8":"1.05261","9":"0.58991","10":"0.32682","11":"0.03586","12":"0.02736","13":"2.59115"},{"1":"Poland","2":"Central and Eastern Europe","3":"57","4":"5.835","5":"5.749","6":"5.921","7":"1.24585","8":"1.04685","9":"0.69058","10":"0.45190","11":"0.05500","12":"0.14443","13":"2.20035"},{"1":"South Korea","2":"Eastern Asia","3":"57","4":"5.835","5":"5.747","6":"5.923","7":"1.35948","8":"0.72194","9":"0.88645","10":"0.25168","11":"0.07716","12":"0.18824","13":"2.35015"},{"1":"Bolivia","2":"Latin America and Caribbean","3":"59","4":"5.822","5":"5.740","6":"5.904","7":"0.79422","8":"0.83779","9":"0.46970","10":"0.50961","11":"0.07746","12":"0.21698","13":"2.91635"},{"1":"Lithuania","2":"Central and Eastern Europe","3":"60","4":"5.813","5":"5.734","6":"5.892","7":"1.26920","8":"1.06411","9":"0.64674","10":"0.18929","11":"0.01820","12":"0.02025","13":"2.60525"},{"1":"Belarus","2":"Central and Eastern Europe","3":"61","4":"5.802","5":"5.723","6":"5.881","7":"1.13062","8":"1.04993","9":"0.63104","10":"0.29091","11":"0.17457","12":"0.13942","13":"2.38582"},{"1":"North Cyprus","2":"Western Europe","3":"62","4":"5.771","5":"5.670","6":"5.872","7":"1.31141","8":"0.81826","9":"0.84142","10":"0.43596","11":"0.16578","12":"0.26322","13":"1.93447"},{"1":"Slovenia","2":"Central and Eastern Europe","3":"63","4":"5.768","5":"5.683","6":"5.853","7":"1.29947","8":"1.05613","9":"0.79151","10":"0.53164","11":"0.03635","12":"0.25738","13":"1.79522"},{"1":"Peru","2":"Latin America and Caribbean","3":"64","4":"5.743","5":"5.647","6":"5.839","7":"0.99602","8":"0.81255","9":"0.62994","10":"0.37502","11":"0.05292","12":"0.14527","13":"2.73117"},{"1":"Turkmenistan","2":"Central and Eastern Europe","3":"65","4":"5.658","5":"5.580","6":"5.736","7":"1.08017","8":"1.03817","9":"0.44006","10":"0.37408","11":"0.28467","12":"0.22567","13":"2.21489"},{"1":"Mauritius","2":"Sub-Saharan Africa","3":"66","4":"5.648","5":"5.507","6":"5.789","7":"1.14372","8":"0.75695","9":"0.66189","10":"0.46145","11":"0.05203","12":"0.36951","13":"2.20223"},{"1":"Libya","2":"Middle East and Northern Africa","3":"67","4":"5.615","5":"5.406","6":"5.824","7":"1.06688","8":"0.95076","9":"0.52304","10":"0.40672","11":"0.10339","12":"0.17087","13":"2.39374"},{"1":"Latvia","2":"Central and Eastern Europe","3":"68","4":"5.560","5":"5.486","6":"5.634","7":"1.21788","8":"0.95025","9":"0.63952","10":"0.27996","11":"0.08890","12":"0.17445","13":"2.20859"},{"1":"Cyprus","2":"Western Europe","3":"69","4":"5.546","5":"5.442","6":"5.650","7":"1.31857","8":"0.70697","9":"0.84880","10":"0.29507","11":"0.05228","12":"0.27906","13":"2.04497"},{"1":"Paraguay","2":"Latin America and Caribbean","3":"70","4":"5.538","5":"5.453","6":"5.623","7":"0.89373","8":"1.11111","9":"0.58295","10":"0.46235","11":"0.07396","12":"0.25296","13":"2.16091"},{"1":"Romania","2":"Central and Eastern Europe","3":"71","4":"5.528","5":"5.427","6":"5.629","7":"1.16970","8":"0.72803","9":"0.67602","10":"0.36712","11":"0.00679","12":"0.12889","13":"2.45184"},{"1":"Estonia","2":"Central and Eastern Europe","3":"72","4":"5.517","5":"5.437","6":"5.597","7":"1.27964","8":"1.05163","9":"0.68098","10":"0.41511","11":"0.18519","12":"0.08423","13":"1.81985"},{"1":"Jamaica","2":"Latin America and Caribbean","3":"73","4":"5.510","5":"5.315","6":"5.705","7":"0.89333","8":"0.96372","9":"0.59469","10":"0.43597","11":"0.04294","12":"0.22245","13":"2.35682"},{"1":"Croatia","2":"Central and Eastern Europe","3":"74","4":"5.488","5":"5.402","6":"5.574","7":"1.18649","8":"0.60809","9":"0.70524","10":"0.23907","11":"0.04002","12":"0.18434","13":"2.52462"},{"1":"Hong Kong","2":"Eastern Asia","3":"75","4":"5.458","5":"5.362","6":"5.554","7":"1.51070","8":"0.87021","9":"0.95277","10":"0.48079","11":"0.31647","12":"0.40097","13":"0.92614"},{"1":"Somalia","2":"Sub-Saharan Africa","3":"76","4":"5.440","5":"5.321","6":"5.559","7":"0.00000","8":"0.33613","9":"0.11466","10":"0.56778","11":"0.31180","12":"0.27225","13":"3.83772"},{"1":"Kosovo","2":"Central and Eastern Europe","3":"77","4":"5.401","5":"5.308","6":"5.494","7":"0.90145","8":"0.66062","9":"0.54000","10":"0.14396","11":"0.06547","12":"0.27992","13":"2.80998"},{"1":"Turkey","2":"Middle East and Northern Africa","3":"78","4":"5.389","5":"5.295","6":"5.483","7":"1.16492","8":"0.87717","9":"0.64718","10":"0.23889","11":"0.12348","12":"0.04707","13":"2.29074"},{"1":"Indonesia","2":"Southeastern Asia","3":"79","4":"5.314","5":"5.237","6":"5.391","7":"0.95104","8":"0.87625","9":"0.49374","10":"0.39237","11":"0.00322","12":"0.56521","13":"2.03171"},{"1":"Jordan","2":"Middle East and Northern Africa","3":"80","4":"5.303","5":"5.187","6":"5.419","7":"0.99673","8":"0.86216","9":"0.60712","10":"0.36023","11":"0.13297","12":"0.14262","13":"2.20142"},{"1":"Azerbaijan","2":"Central and Eastern Europe","3":"81","4":"5.291","5":"5.226","6":"5.356","7":"1.12373","8":"0.76042","9":"0.54504","10":"0.35327","11":"0.17914","12":"0.05640","13":"2.27350"},{"1":"Philippines","2":"Southeastern Asia","3":"82","4":"5.279","5":"5.160","6":"5.398","7":"0.81217","8":"0.87877","9":"0.47036","10":"0.54854","11":"0.11757","12":"0.21674","13":"2.23484"},{"1":"China","2":"Eastern Asia","3":"83","4":"5.245","5":"5.199","6":"5.291","7":"1.02780","8":"0.79381","9":"0.73561","10":"0.44012","11":"0.02745","12":"0.04959","13":"2.17087"},{"1":"Bhutan","2":"Southern Asia","3":"84","4":"5.196","5":"5.138","6":"5.254","7":"0.85270","8":"0.90836","9":"0.49759","10":"0.46074","11":"0.16160","12":"0.48546","13":"1.82916"},{"1":"Kyrgyzstan","2":"Central and Eastern Europe","3":"85","4":"5.185","5":"5.103","6":"5.267","7":"0.56044","8":"0.95434","9":"0.55449","10":"0.40212","11":"0.04762","12":"0.38432","13":"2.28136"},{"1":"Serbia","2":"Central and Eastern Europe","3":"86","4":"5.177","5":"5.083","6":"5.271","7":"1.03437","8":"0.81329","9":"0.64580","10":"0.15718","11":"0.04339","12":"0.20737","13":"2.27539"},{"1":"Bosnia and Herzegovina","2":"Central and Eastern Europe","3":"87","4":"5.163","5":"5.063","6":"5.263","7":"0.93383","8":"0.64367","9":"0.70766","10":"0.09511","11":"0.00000","12":"0.29889","13":"2.48406"},{"1":"Montenegro","2":"Central and Eastern Europe","3":"88","4":"5.161","5":"5.055","6":"5.267","7":"1.07838","8":"0.74173","9":"0.63533","10":"0.15111","11":"0.12721","12":"0.17191","13":"2.25531"},{"1":"Dominican Republic","2":"Latin America and Caribbean","3":"89","4":"5.155","5":"5.037","6":"5.273","7":"1.02787","8":"0.99496","9":"0.57669","10":"0.52259","11":"0.12372","12":"0.21286","13":"1.69626"},{"1":"Morocco","2":"Middle East and Northern Africa","3":"90","4":"5.151","5":"5.058","6":"5.244","7":"0.84058","8":"0.38595","9":"0.59471","10":"0.25646","11":"0.08404","12":"0.04053","13":"2.94891"},{"1":"Hungary","2":"Central and Eastern Europe","3":"91","4":"5.145","5":"5.056","6":"5.234","7":"1.24142","8":"0.93164","9":"0.67608","10":"0.19770","11":"0.04472","12":"0.09900","13":"1.95473"},{"1":"Pakistan","2":"Southern Asia","3":"92","4":"5.132","5":"5.038","6":"5.226","7":"0.68816","8":"0.26135","9":"0.40306","10":"0.14622","11":"0.13880","12":"0.31185","13":"3.18286"},{"1":"Lebanon","2":"Middle East and Northern Africa","3":"93","4":"5.129","5":"5.031","6":"5.227","7":"1.12268","8":"0.64184","9":"0.76171","10":"0.26228","11":"0.03061","12":"0.23693","13":"2.07339"},{"1":"Portugal","2":"Western Europe","3":"94","4":"5.123","5":"5.030","6":"5.216","7":"1.27607","8":"0.94367","9":"0.79363","10":"0.44727","11":"0.01521","12":"0.11691","13":"1.53015"},{"1":"Macedonia","2":"Central and Eastern Europe","3":"95","4":"5.121","5":"5.017","6":"5.225","7":"1.01930","8":"0.78236","9":"0.64738","10":"0.27668","11":"0.07047","12":"0.23507","13":"2.08947"},{"1":"Vietnam","2":"Southeastern Asia","3":"96","4":"5.061","5":"4.991","6":"5.131","7":"0.74037","8":"0.79117","9":"0.66157","10":"0.55954","11":"0.11556","12":"0.25075","13":"1.94180"},{"1":"Somaliland Region","2":"Sub-Saharan Africa","3":"97","4":"5.057","5":"4.934","6":"5.180","7":"0.25558","8":"0.75862","9":"0.33108","10":"0.39130","11":"0.36794","12":"0.51479","13":"2.43801"},{"1":"Tunisia","2":"Middle East and Northern Africa","3":"98","4":"5.045","5":"4.965","6":"5.125","7":"0.97724","8":"0.43165","9":"0.59577","10":"0.23553","11":"0.08170","12":"0.03936","13":"2.68413"},{"1":"Greece","2":"Western Europe","3":"99","4":"5.033","5":"4.935","6":"5.131","7":"1.24886","8":"0.75473","9":"0.80029","10":"0.05822","11":"0.04127","12":"0.00000","13":"2.12944"},{"1":"Tajikistan","2":"Central and Eastern Europe","3":"100","4":"4.996","5":"4.923","6":"5.069","7":"0.48835","8":"0.75602","9":"0.53119","10":"0.43408","11":"0.13509","12":"0.25998","13":"2.39106"},{"1":"Mongolia","2":"Eastern Asia","3":"101","4":"4.907","5":"4.838","6":"4.976","7":"0.98853","8":"1.08983","9":"0.55469","10":"0.35972","11":"0.03285","12":"0.34539","13":"1.53586"},{"1":"Laos","2":"Southeastern Asia","3":"102","4":"4.876","5":"4.742","6":"5.010","7":"0.68042","8":"0.54970","9":"0.38291","10":"0.52168","11":"0.22423","12":"0.43079","13":"2.08637"},{"1":"Nigeria","2":"Sub-Saharan Africa","3":"103","4":"4.875","5":"4.750","6":"5.000","7":"0.75216","8":"0.64498","9":"0.05108","10":"0.27854","11":"0.03050","12":"0.23219","13":"2.88586"},{"1":"Honduras","2":"Latin America and Caribbean","3":"104","4":"4.871","5":"4.750","6":"4.992","7":"0.69429","8":"0.75596","9":"0.58383","10":"0.26755","11":"0.06906","12":"0.20440","13":"2.29551"},{"1":"Iran","2":"Middle East and Northern Africa","3":"105","4":"4.813","5":"4.703","6":"4.923","7":"1.11758","8":"0.38857","9":"0.64232","10":"0.22544","11":"0.05570","12":"0.38538","13":"1.99817"},{"1":"Zambia","2":"Sub-Saharan Africa","3":"106","4":"4.795","5":"4.645","6":"4.945","7":"0.61202","8":"0.63760","9":"0.23573","10":"0.42662","11":"0.11479","12":"0.17866","13":"2.58991"},{"1":"Nepal","2":"Southern Asia","3":"107","4":"4.793","5":"4.698","6":"4.888","7":"0.44626","8":"0.69699","9":"0.50073","10":"0.37012","11":"0.07008","12":"0.38160","13":"2.32694"},{"1":"Palestinian Territories","2":"Middle East and Northern Africa","3":"108","4":"4.754","5":"4.649","6":"4.859","7":"0.67024","8":"0.71629","9":"0.56844","10":"0.17744","11":"0.10613","12":"0.11154","13":"2.40364"},{"1":"Albania","2":"Central and Eastern Europe","3":"109","4":"4.655","5":"4.546","6":"4.764","7":"0.95530","8":"0.50163","9":"0.73007","10":"0.31866","11":"0.05301","12":"0.16840","13":"1.92816"},{"1":"Bangladesh","2":"Southern Asia","3":"110","4":"4.643","5":"4.560","6":"4.726","7":"0.54177","8":"0.24749","9":"0.52989","10":"0.39778","11":"0.12583","12":"0.19132","13":"2.60904"},{"1":"Sierra Leone","2":"Sub-Saharan Africa","3":"111","4":"4.635","5":"4.505","6":"4.765","7":"0.36485","8":"0.62800","9":"0.00000","10":"0.30685","11":"0.08196","12":"0.23897","13":"3.01402"},{"1":"Iraq","2":"Middle East and Northern Africa","3":"112","4":"4.575","5":"4.446","6":"4.704","7":"1.07474","8":"0.59205","9":"0.51076","10":"0.24856","11":"0.13636","12":"0.19589","13":"1.81657"},{"1":"Namibia","2":"Sub-Saharan Africa","3":"113","4":"4.574","5":"4.374","6":"4.774","7":"0.93287","8":"0.70362","9":"0.34745","10":"0.48614","11":"0.10398","12":"0.07795","13":"1.92198"},{"1":"Cameroon","2":"Sub-Saharan Africa","3":"114","4":"4.513","5":"4.417","6":"4.609","7":"0.52497","8":"0.62542","9":"0.12698","10":"0.42736","11":"0.06126","12":"0.22680","13":"2.51980"},{"1":"Ethiopia","2":"Sub-Saharan Africa","3":"115","4":"4.508","5":"4.425","6":"4.591","7":"0.29283","8":"0.37932","9":"0.34578","10":"0.36703","11":"0.17170","12":"0.29522","13":"2.65614"},{"1":"South Africa","2":"Sub-Saharan Africa","3":"116","4":"4.459","5":"4.371","6":"4.547","7":"1.02416","8":"0.96053","9":"0.18611","10":"0.42483","11":"0.08415","12":"0.13656","13":"1.64227"},{"1":"Sri Lanka","2":"Southern Asia","3":"117","4":"4.415","5":"4.322","6":"4.508","7":"0.97318","8":"0.84783","9":"0.62007","10":"0.50817","11":"0.07964","12":"0.46978","13":"0.91681"},{"1":"India","2":"Southern Asia","3":"118","4":"4.404","5":"4.351","6":"4.457","7":"0.74036","8":"0.29247","9":"0.45091","10":"0.40285","11":"0.08722","12":"0.25028","13":"2.18032"},{"1":"Myanmar","2":"Southeastern Asia","3":"119","4":"4.395","5":"4.327","6":"4.463","7":"0.34112","8":"0.69981","9":"0.39880","10":"0.42692","11":"0.20243","12":"0.81971","13":"1.50655"},{"1":"Egypt","2":"Middle East and Northern Africa","3":"120","4":"4.362","5":"4.259","6":"4.465","7":"0.95395","8":"0.49813","9":"0.52116","10":"0.18847","11":"0.10393","12":"0.12706","13":"1.96895"},{"1":"Armenia","2":"Central and Eastern Europe","3":"121","4":"4.360","5":"4.266","6":"4.454","7":"0.86086","8":"0.62477","9":"0.64083","10":"0.14037","11":"0.03616","12":"0.07793","13":"1.97864"},{"1":"Kenya","2":"Sub-Saharan Africa","3":"122","4":"4.356","5":"4.259","6":"4.453","7":"0.52267","8":"0.76240","9":"0.30147","10":"0.40576","11":"0.06686","12":"0.41328","13":"1.88326"},{"1":"Ukraine","2":"Central and Eastern Europe","3":"123","4":"4.324","5":"4.236","6":"4.412","7":"0.87287","8":"1.01413","9":"0.58628","10":"0.12859","11":"0.01829","12":"0.20363","13":"1.50066"},{"1":"Ghana","2":"Sub-Saharan Africa","3":"124","4":"4.276","5":"4.185","6":"4.367","7":"0.63107","8":"0.49353","9":"0.29681","10":"0.40973","11":"0.03260","12":"0.21203","13":"2.20020"},{"1":"Congo (Kinshasa)","2":"Sub-Saharan Africa","3":"125","4":"4.272","5":"4.191","6":"4.353","7":"0.05661","8":"0.80676","9":"0.18800","10":"0.15602","11":"0.06075","12":"0.25458","13":"2.74924"},{"1":"Georgia","2":"Central and Eastern Europe","3":"126","4":"4.252","5":"4.164","6":"4.340","7":"0.83792","8":"0.19249","9":"0.64035","10":"0.32461","11":"0.31880","12":"0.06786","13":"1.87031"},{"1":"Congo (Brazzaville)","2":"Sub-Saharan Africa","3":"127","4":"4.236","5":"4.107","6":"4.365","7":"0.77109","8":"0.47799","9":"0.28212","10":"0.37938","11":"0.09753","12":"0.12077","13":"2.10681"},{"1":"Senegal","2":"Sub-Saharan Africa","3":"128","4":"4.219","5":"4.151","6":"4.287","7":"0.44314","8":"0.77416","9":"0.40457","10":"0.31056","11":"0.11681","12":"0.19103","13":"1.97861"},{"1":"Bulgaria","2":"Central and Eastern Europe","3":"129","4":"4.217","5":"4.104","6":"4.330","7":"1.11306","8":"0.92542","9":"0.67806","10":"0.21219","11":"0.00615","12":"0.12793","13":"1.15377"},{"1":"Mauritania","2":"Sub-Saharan Africa","3":"130","4":"4.201","5":"4.127","6":"4.275","7":"0.61391","8":"0.84142","9":"0.28639","10":"0.12680","11":"0.17955","12":"0.22686","13":"1.92630"},{"1":"Zimbabwe","2":"Sub-Saharan Africa","3":"131","4":"4.193","5":"4.101","6":"4.285","7":"0.35041","8":"0.71478","9":"0.15950","10":"0.25429","11":"0.08582","12":"0.18503","13":"2.44270"},{"1":"Malawi","2":"Sub-Saharan Africa","3":"132","4":"4.156","5":"4.041","6":"4.271","7":"0.08709","8":"0.14700","9":"0.29364","10":"0.41430","11":"0.07564","12":"0.30968","13":"2.82859"},{"1":"Sudan","2":"Sub-Saharan Africa","3":"133","4":"4.139","5":"3.928","6":"4.350","7":"0.63069","8":"0.81928","9":"0.29759","10":"0.00000","11":"0.10039","12":"0.18077","13":"2.10995"},{"1":"Gabon","2":"Sub-Saharan Africa","3":"134","4":"4.121","5":"4.030","6":"4.212","7":"1.15851","8":"0.72368","9":"0.34940","10":"0.28098","11":"0.09314","12":"0.06244","13":"1.45332"},{"1":"Mali","2":"Sub-Saharan Africa","3":"135","4":"4.073","5":"3.988","6":"4.158","7":"0.31292","8":"0.86333","9":"0.16347","10":"0.27544","11":"0.13647","12":"0.21064","13":"2.11087"},{"1":"Haiti","2":"Latin America and Caribbean","3":"136","4":"4.028","5":"3.893","6":"4.163","7":"0.34097","8":"0.29561","9":"0.27494","10":"0.12072","11":"0.14476","12":"0.47958","13":"2.37116"},{"1":"Botswana","2":"Sub-Saharan Africa","3":"137","4":"3.974","5":"3.875","6":"4.073","7":"1.09426","8":"0.89186","9":"0.34752","10":"0.44089","11":"0.10769","12":"0.12425","13":"0.96741"},{"1":"Comoros","2":"Sub-Saharan Africa","3":"138","4":"3.956","5":"3.860","6":"4.052","7":"0.27509","8":"0.60323","9":"0.29981","10":"0.15412","11":"0.18437","12":"0.18270","13":"2.25632"},{"1":"Ivory Coast","2":"Sub-Saharan Africa","3":"139","4":"3.916","5":"3.826","6":"4.006","7":"0.55507","8":"0.57576","9":"0.04476","10":"0.40663","11":"0.15530","12":"0.20338","13":"1.97478"},{"1":"Cambodia","2":"Southeastern Asia","3":"140","4":"3.907","5":"3.798","6":"4.016","7":"0.55604","8":"0.53750","9":"0.42494","10":"0.58852","11":"0.08092","12":"0.40339","13":"1.31573"},{"1":"Angola","2":"Sub-Saharan Africa","3":"141","4":"3.866","5":"3.753","6":"3.979","7":"0.84731","8":"0.66366","9":"0.04991","10":"0.00589","11":"0.08434","12":"0.12071","13":"2.09459"},{"1":"Niger","2":"Sub-Saharan Africa","3":"142","4":"3.856","5":"3.781","6":"3.931","7":"0.13270","8":"0.60530","9":"0.26162","10":"0.38041","11":"0.17176","12":"0.20970","13":"2.09469"},{"1":"South Sudan","2":"Sub-Saharan Africa","3":"143","4":"3.832","5":"3.596","6":"4.068","7":"0.39394","8":"0.18519","9":"0.15781","10":"0.19662","11":"0.13015","12":"0.25899","13":"2.50929"},{"1":"Chad","2":"Sub-Saharan Africa","3":"144","4":"3.763","5":"3.672","6":"3.854","7":"0.42214","8":"0.63178","9":"0.03824","10":"0.12807","11":"0.04952","12":"0.18667","13":"2.30637"},{"1":"Burkina Faso","2":"Sub-Saharan Africa","3":"145","4":"3.739","5":"3.647","6":"3.831","7":"0.31995","8":"0.63054","9":"0.21297","10":"0.33370","11":"0.12533","12":"0.24353","13":"1.87319"},{"1":"Uganda","2":"Sub-Saharan Africa","3":"145","4":"3.739","5":"3.629","6":"3.849","7":"0.34719","8":"0.90981","9":"0.19625","10":"0.43653","11":"0.06442","12":"0.27102","13":"1.51416"},{"1":"Yemen","2":"Middle East and Northern Africa","3":"147","4":"3.724","5":"3.621","6":"3.827","7":"0.57939","8":"0.47493","9":"0.31048","10":"0.22870","11":"0.05892","12":"0.09821","13":"1.97295"},{"1":"Madagascar","2":"Sub-Saharan Africa","3":"148","4":"3.695","5":"3.621","6":"3.769","7":"0.27954","8":"0.46115","9":"0.37109","10":"0.13684","11":"0.07506","12":"0.22040","13":"2.15075"},{"1":"Tanzania","2":"Sub-Saharan Africa","3":"149","4":"3.666","5":"3.561","6":"3.771","7":"0.47155","8":"0.77623","9":"0.35700","10":"0.31760","11":"0.05099","12":"0.31472","13":"1.37769"},{"1":"Liberia","2":"Sub-Saharan Africa","3":"150","4":"3.622","5":"3.463","6":"3.781","7":"0.10706","8":"0.50353","9":"0.23165","10":"0.25748","11":"0.04852","12":"0.24063","13":"2.23284"},{"1":"Guinea","2":"Sub-Saharan Africa","3":"151","4":"3.607","5":"3.533","6":"3.681","7":"0.22415","8":"0.31090","9":"0.18829","10":"0.30953","11":"0.11920","12":"0.29914","13":"2.15604"},{"1":"Rwanda","2":"Sub-Saharan Africa","3":"152","4":"3.515","5":"3.444","6":"3.586","7":"0.32846","8":"0.61586","9":"0.31865","10":"0.54320","11":"0.50521","12":"0.23552","13":"0.96819"},{"1":"Benin","2":"Sub-Saharan Africa","3":"153","4":"3.484","5":"3.404","6":"3.564","7":"0.39499","8":"0.10419","9":"0.21028","10":"0.39747","11":"0.06681","12":"0.20180","13":"2.10812"},{"1":"Afghanistan","2":"Southern Asia","3":"154","4":"3.360","5":"3.288","6":"3.432","7":"0.38227","8":"0.11037","9":"0.17344","10":"0.16430","11":"0.07112","12":"0.31268","13":"2.14558"},{"1":"Togo","2":"Sub-Saharan Africa","3":"155","4":"3.303","5":"3.192","6":"3.414","7":"0.28123","8":"0.00000","9":"0.24811","10":"0.34678","11":"0.11587","12":"0.17517","13":"2.13540"},{"1":"Syria","2":"Middle East and Northern Africa","3":"156","4":"3.069","5":"2.936","6":"3.202","7":"0.74719","8":"0.14866","9":"0.62994","10":"0.06912","11":"0.17233","12":"0.48397","13":"0.81789"},{"1":"Burundi","2":"Sub-Saharan Africa","3":"157","4":"2.905","5":"2.732","6":"3.078","7":"0.06831","8":"0.23442","9":"0.15747","10":"0.04320","11":"0.09419","12":"0.20290","13":"2.10404"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div id="exploratory-data-analysis" class="section level2">
<h2>Exploratory Data Analysis</h2>
<p>The dataset contains NA values, however there are a few examples where a field’s contribution to happiness is 0.0. This is likely a side effect of having a modeled rather than purely gathered dataset. One possibility is that if a country ranked the lowest for that particular characteristic it was simply zeroed out.</p>
<p>Happiness_Score is the summation of Economy_GDP_per_Capita, Family, Health_Life_Expectancy, Freedom, Trust_Government_Corruption, Generosity, and Dystopia_Residual within a margin of error between the confidence intervals.</p>
<p>Other than Country, Region, and Happiness Rank, all of the variables are continuous floating point.</p>
<pre class="r"><code>whrx &lt;- select(whr, -c(Happiness.Rank,Lower.Confidence.Interval,Upper.Confidence.Interval ))</code></pre>
<p>Here we removed Happieness Rank, and the Confidence Intervals because these are just noise in the data w.r.t the modeling we will be doing. Rank could easily be added back in through a simple sort enumeration, and the CIs do not really add a tremendous amount of additional information passed Happiness.Score.</p>
<pre class="r"><code>colo&lt;- colorRampPalette(c(&quot;blue&quot;, &quot;white&quot;, &quot;red&quot;))(200)
corrplot::corrplot(cor(data.matrix(whrx)), col=colo, tl.col = &quot;black&quot;)</code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-4-1.png" width="768" /></p>
<pre class="r"><code>whrx.num &lt;- data.matrix(select(whrx, -c(Country, Region)))
whrx.scale &lt;- as.data.frame(scale(whrx.num))</code></pre>
<p>Exclude Country and Region from the scaling process since they are non-numerics</p>
<pre class="r"><code>row.names(whrx.scale) &lt;- whrx$Country
colnames(whrx.scale)&lt;-gsub(&#39;\\.$&#39;,&#39;&#39;,colnames(whrx.scale))</code></pre>
<p>Set the row names to be each Country’s name so that they may be labeled during plotting. Strip out the end <code>.</code> because it’s odd to have</p>
</div>
<div id="models" class="section level2">
<h2>Models</h2>
<pre class="r"><code>triplot &lt;- function(orgin_data, cluster_data){
  p1 &lt;- fviz_cluster(list(data = orgin_data, cluster = cluster_data), repel = TRUE)
  
  p2 &lt;- orgin_data %&gt;% as_tibble() %&gt;% 
  mutate(cluster=cluster_data, Country=row.names(.)) %&gt;% 
  ggplot(aes(x=Economy..GDP.per.Capita, 
             y=Trust..Government.Corruption, 
             color=factor(cluster), 
             label=Country)) +
  geom_text()
  
  p3 &lt;- orgin_data %&gt;% as_tibble() %&gt;% 
  mutate(cluster=cluster_data) %&gt;% 
  ggplot(aes(x=cluster, 
             y=Economy..GDP.per.Capita,
             fill=as.factor(cluster))) +
  geom_boxplot(outlier.colour=&quot;red&quot;, aes(group=cluster)) + 
  stat_summary(fun.y=mean, geom=&quot;point&quot;, shape=9, size=4) +
  ggtitle(&quot;Cluster groups by GDP per Capitia&quot;)
  
  print(p1)
  print(p2)
  print(p3)
  
}</code></pre>
<p>Cluster plotting helper function</p>
<div id="k-means-clustering" class="section level3">
<h3>K-Means Clustering</h3>
<pre class="r"><code>whrx.km &lt;- kmeans(whrx.scale,3) # Limit to 3 cluster groups</code></pre>
<pre class="r"><code>whrx.dist &lt;- get_dist(whrx.scale, method = &quot;euclidean&quot;)
fviz_dist(whrx.dist, gradient = list(low = &quot;#00AFBB&quot;, mid = &quot;white&quot;, high = &quot;#FC4E07&quot;))</code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-9-1.png" width="768" /> A plot showing the eudclidean distance between countries shows some fairly distinct groups forming</p>
<pre class="r"><code>fviz_cluster(whrx.km, data = whrx.scale, repel = TRUE)</code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-10-1.png" width="768" /> Cluster plot shows the best overall clustering through kmeans, but provides little by way of interpretability</p>
<pre class="r"><code>(whrx.km.grps &lt;- aggregate(whrx.scale,by=list(whrx.km$cluster),FUN=mean)) </code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["Group.1"],"name":[1],"type":["int"],"align":["right"]},{"label":["Happiness.Score"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Economy..GDP.per.Capita"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["Family"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["Health..Life.Expectancy"],"name":[5],"type":["dbl"],"align":["right"]},{"label":["Freedom"],"name":[6],"type":["dbl"],"align":["right"]},{"label":["Trust..Government.Corruption"],"name":[7],"type":["dbl"],"align":["right"]},{"label":["Generosity"],"name":[8],"type":["dbl"],"align":["right"]},{"label":["Dystopia.Residual"],"name":[9],"type":["dbl"],"align":["right"]}],"data":[{"1":"1","2":"1.310934","3":"1.1367398","4":"0.9400652","5":"0.9898829","6":"1.0688991","7":"1.28907262","8":"0.7345302","9":"0.28211623"},{"1":"2","2":"0.114582","3":"0.2565889","4":"0.2352061","5":"0.3047269","6":"-0.1525134","7":"-0.47679427","8":"-0.3947824","9":"0.03742214"},{"1":"3","2":"-1.108737","3":"-1.2314391","4":"-1.0578993","5":"-1.2119495","6":"-0.4816568","7":"-0.07790384","8":"0.1670184","9":"-0.26052324"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<pre class="r"><code>#(whrx.km.grps &lt;- whrx.scale %&gt;% group_by(whrx.km$cluster) %&gt;% summarise_all(mean)) # Provides an equivalent result</code></pre>
<pre class="r"><code>whrx.scale %&gt;% 
  as_tibble() %&gt;% 
  mutate(cluster=whrx.km$cluster, Country=row.names(.)) %&gt;% 
  ggplot(aes(x=Economy..GDP.per.Capita, 
             y=Trust..Government.Corruption, 
             color=factor(cluster), 
             label=Country)) +
  geom_text()</code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-12-1.png" width="768" /> This plot lacks some of the bells and whistles of the previous plot, but now we are plotting against Corruption and GDP per Capita, allowing for a much greater degree of interpretability.</p>
<pre class="r"><code>whrx.scale %&gt;% 
  as_tibble() %&gt;% 
  mutate(cluster=whrx.km$cluster) %&gt;% 
  ggplot(aes(x=cluster, 
             y=Economy..GDP.per.Capita,
             fill=as.factor(cluster))) +
  geom_boxplot(notch=TRUE, outlier.colour=&quot;red&quot;, aes(group=cluster)) + 
  stat_summary(fun.y=mean, geom=&quot;point&quot;, shape=9, size=4) +
  ggtitle(&quot;Cluster groups by GDP per Capitia&quot;)</code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-13-1.png" width="672" /> looking at the boxplots we see that cluster.1 has a fair amount of outliers and a small dispersion. It also shows that the clustering algorthim was at least somewhat successful given that if two boxes’ notches do not overlap there is ‘strong evidence’ (95% confidence) their medians differ. Citation - <a href="https://sites.google.com/site/davidsstatistics/home/notched-box-plots">“Comparing Data Distributions.”</a></p>
</div>
<div id="agglomorative-clustering" class="section level3">
<h3>Agglomorative Clustering</h3>
<pre class="r"><code># Ward Hierarchical Clustering
whrx.ac &lt;- hclust(whrx.dist, method=&quot;ward.D2&quot;) 
ctree &lt;- cutree(whrx.ac, k=3)

# use ape package to make phylogram 
plot(as.phylo(whrx.ac),
     type=&quot;fan&quot;, 
     label.offset = 0.5, 
     cex = 0.8,
     tip.color = c(&quot;red3&quot;, &quot;blue3&quot;, &quot;green3&quot;)[ctree]) </code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-14-1.png" width="864" /></p>
<pre class="r"><code>triplot(whrx.scale, ctree)</code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-15-1.png" width="768" /><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-15-2.png" width="768" /><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-15-3.png" width="768" /></p>
<pre class="r"><code>fviz_nbclust(whrx.scale, FUN = hcut, method = &quot;wss&quot;) # elbow method</code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<pre class="r"><code>fviz_nbclust(whrx.scale, FUN = hcut, method = &quot;silhouette&quot;) # average silhouette method</code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-16-2.png" width="672" /> <strong>Elbow method</strong> - The total within-cluster sum of square (wss) measures the compactness of the clustering and we want it to be as small as possible. The optimal number of clusters appears as the bend in the “elbow”.</p>
<p><strong>Silhoutte method</strong> - determines how well each object lies within its cluster. A high average silhouette width indicates a good clustering.</p>
<p>These plots indicate that 4 clusters seems to be the optimial number to best segment the data</p>
<pre class="r"><code>library(NbClust)</code></pre>
<pre class="r"><code>res &lt;- NbClust(whrx.scale, distance = &quot;euclidean&quot;, 
        min.nc=2, max.nc=6, 
        method = &quot;ward.D2&quot;, index = &quot;kl&quot;)

fviz_cluster(list(data = whrx.scale, cluster = res$Best.partition), repel = TRUE)</code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
</div>
<div id="affinity-propagation" class="section level3">
<h3>Affinity Propagation</h3>
<pre class="r"><code>whrx.ap &lt;- apcluster(negDistMat(r=6),whrx.scale, details=TRUE)
whrx.apl &lt;- apclusterL(s=negDistMat(r=2), x=whrx.scale, frac=0.05, sweeps=15)
#str(whrx.ap)</code></pre>
<pre class="r"><code>apmelt &lt;- melt(whrx.ap@clusters)
triplot(whrx.scale[apmelt$value,], apmelt$L1)</code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-20-1.png" width="960" /><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-20-2.png" width="960" /><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-20-3.png" width="960" /></p>
<pre class="r"><code>aplmelt &lt;- melt(whrx.apl@clusters)
triplot(whrx.scale[aplmelt$value,], aplmelt$L1)</code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-21-1.png" width="960" /><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-21-2.png" width="960" /><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-21-3.png" width="960" /></p>
</div>
<div id="gaussian-mixture" class="section level3">
<h3>Gaussian Mixture</h3>
<pre class="r"><code>whrx.gm &lt;- whrx.scale %&gt;%  
  GMM(gaussian_comps = 3) %$% 
  predict_GMM(whrx.scale, CENTROIDS = centroids, COVARIANCE = covariance_matrices, WEIGHTS = weights)

whrx.gm$cluster_labels</code></pre>
<pre><code>##   [1] 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 1 2 2 2 1 2 2 1 1 1 1 2 2 2 1 2 2 1 1
##  [36] 2 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
##  [71] 1 1 1 1 2 0 1 1 0 1 1 1 1 0 0 1 1 1 1 0 1 0 1 1 1 1 0 1 1 0 1 0 0 1 0
## [106] 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0
## [141] 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0</code></pre>
<pre class="r"><code>triplot(whrx.scale, whrx.gm$cluster_labels)</code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-23-1.png" width="768" /><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-23-2.png" width="768" /><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-23-3.png" width="768" /></p>
</div>
<div id="dbscan" class="section level3">
<h3>DBSCAN</h3>
<p>Density-Based Spatial Clustering of Applications with Noise. Finds core samples of high density and expands clusters from them.</p>
<pre class="r"><code>whrx.dbs &lt;- dbscan(whrx.scale, 1.2, minPts = 5)
unique(whrx.dbs$cluster)</code></pre>
<pre><code>## [1] 1 0 2 3</code></pre>
<pre class="r"><code>triplot(whrx.scale, whrx.dbs$cluster)</code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-25-1.png" width="768" /><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-25-2.png" width="768" /><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-25-3.png" width="768" /> ### HDBSCAN</p>
<p>Hierarchical Density-Based Spatial Clustering of Applications with Noise. It extends DBSCAN by converting it into a hierarchical clustering algorithm, and then using a technique to extract a flat clustering based in the stability of clusters.</p>
<pre class="r"><code>whrx.hdb &lt;- hdbscan(whrx.scale, 5)
unique(whrx.hdb$cluster)</code></pre>
<pre><code>## [1] 4 0 3 2 1</code></pre>
<pre class="r"><code>triplot(whrx.scale, whrx.hdb$cluster)</code></pre>
<p><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-27-1.png" width="768" /><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-27-2.png" width="768" /><img src="/assets/images/rimgs/2018-12-26-clustering-kmean-gmm-ap-whr_files/figure-html/unnamed-chunk-27-3.png" width="768" /></p>
</div>
</div>
<div id="conclusions" class="section level2">
<h2>Conclusions</h2>
<p>This notebook explored the World Happiness Dataset using a total of 6 models:<br />
K-means, Agglomerative Clustering, Affinity Propagation, Gaussian Mixture, DBSCAN, and HDBSCAN.</p>
<p>The was a somewhat significant degree of variation between the examined models, but those that were not prescribed a certain number of clusters arrived at a 9 or 10 groups. With this many groupings, however, it became much more difficult to see exactly how a model was making clustering decisions.</p>
<p>For the models which we assigned a group count of 3, K-means, Agglomerative Clustering, and Gaussian Mixture, two diagonal or vertical lines could nearly be drawn between decision boundaries by way of GDP considerations.</p>
<p>Only one version of one model failed to perform at all, that was DBSCAN with scaled data, the rest found some form of suitable clustering. However, the Boxplots showed that when models were given free reign over the number of clusters, they tend to have one cluster serve to explain a large range of values and another to explain an extremely tightly grouped set with many outliers.</p>
<div id="future-work" class="section level4">
<h4>Future work</h4>
<p>One thought that was left untested was looking to see if the previous model’s metrics in anyway influenced successive models. Since a new column was appended to the dataset and not removed, there is indeed a possibility of this happening. A good deal more EDA could be done on this dataset by looking at relationships between variables in a market basic analysis fashion. As always, there are many different hyperparamaters that could still be experimented with, as well as other clustering models like Spectral, Ward, and MeanShift that might yield interesting results. Additionally, and perhaps most poignantly, only <code>Economy..GDP.per.Capita</code> and <code>Trust..Government.Corruption</code> were explored, the rest were left untouched, thus leaving a significant portion of the data not truly explored to its fullest.</p>
</div>
<div id="references" class="section level3">
<h3>References</h3>
<div id="code" class="section level4">
<h4>Code</h4>
<p><a href="https://www.statmethods.net/advstats/cluster.html" class="uri">https://www.statmethods.net/advstats/cluster.html</a></p>
<p><a href="https://uc-r.github.io/kmeans_clustering" class="uri">https://uc-r.github.io/kmeans_clustering</a></p>
<p><a href="http://www.sthda.com/english/wiki/ggplot2-box-plot-quick-start-guide-r-software-and-data-visualization" class="uri">http://www.sthda.com/english/wiki/ggplot2-box-plot-quick-start-guide-r-software-and-data-visualization</a></p>
<p><a href="http://www.sthda.com/english/wiki/beautiful-dendrogram-visualizations-in-r-5-must-known-methods-unsupervised-machine-learning" class="uri">http://www.sthda.com/english/wiki/beautiful-dendrogram-visualizations-in-r-5-must-known-methods-unsupervised-machine-learning</a></p>
<p><a href="https://uc-r.github.io/hc_clustering" class="uri">https://uc-r.github.io/hc_clustering</a></p>
</div>
<div id="text" class="section level4">
<h4>Text</h4>
<p><a href="https://www.kaggle.com/unsdsn/world-happiness#2016.csv" class="uri">https://www.kaggle.com/unsdsn/world-happiness#2016.csv</a></p>
<p><a href="https://sites.google.com/site/davidsstatistics/home/notched-box-plots" class="uri">https://sites.google.com/site/davidsstatistics/home/notched-box-plots</a></p>
<p><a href="https://scikit-learn.org/stable/modules/clustering.html" class="uri">https://scikit-learn.org/stable/modules/clustering.html</a></p>
<p><a href="https://uc-r.github.io/kmeans_clustering#elbow" class="uri">https://uc-r.github.io/kmeans_clustering#elbow</a></p>
</div>
<div id="other" class="section level4">
<h4>Other</h4>
<p><a href="https://r4ds.had.co.nz/transform.html#grouped-summaries-with-summarise" class="uri">https://r4ds.had.co.nz/transform.html#grouped-summaries-with-summarise</a></p>
<p><a href="https://sashat.me/2017/01/11/list-of-20-simple-distinct-colors/" class="uri">https://sashat.me/2017/01/11/list-of-20-simple-distinct-colors/</a></p>
<p><a href="http://sape.inf.usi.ch/quick-reference/ggplot2/colour" class="uri">http://sape.inf.usi.ch/quick-reference/ggplot2/colour</a></p>
<p><a href="https://cran.r-project.org/web/packages/ClusterR/ClusterR.pdf" class="uri">https://cran.r-project.org/web/packages/ClusterR/ClusterR.pdf</a></p>
</div>
</div>
</div>