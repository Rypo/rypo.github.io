---
title: Clustering on the World Happiness Report 2019
# permalink: /python/clustering-whr2019
slug: clustering-whr2019
excerpt: Attempting to quantify happiness. Building clustering models on the 2019
  World happiness report.
collection: python
categories:
- python
- multimodel
- EDA
tags:
- python
- happiness
- clustering
- GMM
- KMeans
- AffinityPropagation
- Agglomerative
# layout: single-jnb
classes: 
- jp-Notebook
author: Ryan Gust
date: '2018-11-11'
last_modified_at: '2019-05-18'
header:
  teaser: assets/images/teasers/thumbs/happiness_index_report.png
counterpart: 2018-12-26-clustering-kmean-gmm-ap-whr
thumbnailsrc: https://bulawayo24.com/index-id-news-sc-national-byo-158715.html
---
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Overview">Overview<a class="anchor-link" href="#Overview">¶</a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>This analysis attempts to group together countries based on nothing more than the professed happiness of its citizens. To do so, we will be using data from the <a href="https://worldhappiness.report/ed/2019/#read">2019 World Happiness Report</a> to build several clustering models. The primary models discussed in this analysis are:</p>
<ul>
<li>K-means</li>
<li>Agglomerative Clustering</li>
<li>Affinity Propagation</li>
<li>Gaussian Mixture</li>
</ul>
<p>Additionally, these models will be briefly demonstrated:</p>
<ul>
<li>DBSCAN</li>
<li>HDBSCAN</li>
</ul>
<p>Each model will be visualized in 3 different forms:</p>
<ul>
<li>A scatter plot, box plot and violin plot</li>
</ul>
<p>Glossary:</p>
<ul>
<li>WHR - World Happiness Report</li>
<li>GWP - Gallup World Poll</li>
<li>WVS - World Value Surveys</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Imports">Imports<a class="anchor-link" href="#Imports">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>    
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span><span class="p">;</span> <span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>

<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span> 
<span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">KMeans</span><span class="p">,</span> <span class="n">AgglomerativeClustering</span><span class="p">,</span> <span class="n">AffinityPropagation</span><span class="p">,</span> <span class="n">DBSCAN</span>
<span class="kn">from</span> <span class="nn">sklearn.mixture</span> <span class="kn">import</span> <span class="n">GaussianMixture</span> 

<span class="kn">import</span> <span class="nn">hdbscan</span>

<span class="c1"># To use this experimental feature, we need to explicitly ask for it:</span>
<span class="kn">from</span> <span class="nn">sklearn.experimental</span> <span class="kn">import</span> <span class="n">enable_iterative_imputer</span>  <span class="c1"># noqa</span>
<span class="kn">from</span> <span class="nn">sklearn.impute</span> <span class="kn">import</span> <span class="n">IterativeImputer</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">BayesianRidge</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsRegressor</span>

<span class="kn">from</span> <span class="nn">sklearn.metrics.cluster</span> <span class="kn">import</span> <span class="n">silhouette_score</span><span class="p">,</span> <span class="n">silhouette_samples</span><span class="p">,</span> <span class="n">calinski_harabasz_score</span><span class="p">,</span> <span class="n">davies_bouldin_score</span>
<span class="kn">from</span> <span class="nn">yellowbrick.cluster</span> <span class="kn">import</span> <span class="n">KElbowVisualizer</span><span class="p">,</span> <span class="n">SilhouetteVisualizer</span><span class="p">,</span> <span class="n">InterclusterDistance</span>

<span class="kn">import</span> <span class="nn">geopandas</span>

<span class="c1">#import plotly.plotly as py</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="k">as</span> <span class="nn">go</span>
<span class="kn">import</span> <span class="nn">plotly.io</span> <span class="k">as</span> <span class="nn">pio</span>
<span class="kn">from</span> <span class="nn">plotly.offline</span> <span class="kn">import</span> <span class="n">download_plotlyjs</span><span class="p">,</span> <span class="n">init_notebook_mode</span><span class="p">,</span> <span class="n">plot</span><span class="p">,</span> <span class="n">iplot</span>
<span class="n">init_notebook_mode</span><span class="p">(</span><span class="n">connected</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html">
{% raw %}
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax) {MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-latest.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>
{% endraw %}
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">RS</span> <span class="o">=</span> <span class="mi">404</span> <span class="c1"># Random state/seed</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s2">"display.max_columns"</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span> <span class="c1"># Increase columns shown</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Data">Data<a class="anchor-link" href="#Data">¶</a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The 2019 World Happiness Report dataset may be obtained from</p>
<p><a href="https://s3.amazonaws.com/happiness-report/2019/Chapter2OnlineData.xls">https://s3.amazonaws.com/happiness-report/2019/Chapter2OnlineData.xls</a></p>
<p>The World Happiness Report is a landmark survey of the state of global happiness that ranks 156 countries by how happy their citizens perceive themselves to be. This year’s World Happiness Report focuses on happiness and the community: how happiness has evolved over the past dozen years, with a focus on the technologies, social norms, conflicts and government policies that have driven those changes.</p>
<p>It has 2 descriptor/ID variables (Country,Year), one response (Life Ladder), six proposed determinants of the response, and several additional variable that were either calculated or gather from external sources.</p>
<ul>
<li><code>Country</code> - Name of the country.</li>
<li><code>Year</code> - Year of data collection.</li>
<li><code>Life Ladder</code> - <em>(survey,0-10)</em> Cantril Life Ladder/Happiness score/subjective well-being. The national average response to the following question:<ul>
<li>"Please imagine a ladder, with steps numbered from 0 at the bottom to 10 at the top. The top of the ladder represents the best possible life for you and the bottom of the ladder represents the worst possible life for you. On which step of the ladder would you say you personally feel you stand at this time?"</li>
</ul>
</li>
</ul>
<p><strong>Six Hypothesized Underlying Determinants</strong>:</p>
<ul>
<li><code>Log_GDP</code> - <em>(calculated-normalized,external)</em>, Log GDP per capita in purchasing power parity. Constant 2011 international dollar prices from World Development Indicators (November 14, 2018)</li>
<li><code>Life_Expectancy</code> - <em>(partial-interpolated,external)</em>, Healthy life expectancies at birth are based on the data extracted from the World Health Organization's Global Health Observatory data repository</li>
<li><code>Social_support</code> - <em>(survey,binary)</em> National average response to:<ul>
<li>"If you were in trouble, do you have relatives or friends you can count on to help you whenever you need them, or not?"</li>
</ul>
</li>
<li><code>Freedom</code> - <em>(survey,binary)</em>, National average response to:<ul>
<li>"Are you satisfied or dissatisfied with your freedom to choose what you do with your life?"</li>
</ul>
</li>
<li><code>Generosity</code> - <em>(survey,binary,calculated-residual)</em> is the residual of regressing national average of response to:<ul>
<li>"Have you donated money to a charity in the past month?" on GDP per capita.</li>
</ul>
</li>
<li><code>Corruption_Perception</code> - <em>(survey,2x-binary)</em>, National average response to two questions:<ul>
<li>"Is corruption widespread throughout the government or not"</li>
<li>"Is corruption widespread within businesses or not?"</li>
</ul>
</li>
</ul>
<p><strong>Additional inclusions</strong>:</p>
<ul>
<li><p><code>Positive affect</code> - <em>(survey,3x-binary)</em>, Average of three GWP positive affect measures (waves 3-7): happiness, laugh and enjoyment in Gallup World Poll(waves 3-7). Responses to the following three questions, respectively:</p>
<ul>
<li>"Did you experience the following feelings during A LOT OF THE DAY yesterday? How about Happiness?",</li>
<li>"Did you smile or laugh a lot yesterday?"</li>
<li>"Did you experience the following feelings during A LOT OF THE DAY yesterday? How about Enjoyment?"</li>
</ul>
</li>
<li><p><code>Negative affect</code> - <em>(survey,3x-binary)</em>, Average of three GWP negative affect measures: worry, sadness and anger in  Responses to the following three questions, respectively:</p>
<ul>
<li>"Did you experience the following feelings during A LOT OF THE DAY yesterday? How about Worry?",</li>
<li>"Did you experience the following feelings during A LOT OF THE DAY yesterday? How about Sadness?"</li>
<li>"Did you experience the following feelings during A LOT OF THE DAY yesterday? How about Anger?"</li>
</ul>
</li>
<li><p>"giniLadder" - <em>(multi,calculated-metastat)</em>, Inequality/distribution statistics of happiness scores by WP5-year from the GWP release.  WP5 is GWP's coding of countries, including some sub-country territories.</p>
<ul>
<li><code>sdLadder</code> Standard deviation of ladder by country-year</li>
<li><code>cvLadder</code> Standard deviation/Mean of ladder by country-year</li>
</ul>
</li>
<li><p><code>giniIncGallup</code> - <em>(calculated-normalized,external)</em>,  Household Income International Dollars. Income variables are created by converting local currency to International Dollars (ID) using purchasing power parity (PPP) ratios.</p>
</li>
<li><p><code>giniIncWB</code> - <em>(partial,external)</em>, Unbalanced panel of yearly index. Data are based on primary household survey data obtained from government statistical agencies and World Bank country departments</p>
</li>
<li><p><code>giniIncWBavg</code> - <em>(calculated,external)</em>, the average of <code>giniIncWB</code> in the period 2000-2016. Most countries are missing some gini index period data.</p>
</li>
<li><p><code>Confidence_natGovt</code> - <em>(survey,binary,external)</em>, citizens' confidence in key institutions (WP139) Response to:</p>
<ul>
<li>"Do you have confidence in each of the following, or not? How about the national government?"</li>
</ul>
</li>
<li><p>"WGI indicators of governance quality" - <em>(survey, amalgam, calculated, external)</em>, based on over 30 individual data sources produced by a variety of survey institutes, think tanks, non-governmental organizations, international organizations, and private sector firms, enterprise, citizen and expert survey respondents.</p>
<ul>
<li><code>Democratic Quality</code> - average "Voice and Accountability" and "Political Stability and Absence of Violence"</li>
<li><code>Delivery Quality</code> -  average "Government Effectiveness", "Regulatory Quality", "Rule of Law", "Control of Corruption"</li>
</ul>
</li>
</ul>
<p><strong>Expanded data</strong>:</p>
<ul>
<li><code>trust_Gallup</code> and <code>trust_WVS*</code> - <em>(survey,binary)</em>, Percentage of respondents with positive-trust response to:<ul>
<li>"Generally speaking, would you say that most people can be trusted or that you [have,need] to be [very] careful in dealing with people?"</li>
</ul>
</li>
</ul>
<p>Primary definitions:<br/>
<a href="https://s3.amazonaws.com/happiness-report/2019/WHR19_Ch2A_Appendix1.pdf">https://s3.amazonaws.com/happiness-report/2019/WHR19_Ch2A_Appendix1.pdf</a></p>
<p>Definitions (Democratic Quality, Delivery Quality, Confidence_natGovt):<br/>
<a href="https://s3.amazonaws.com/happiness-report/2019/WHR19_Ch2A_Appendix2.pdf">https://s3.amazonaws.com/happiness-report/2019/WHR19_Ch2A_Appendix2.pdf</a></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">whr</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">'data/WHR2019.xls'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#whr = pd.read_csv('data/happiness_2016.csv')</span>
<span class="n">whr</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>Index(['Country name', 'Year', 'Life Ladder', 'Log GDP per capita',
       'Social support', 'Healthy life expectancy at birth',
       'Freedom to make life choices', 'Generosity',
       'Perceptions of corruption', 'Positive affect', 'Negative affect',
       'Confidence in national government', 'Democratic Quality',
       'Delivery Quality', 'Standard deviation of ladder by country-year',
       'Standard deviation/Mean of ladder by country-year',
       'GINI index (World Bank estimate)',
       'GINI index (World Bank estimate), average 2000-16',
       'gini of household income reported in Gallup, by wp5-year',
       'Most people can be trusted, Gallup',
       'Most people can be trusted, WVS round 1981-1984',
       'Most people can be trusted, WVS round 1989-1993',
       'Most people can be trusted, WVS round 1994-1998',
       'Most people can be trusted, WVS round 1999-2004',
       'Most people can be trusted, WVS round 2005-2009',
       'Most people can be trusted, WVS round 2010-2014'],
      dtype='object')</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Shortened and cleaned names, most are derived from WHR2019 paper</span>
<span class="n">full_colnames</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'Country'</span><span class="p">,</span> <span class="s1">'Year'</span><span class="p">,</span> <span class="s1">'Life_Ladder'</span><span class="p">,</span> 
    <span class="s1">'Log_GDP'</span><span class="p">,</span><span class="s1">'Social_support'</span><span class="p">,</span> <span class="s1">'Life_Expectancy'</span><span class="p">,</span> <span class="s1">'Freedom'</span><span class="p">,</span> <span class="s1">'Generosity'</span><span class="p">,</span><span class="s1">'Corruption_Perception'</span><span class="p">,</span> 
    <span class="s1">'Positive_affect'</span><span class="p">,</span> <span class="s1">'Negative_affect'</span><span class="p">,</span>
    <span class="s1">'Confidence_natGovt'</span><span class="p">,</span> <span class="s1">'Democratic_Quality'</span><span class="p">,</span><span class="s1">'Delivery_Quality'</span><span class="p">,</span> 
    <span class="s1">'sdLadder'</span><span class="p">,</span><span class="s1">'cvLadder'</span><span class="p">,</span>
    <span class="s1">'giniIncWB'</span><span class="p">,</span><span class="s1">'giniIncWBavg'</span><span class="p">,</span><span class="s1">'giniIncGallup'</span><span class="p">,</span>
    <span class="s1">'trust_Gallup'</span><span class="p">,</span>
    <span class="s1">'trust_WVS81_84'</span><span class="p">,</span><span class="s1">'trust_WVS89_93'</span><span class="p">,</span><span class="s1">'trust_WVS94_98'</span><span class="p">,</span><span class="s1">'trust_WVS99_2004'</span><span class="p">,</span><span class="s1">'trust_WVS2005_09'</span><span class="p">,</span><span class="s1">'trust_WVS2010_14'</span>
<span class="p">]</span>
<span class="n">core_col</span> <span class="o">=</span> <span class="n">full_colnames</span><span class="p">[:</span><span class="mi">9</span><span class="p">]</span>
<span class="n">ext_col</span> <span class="o">=</span> <span class="n">full_colnames</span><span class="p">[:</span><span class="mi">14</span><span class="p">]</span> <span class="o">+</span> <span class="n">full_colnames</span><span class="p">[</span><span class="mi">17</span><span class="p">:</span><span class="mi">19</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">whr</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">full_colnames</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Shorten and Clean names for dot access</span>
<span class="n">whr</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">whr</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'Most people can be trusted'</span><span class="p">,</span><span class="s1">'trust_in_people'</span><span class="p">)</span>
<span class="n">whr</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">whr</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">' '</span><span class="p">,</span><span class="s1">'_'</span><span class="p">)</span>
<span class="n">whr</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">whr</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">'[(),]'</span><span class="p">,</span><span class="s1">''</span><span class="p">)</span> <span class="c1"># Strip parens and commas</span>
<span class="n">whr</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">whr</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="mi">0</span><span class="p">]]</span> <span class="c1"># HeadTail</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Country</th>
<th>Year</th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>sdLadder</th>
<th>cvLadder</th>
<th>giniIncWB</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
<th>trust_Gallup</th>
<th>trust_WVS81_84</th>
<th>trust_WVS89_93</th>
<th>trust_WVS94_98</th>
<th>trust_WVS99_2004</th>
<th>trust_WVS2005_09</th>
<th>trust_WVS2010_14</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>Afghanistan</td>
<td>2008</td>
<td>3.723590</td>
<td>7.168690</td>
<td>0.450662</td>
<td>50.799999</td>
<td>0.718114</td>
<td>0.177889</td>
<td>0.881686</td>
<td>0.517637</td>
<td>0.258195</td>
<td>0.612072</td>
<td>-1.929690</td>
<td>-1.655084</td>
<td>1.774662</td>
<td>0.476600</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>1</th>
<td>Afghanistan</td>
<td>2009</td>
<td>4.401778</td>
<td>7.333790</td>
<td>0.552308</td>
<td>51.200001</td>
<td>0.678896</td>
<td>0.200178</td>
<td>0.850035</td>
<td>0.583926</td>
<td>0.237092</td>
<td>0.611545</td>
<td>-2.044093</td>
<td>-1.635025</td>
<td>1.722688</td>
<td>0.391362</td>
<td>NaN</td>
<td>NaN</td>
<td>0.441906</td>
<td>0.286315</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>2</th>
<td>Afghanistan</td>
<td>2010</td>
<td>4.758381</td>
<td>7.386629</td>
<td>0.539075</td>
<td>51.599998</td>
<td>0.600127</td>
<td>0.134353</td>
<td>0.706766</td>
<td>0.618265</td>
<td>0.275324</td>
<td>0.299357</td>
<td>-1.991810</td>
<td>-1.617176</td>
<td>1.878622</td>
<td>0.394803</td>
<td>NaN</td>
<td>NaN</td>
<td>0.327318</td>
<td>0.275833</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>1701</th>
<td>Zimbabwe</td>
<td>2016</td>
<td>3.735400</td>
<td>7.538829</td>
<td>0.768425</td>
<td>54.400002</td>
<td>0.732971</td>
<td>-0.068105</td>
<td>0.723612</td>
<td>0.737636</td>
<td>0.208555</td>
<td>0.699344</td>
<td>-0.900649</td>
<td>-1.374650</td>
<td>2.776363</td>
<td>0.743257</td>
<td>NaN</td>
<td>0.432</td>
<td>0.596690</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.116683</td>
<td>NaN</td>
<td>0.082942</td>
</tr>
<tr>
<th>1702</th>
<td>Zimbabwe</td>
<td>2017</td>
<td>3.638300</td>
<td>7.549491</td>
<td>0.754147</td>
<td>55.000000</td>
<td>0.752826</td>
<td>-0.069670</td>
<td>0.751208</td>
<td>0.806428</td>
<td>0.224051</td>
<td>0.682647</td>
<td>-0.988153</td>
<td>-1.350867</td>
<td>2.656848</td>
<td>0.730244</td>
<td>NaN</td>
<td>0.432</td>
<td>0.581484</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.116683</td>
<td>NaN</td>
<td>0.082942</td>
</tr>
<tr>
<th>1703</th>
<td>Zimbabwe</td>
<td>2018</td>
<td>3.616480</td>
<td>7.553395</td>
<td>0.775388</td>
<td>55.599998</td>
<td>0.762675</td>
<td>-0.038384</td>
<td>0.844209</td>
<td>0.710119</td>
<td>0.211726</td>
<td>0.550508</td>
<td>NaN</td>
<td>NaN</td>
<td>2.498696</td>
<td>0.690919</td>
<td>NaN</td>
<td>0.432</td>
<td>0.541772</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.116683</td>
<td>NaN</td>
<td>0.082942</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Exploratory-Data-Analysis">Exploratory Data Analysis<a class="anchor-link" href="#Exploratory-Data-Analysis">¶</a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The dataset contains NA values, however there are a few examples where a field's contribution to happiness is 0.0. This is likely a side effect of having a modeled rather than purely gathered dataset. One possibility is that if a country ranked the lowest for that particular characteristic it was simply zeroed out.</p>
<p>Happiness_Score is the summation of Economy_GDP_per_Capita, Family, Health_Life_Expectancy, Freedom, Trust_Government_Corruption, Generosity, and Dystopia_Residual within a margin of error between the confidence intervals.</p>
<p>Other than Country, Region, and Happiness Rank, all of the variables are continuous floating point.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">whr</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain">
<pre>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 1704 entries, 0 to 1703
Data columns (total 26 columns):
Country                  1704 non-null object
Year                     1704 non-null int64
Life_Ladder              1704 non-null float64
Log_GDP                  1676 non-null float64
Social_support           1691 non-null float64
Life_Expectancy          1676 non-null float64
Freedom                  1675 non-null float64
Generosity               1622 non-null float64
Corruption_Perception    1608 non-null float64
Positive_affect          1685 non-null float64
Negative_affect          1691 non-null float64
Confidence_natGovt       1530 non-null float64
Democratic_Quality       1558 non-null float64
Delivery_Quality         1559 non-null float64
sdLadder                 1704 non-null float64
cvLadder                 1704 non-null float64
giniIncWB                643 non-null float64
giniIncWBavg             1502 non-null float64
giniIncGallup            1335 non-null float64
trust_Gallup             180 non-null float64
trust_WVS81_84           125 non-null float64
trust_WVS89_93           220 non-null float64
trust_WVS94_98           618 non-null float64
trust_WVS99_2004         491 non-null float64
trust_WVS2005_09         630 non-null float64
trust_WVS2010_14         671 non-null float64
dtypes: float64(24), int64(1), object(1)
memory usage: 346.2+ KB
</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">whr</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>Country                     0
Year                        0
Life_Ladder                 0
Log_GDP                    28
Social_support             13
Life_Expectancy            28
Freedom                    29
Generosity                 82
Corruption_Perception      96
Positive_affect            19
Negative_affect            13
Confidence_natGovt        174
Democratic_Quality        146
Delivery_Quality          145
sdLadder                    0
cvLadder                    0
giniIncWB                1061
giniIncWBavg              202
giniIncGallup             369
trust_Gallup             1524
trust_WVS81_84           1579
trust_WVS89_93           1484
trust_WVS94_98           1086
trust_WVS99_2004         1213
trust_WVS2005_09         1074
trust_WVS2010_14         1033
dtype: int64</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">whr</span><span class="p">[</span><span class="n">whr</span><span class="p">[</span><span class="n">core_col</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">shape</span> <span class="c1"># 188 entries have at least 1 missing value from the core attributes</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>(188, 26)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We can see a substantial portion of the values are missing, particularly in WVS reports of people's perceived trust in others.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">whr</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Year</th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>sdLadder</th>
<th>cvLadder</th>
<th>giniIncWB</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
<th>trust_Gallup</th>
<th>trust_WVS81_84</th>
<th>trust_WVS89_93</th>
<th>trust_WVS94_98</th>
<th>trust_WVS99_2004</th>
<th>trust_WVS2005_09</th>
<th>trust_WVS2010_14</th>
</tr>
</thead>
<tbody>
<tr>
<th>count</th>
<td>1704.000000</td>
<td>1704.000000</td>
<td>1676.000000</td>
<td>1691.000000</td>
<td>1676.000000</td>
<td>1675.000000</td>
<td>1622.000000</td>
<td>1608.000000</td>
<td>1685.000000</td>
<td>1691.000000</td>
<td>1530.000000</td>
<td>1558.000000</td>
<td>1559.000000</td>
<td>1704.000000</td>
<td>1704.000000</td>
<td>643.000000</td>
<td>1502.000000</td>
<td>1335.000000</td>
<td>180.000000</td>
<td>125.000000</td>
<td>220.000000</td>
<td>618.000000</td>
<td>491.000000</td>
<td>630.000000</td>
<td>671.000000</td>
</tr>
<tr>
<th>mean</th>
<td>2012.332160</td>
<td>5.437155</td>
<td>9.222456</td>
<td>0.810570</td>
<td>63.111971</td>
<td>0.733829</td>
<td>0.000079</td>
<td>0.751315</td>
<td>0.709368</td>
<td>0.265679</td>
<td>0.481973</td>
<td>-0.136053</td>
<td>-0.001390</td>
<td>2.026707</td>
<td>0.392121</td>
<td>0.370000</td>
<td>0.385438</td>
<td>0.447771</td>
<td>0.226295</td>
<td>0.390480</td>
<td>0.283925</td>
<td>0.249574</td>
<td>0.268070</td>
<td>0.264336</td>
<td>0.237493</td>
</tr>
<tr>
<th>std</th>
<td>3.688072</td>
<td>1.121149</td>
<td>1.185794</td>
<td>0.119210</td>
<td>7.583622</td>
<td>0.144115</td>
<td>0.163365</td>
<td>0.186074</td>
<td>0.107984</td>
<td>0.084707</td>
<td>0.192059</td>
<td>0.876074</td>
<td>0.975849</td>
<td>0.401484</td>
<td>0.124661</td>
<td>0.083232</td>
<td>0.082396</td>
<td>0.108505</td>
<td>0.119079</td>
<td>0.123309</td>
<td>0.113226</td>
<td>0.118126</td>
<td>0.145120</td>
<td>0.160169</td>
<td>0.157482</td>
</tr>
<tr>
<th>min</th>
<td>2005.000000</td>
<td>2.661718</td>
<td>6.457201</td>
<td>0.290184</td>
<td>32.299999</td>
<td>0.257534</td>
<td>-0.336385</td>
<td>0.035198</td>
<td>0.362498</td>
<td>0.083426</td>
<td>0.068769</td>
<td>-2.448228</td>
<td>-2.144974</td>
<td>0.863034</td>
<td>0.133908</td>
<td>0.240000</td>
<td>0.211000</td>
<td>0.200969</td>
<td>0.066618</td>
<td>0.176535</td>
<td>0.066020</td>
<td>0.048720</td>
<td>0.075872</td>
<td>0.038242</td>
<td>0.031518</td>
</tr>
<tr>
<th>25%</th>
<td>2009.000000</td>
<td>4.610970</td>
<td>8.304428</td>
<td>0.747512</td>
<td>58.299999</td>
<td>0.638436</td>
<td>-0.115534</td>
<td>0.696083</td>
<td>0.621855</td>
<td>0.205414</td>
<td>0.334735</td>
<td>-0.790461</td>
<td>-0.711416</td>
<td>1.743369</td>
<td>0.310139</td>
<td>0.305000</td>
<td>0.321429</td>
<td>0.368424</td>
<td>0.139773</td>
<td>0.290300</td>
<td>0.223553</td>
<td>0.176876</td>
<td>0.155833</td>
<td>0.144976</td>
<td>0.118725</td>
</tr>
<tr>
<th>50%</th>
<td>2012.000000</td>
<td>5.339557</td>
<td>9.406206</td>
<td>0.833098</td>
<td>65.000000</td>
<td>0.752731</td>
<td>-0.022080</td>
<td>0.805775</td>
<td>0.718541</td>
<td>0.254544</td>
<td>0.464109</td>
<td>-0.227386</td>
<td>-0.218633</td>
<td>1.973070</td>
<td>0.372744</td>
<td>0.352000</td>
<td>0.371000</td>
<td>0.426541</td>
<td>0.198450</td>
<td>0.380174</td>
<td>0.292383</td>
<td>0.229924</td>
<td>0.232000</td>
<td>0.198380</td>
<td>0.193531</td>
</tr>
<tr>
<th>75%</th>
<td>2015.000000</td>
<td>6.273522</td>
<td>10.193060</td>
<td>0.904432</td>
<td>68.300003</td>
<td>0.848155</td>
<td>0.093522</td>
<td>0.876458</td>
<td>0.801530</td>
<td>0.314896</td>
<td>0.614862</td>
<td>0.650468</td>
<td>0.699971</td>
<td>2.242300</td>
<td>0.456311</td>
<td>0.428000</td>
<td>0.432200</td>
<td>0.514803</td>
<td>0.281627</td>
<td>0.478149</td>
<td>0.341741</td>
<td>0.294242</td>
<td>0.385469</td>
<td>0.391370</td>
<td>0.335000</td>
</tr>
<tr>
<th>max</th>
<td>2018.000000</td>
<td>8.018934</td>
<td>11.770276</td>
<td>0.987343</td>
<td>76.800003</td>
<td>0.985178</td>
<td>0.677743</td>
<td>0.983276</td>
<td>0.943621</td>
<td>0.704590</td>
<td>0.993604</td>
<td>1.575009</td>
<td>2.184725</td>
<td>3.718958</td>
<td>1.022769</td>
<td>0.634000</td>
<td>0.626000</td>
<td>0.961435</td>
<td>0.640332</td>
<td>0.571719</td>
<td>0.594595</td>
<td>0.647737</td>
<td>0.637185</td>
<td>0.737305</td>
<td>0.661757</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Most of the data seems to be of a similar magnitude, with Ladder, Log GDP, and life expectancy being the largest exceptions</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
<span class="n">corrmat</span> <span class="o">=</span> <span class="n">whr</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">'Year'</span><span class="p">)</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span> <span class="c1"># Omit year</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corrmat</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_21_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">corrmat</span> <span class="o">=</span> <span class="n">whr</span><span class="p">[</span><span class="n">core_col</span><span class="p">]</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">'Year'</span><span class="p">)</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span> <span class="c1"># Omit year</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corrmat</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_22_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">corrmat</span> <span class="o">=</span> <span class="n">whr</span><span class="p">[</span><span class="n">ext_col</span><span class="p">]</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">'Year'</span><span class="p">)</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span> <span class="c1"># Omit year</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corrmat</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_23_0.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The upper left-hand square was likely by design, if happiness (life_ladder) is the statistic we are looking to understand, the attributes to immediately follow are likely what most consider large contributing factors.</p>
<p>Intuitive correlations:</p>
<ul>
<li>correlation between all trust statistics</li>
<li>Democratic Quality &lt;+&gt; Delivery Quality</li>
<li>SDMean Ladder &lt;-&gt; Ladder</li>
<li>GINI index &lt;+&gt; GINI index mean</li>
</ul>
<p>Potentially interesting correlations:</p>
<ul>
<li>trust WVS 81-84 &lt;+&gt; Democratic+Delivery Quality</li>
<li>trust WVS 81-84 &lt;+&gt; log GDP</li>
<li>trust WVS 81-84 &lt;-&gt; Perceptions of corruption</li>
</ul>
<p>While the trust 81-84 could be an interesting variable to investigate, it is also worth remembering that this attribute has the most null values out of all, so these should be taken with a grain of salt.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">gov_col</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Freedom'</span><span class="p">,</span> <span class="s1">'Corruption_Perception'</span><span class="p">,</span> <span class="s1">'Confidence_natGovt'</span><span class="p">,</span><span class="s1">'Democratic_Quality'</span><span class="p">,</span> <span class="s1">'Delivery_Quality'</span><span class="p">]</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">corrmat</span> <span class="o">=</span> <span class="n">whr</span><span class="p">[</span><span class="n">gov_col</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span> <span class="c1"># Omit year</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corrmat</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_25_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">whr_ext</span> <span class="o">=</span> <span class="n">whr</span><span class="p">[</span><span class="n">ext_col</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="c1"># Using an extended, but not quite full, version of dataset</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">whr_ext</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'Country'</span><span class="p">)</span><span class="o">.</span><span class="n">Year</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>count    165.000000
mean      10.327273
std        3.371624
min        1.000000
25%        9.000000
50%       12.000000
75%       13.000000
max       13.000000
Name: Year, dtype: float64</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">whr_ext</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'Country'</span><span class="p">)</span><span class="o">.</span><span class="n">Year</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">13</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_28_0.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Almost half of all countries in the dataset have an entry for all years that the survey has been conducted. Additionally, 75% of countries have at least 9 years worth of data entries.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1">#From:  00BF11 -&gt; BF2200</span>
<span class="n">rygscale</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s1">'rgb(191, 34, 0)'</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span><span class="s1">'rgb(191, 75, 0)'</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.3</span><span class="p">,</span><span class="s1">'rgb(191, 116, 0)'</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span><span class="s1">'rgb(191, 156, 0)'</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span><span class="s1">'rgb(184, 191, 0)'</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.6</span><span class="p">,</span><span class="s1">'rgb(144, 191, 0)'</span><span class="p">],</span>
    <span class="p">[</span><span class="mf">0.7</span><span class="p">,</span><span class="s1">'rgb(103, 191, 0)'</span><span class="p">],</span>
    <span class="c1">#[0.8,'rgb(63, 191, 0)'],</span>
    <span class="c1">#[0.9,'rgb(22, 191, 0)'],</span>
    <span class="p">[</span><span class="mf">0.8</span><span class="p">,</span><span class="s1">'rgb(0, 191, 17)'</span><span class="p">],</span> <span class="c1"># Display highest happiness ranks as vibrant green</span>
    <span class="p">[</span><span class="mf">0.9</span><span class="p">,</span><span class="s1">'rgb(30, 223, 29)'</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="s1">'rgb(61, 255, 41)'</span><span class="p">]]</span>
<span class="c1"># https://convertingcolors.com/rgb-color-191_34_0.html</span>
<span class="c1"># http://www.perbang.dk/rgbgradient/</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">whr_recent</span> <span class="o">=</span> <span class="n">whr_ext</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">whr_ext</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'Country'</span><span class="p">)</span><span class="o">.</span><span class="n">Year</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()]</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">go</span><span class="o">.</span><span class="n">Choropleth</span><span class="p">(</span>
        <span class="n">locations</span> <span class="o">=</span> <span class="n">whr_recent</span><span class="o">.</span><span class="n">Country</span><span class="p">,</span><span class="c1">#whrffl_imp.index, </span>
        <span class="n">locationmode</span> <span class="o">=</span> <span class="s1">'country names'</span><span class="p">,</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">whr_recent</span><span class="p">[</span><span class="s1">'Life_Ladder'</span><span class="p">],</span>
        <span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'</span><span class="si">{}</span><span class="s1"> (</span><span class="si">{}</span><span class="s1">)'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">whr_recent</span><span class="o">.</span><span class="n">Country</span><span class="p">,</span> <span class="n">whr_recent</span><span class="o">.</span><span class="n">Year</span><span class="p">)],</span>
        <span class="n">hoverinfo</span><span class="o">=</span><span class="s1">'z+text'</span><span class="p">,</span>
        <span class="n">colorscale</span> <span class="o">=</span> <span class="n">rygscale</span><span class="p">,</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">choropleth</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">line</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">choropleth</span><span class="o">.</span><span class="n">marker</span><span class="o">.</span><span class="n">Line</span><span class="p">(</span><span class="n">color</span> <span class="o">=</span> <span class="s1">'rgb(255,255,255)'</span><span class="p">,</span><span class="n">width</span> <span class="o">=</span> <span class="mf">0.15</span><span class="p">)),</span>
        <span class="n">colorbar</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">choropleth</span><span class="o">.</span><span class="n">ColorBar</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s1">'Happiness Score'</span><span class="p">,</span><span class="n">xpad</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">]</span>

<span class="n">layout</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">Title</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="s1">'World Happiness 2019&lt;br&gt;(Cantrill Life Ladder)'</span><span class="p">,</span> <span class="n">yanchor</span><span class="o">=</span><span class="s1">'top'</span><span class="p">),</span>
    <span class="n">geo</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">Geo</span><span class="p">(</span>
        <span class="n">showcoastlines</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">landcolor</span> <span class="o">=</span> <span class="s1">'lightgray'</span><span class="p">,</span>
        <span class="n">showland</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">showframe</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">projection</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">geo</span><span class="o">.</span><span class="n">Projection</span><span class="p">(</span><span class="nb">type</span> <span class="o">=</span> <span class="s1">'equirectangular'</span><span class="p">)</span><span class="c1">#'natural earth')</span>
    <span class="p">),</span>
    <span class="n">annotations</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">go</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">Annotation</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.85</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">,</span><span class="n">xref</span> <span class="o">=</span> <span class="s1">'paper'</span><span class="p">,</span><span class="n">yref</span> <span class="o">=</span> <span class="s1">'paper'</span><span class="p">,</span><span class="n">xanchor</span><span class="o">=</span><span class="s1">'right'</span><span class="p">,</span> <span class="n">yanchor</span><span class="o">=</span><span class="s1">'bottom'</span><span class="p">,</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s1">'Source: &lt;a href="https://worldhappiness.report/ed/2019/#read"&gt;World Happiness Report 2019&lt;/a&gt;'</span><span class="p">,</span>
        <span class="n">showarrow</span> <span class="o">=</span> <span class="kc">False</span><span class="p">),</span>
        <span class="n">go</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">Annotation</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">xref</span> <span class="o">=</span> <span class="s1">'paper'</span><span class="p">,</span><span class="n">yref</span> <span class="o">=</span> <span class="s1">'paper'</span><span class="p">,</span><span class="n">align</span><span class="o">=</span><span class="s1">'left'</span><span class="p">,</span><span class="n">font</span><span class="o">=</span><span class="p">{</span><span class="s1">'size'</span><span class="p">:</span><span class="mi">9</span><span class="p">},</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s1">'''</span>
<span class="s1">        "Please imagine a ladder, with steps numbered from 0 at the bottom to 10 at the top.&lt;br&gt;</span>
<span class="s1">         The top of the ladder represents the best possible life for you and the bottom of the ladder represents the worst possible life for you.&lt;br&gt;</span>
<span class="s1">         On which step of the ladder would you say you personally feel you stand at this time?"</span>
<span class="s1">        '''</span><span class="p">,</span>
        <span class="n">showarrow</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">layout</span> <span class="o">=</span> <span class="n">layout</span><span class="p">)</span>
<span class="c1"># To run in notebook, uncomment iplot, else it will save as html file</span>
<span class="c1">#pio.write_html(fig, file='whr2019.html', include_plotlyjs='cdn', full_html=False)</span>
<span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="s1">'world-map'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output" data-mime-type="text/html">
<div>
<div class="plotly-graph-div" id="66c8b56f-4bff-4d6a-b696-f245c333e887" style="height:525px; width:100%;"></div>
{% raw %}
<script type="text/javascript">
                require(["plotly"], function(Plotly) {
                    window.PLOTLYENV=window.PLOTLYENV || {};

                if (document.getElementById("66c8b56f-4bff-4d6a-b696-f245c333e887")) {
                    Plotly.newPlot(
                        '66c8b56f-4bff-4d6a-b696-f245c333e887',
                        [{"colorbar": {"title": {"text": "Happiness Score"}, "xpad": 0}, "colorscale": [[0, "rgb(191, 34, 0)"], [0.2, "rgb(191, 75, 0)"], [0.3, "rgb(191, 116, 0)"], [0.4, "rgb(191, 156, 0)"], [0.5, "rgb(184, 191, 0)"], [0.6, "rgb(144, 191, 0)"], [0.7, "rgb(103, 191, 0)"], [0.8, "rgb(0, 191, 17)"], [0.9, "rgb(30, 223, 29)"], [1, "rgb(61, 255, 41)"]], "hoverinfo": "z+text", "locationmode": "country names", "locations": ["Afghanistan", "Albania", "Algeria", "Angola", "Argentina", "Armenia", "Australia", "Austria", "Azerbaijan", "Bahrain", "Bangladesh", "Belarus", "Belgium", "Belize", "Benin", "Bhutan", "Bolivia", "Bosnia and Herzegovina", "Botswana", "Brazil", "Bulgaria", "Burkina Faso", "Burundi", "Cambodia", "Cameroon", "Canada", "Central African Republic", "Chad", "Chile", "China", "Colombia", "Comoros", "Congo (Brazzaville)", "Congo (Kinshasa)", "Costa Rica", "Croatia", "Cuba", "Cyprus", "Czech Republic", "Denmark", "Djibouti", "Dominican Republic", "Ecuador", "Egypt", "El Salvador", "Estonia", "Ethiopia", "Finland", "France", "Gabon", "Gambia", "Georgia", "Germany", "Ghana", "Greece", "Guatemala", "Guinea", "Guyana", "Haiti", "Honduras", "Hong Kong S.A.R. of China", "Hungary", "Iceland", "India", "Indonesia", "Iran", "Iraq", "Ireland", "Israel", "Italy", "Ivory Coast", "Jamaica", "Japan", "Jordan", "Kazakhstan", "Kenya", "Kosovo", "Kuwait", "Kyrgyzstan", "Laos", "Latvia", "Lebanon", "Lesotho", "Liberia", "Libya", "Lithuania", "Luxembourg", "Macedonia", "Madagascar", "Malawi", "Malaysia", "Mali", "Malta", "Mauritania", "Mauritius", "Mexico", "Moldova", "Mongolia", "Montenegro", "Morocco", "Mozambique", "Myanmar", "Namibia", "Nepal", "Netherlands", "New Zealand", "Nicaragua", "Niger", "Nigeria", "North Cyprus", "Norway", "Oman", "Pakistan", "Palestinian Territories", "Panama", "Paraguay", "Peru", "Philippines", "Poland", "Portugal", "Qatar", "Romania", "Russia", "Rwanda", "Saudi Arabia", "Senegal", "Serbia", "Sierra Leone", "Singapore", "Slovakia", "Slovenia", "Somalia", "Somaliland region", "South Africa", "South Korea", "South Sudan", "Spain", "Sri Lanka", "Sudan", "Suriname", "Swaziland", "Sweden", "Switzerland", "Syria", "Taiwan Province of China", "Tajikistan", "Tanzania", "Thailand", "Togo", "Trinidad and Tobago", "Tunisia", "Turkey", "Turkmenistan", "Uganda", "Ukraine", "United Arab Emirates", "United Kingdom", "United States", "Uruguay", "Uzbekistan", "Venezuela", "Vietnam", "Yemen", "Zambia", "Zimbabwe"], "marker": {"line": {"color": "rgb(255,255,255)", "width": 0.15}}, "text": ["Afghanistan (2018)", "Albania (2018)", "Algeria (2018)", "Angola (2014)", "Argentina (2018)", "Armenia (2018)", "Australia (2018)", "Austria (2018)", "Azerbaijan (2018)", "Bahrain (2017)", "Bangladesh (2018)", "Belarus (2018)", "Belgium (2018)", "Belize (2014)", "Benin (2018)", "Bhutan (2015)", "Bolivia (2018)", "Bosnia and Herzegovina (2018)", "Botswana (2018)", "Brazil (2018)", "Bulgaria (2018)", "Burkina Faso (2018)", "Burundi (2018)", "Cambodia (2018)", "Cameroon (2018)", "Canada (2018)", "Central African Republic (2017)", "Chad (2018)", "Chile (2018)", "China (2018)", "Colombia (2018)", "Comoros (2018)", "Congo (Brazzaville) (2018)", "Congo (Kinshasa) (2017)", "Costa Rica (2018)", "Croatia (2018)", "Cuba (2006)", "Cyprus (2018)", "Czech Republic (2018)", "Denmark (2018)", "Djibouti (2011)", "Dominican Republic (2018)", "Ecuador (2018)", "Egypt (2018)", "El Salvador (2018)", "Estonia (2018)", "Ethiopia (2018)", "Finland (2018)", "France (2018)", "Gabon (2018)", "Gambia (2018)", "Georgia (2018)", "Germany (2018)", "Ghana (2017)", "Greece (2018)", "Guatemala (2018)", "Guinea (2018)", "Guyana (2007)", "Haiti (2018)", "Honduras (2018)", "Hong Kong S.A.R. of China (2017)", "Hungary (2017)", "Iceland (2017)", "India (2018)", "Indonesia (2018)", "Iran (2018)", "Iraq (2017)", "Ireland (2018)", "Israel (2018)", "Italy (2018)", "Ivory Coast (2018)", "Jamaica (2017)", "Japan (2018)", "Jordan (2018)", "Kazakhstan (2018)", "Kenya (2018)", "Kosovo (2018)", "Kuwait (2017)", "Kyrgyzstan (2018)", "Laos (2018)", "Latvia (2018)", "Lebanon (2018)", "Lesotho (2017)", "Liberia (2018)", "Libya (2018)", "Lithuania (2018)", "Luxembourg (2018)", "Macedonia (2018)", "Madagascar (2018)", "Malawi (2018)", "Malaysia (2018)", "Mali (2018)", "Malta (2018)", "Mauritania (2018)", "Mauritius (2018)", "Mexico (2018)", "Moldova (2018)", "Mongolia (2018)", "Montenegro (2018)", "Morocco (2018)", "Mozambique (2018)", "Myanmar (2018)", "Namibia (2018)", "Nepal (2018)", "Netherlands (2018)", "New Zealand (2018)", "Nicaragua (2018)", "Niger (2018)", "Nigeria (2018)", "North Cyprus (2018)", "Norway (2018)", "Oman (2011)", "Pakistan (2018)", "Palestinian Territories (2018)", "Panama (2018)", "Paraguay (2017)", "Peru (2018)", "Philippines (2018)", "Poland (2017)", "Portugal (2018)", "Qatar (2015)", "Romania (2018)", "Russia (2018)", "Rwanda (2018)", "Saudi Arabia (2018)", "Senegal (2018)", "Serbia (2018)", "Sierra Leone (2018)", "Singapore (2018)", "Slovakia (2018)", "Slovenia (2018)", "Somalia (2016)", "Somaliland region (2012)", "South Africa (2018)", "South Korea (2018)", "South Sudan (2017)", "Spain (2018)", "Sri Lanka (2018)", "Sudan (2014)", "Suriname (2012)", "Swaziland (2018)", "Sweden (2018)", "Switzerland (2018)", "Syria (2015)", "Taiwan Province of China (2018)", "Tajikistan (2017)", "Tanzania (2018)", "Thailand (2018)", "Togo (2018)", "Trinidad and Tobago (2017)", "Tunisia (2018)", "Turkey (2018)", "Turkmenistan (2018)", "Uganda (2018)", "Ukraine (2018)", "United Arab Emirates (2018)", "United Kingdom (2018)", "United States (2018)", "Uruguay (2018)", "Uzbekistan (2018)", "Venezuela (2018)", "Vietnam (2018)", "Yemen (2018)", "Zambia (2018)", "Zimbabwe (2018)"], "type": "choropleth", "z": [2.694303274154663, 5.0044026374816895, 5.043086051940918, 3.7948379516601562, 5.792796611785889, 5.062448501586914, 7.176993370056152, 7.396001815795898, 5.167995452880859, 6.227320671081543, 4.4992170333862305, 5.23376989364624, 6.892171859741211, 5.955646514892578, 5.819827079772949, 5.082128524780273, 5.91573429107666, 5.887401103973389, 3.4613656997680664, 6.190921783447266, 5.098813533782959, 4.927236080169678, 3.775283098220825, 5.121837615966797, 5.25073766708374, 7.175496578216553, 3.4758620262145996, 4.486325263977051, 6.436220645904541, 5.131433963775635, 5.9835124015808105, 3.9728195667266846, 5.4902143478393555, 4.311033248901367, 7.1410746574401855, 5.536271095275879, 5.417868614196777, 6.276443004608154, 7.034165382385254, 7.648785591125488, 4.3691935539245605, 5.433215618133545, 6.128010272979736, 4.00545072555542, 6.276246070861816, 6.091302394866943, 4.379262447357178, 7.858107089996338, 6.665903568267822, 4.783009052276611, 4.9220991134643555, 4.659097194671631, 7.118364334106445, 5.481310844421387, 5.409289360046387, 6.626591682434082, 5.252226829528809, 5.992826461791992, 3.6149280071258545, 5.908423900604248, 5.3624749183654785, 6.065038681030273, 7.4762139320373535, 3.818068742752075, 5.340295791625977, 4.278117656707764, 4.462399005889893, 6.962335586547852, 6.927178859710693, 6.516526699066162, 5.268374919891357, 5.889759063720703, 5.793575286865234, 4.6389336585998535, 6.007636070251465, 4.655702590942383, 6.3918256759643555, 6.093905448913574, 5.2973833084106445, 4.859402179718018, 5.901154041290283, 5.167186737060547, 3.7953007221221924, 4.134852886199951, 5.4939775466918945, 6.3088788986206055, 7.242630958557129, 5.239834785461426, 4.070586681365967, 3.3346335887908936, 5.338817596435547, 4.415729522705078, 6.909710884094238, 4.313615322113037, 5.881740570068359, 6.549578666687012, 5.682277202606201, 5.464622974395752, 5.6501898765563965, 4.896791934967041, 4.653713703155518, 4.410633087158203, 4.83408784866333, 4.910086631774902, 7.463097095489502, 7.370285987854004, 5.818952560424805, 5.164007186889648, 5.252288341522217, 5.60805606842041, 7.4442620277404785, 6.852982044219971, 5.471553802490234, 4.553921699523926, 6.281434059143066, 5.7132954597473145, 5.679661273956299, 5.8691725730896, 6.201268196105957, 5.919822692871094, 6.3745293617248535, 6.15087890625, 5.513500213623047, 3.561046600341797, 6.356393337249756, 4.7693772315979, 5.936493396759033, 4.305683135986328, 6.374564170837402, 6.235110759735107, 6.249419212341309, 4.667941093444824, 5.057314395904541, 4.883922100067139, 5.840231418609619, 2.816622495651245, 6.513370990753174, 4.400223255157471, 4.138672828674316, 6.269286632537842, 4.211565017700195, 7.374792098999023, 7.508586883544922, 3.4619128704071045, 6.467004776000977, 5.8292341232299805, 3.44502329826355, 6.011561870574951, 4.022894859313965, 6.191859722137451, 4.7411322593688965, 5.185689449310303, 4.620601654052734, 4.321714878082275, 4.661909103393555, 6.603743553161621, 7.233445167541504, 6.882684707641602, 6.3717145919799805, 6.205460071563721, 5.0056633949279785, 5.295547008514404, 3.057513952255249, 4.041488170623779, 3.6164798736572266]}],
                        {"annotations": [{"showarrow": false, "text": "Source: <a href=\"https://worldhappiness.report/ed/2019/#read\">World Happiness Report 2019</a>", "x": 0.85, "xanchor": "right", "xref": "paper", "y": 0.01, "yanchor": "bottom", "yref": "paper"}, {"align": "left", "font": {"size": 9}, "showarrow": false, "text": "\n        \"Please imagine a ladder, with steps numbered from 0 at the bottom to 10 at the top.<br>\n         The top of the ladder represents the best possible life for you and the bottom of the ladder represents the worst possible life for you.<br>\n         On which step of the ladder would you say you personally feel you stand at this time?\"\n        ", "x": 0, "xref": "paper", "y": -0.15, "yref": "paper"}], "geo": {"landcolor": "lightgray", "projection": {"type": "equirectangular"}, "showcoastlines": true, "showframe": false, "showland": true}, "template": {"data": {"bar": [{"error_x": {"color": "#2a3f5f"}, "error_y": {"color": "#2a3f5f"}, "marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "bar"}], "barpolar": [{"marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "barpolar"}], "carpet": [{"aaxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "baxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "type": "carpet"}], "choropleth": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "choropleth"}], "contour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "contour"}], "contourcarpet": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "contourcarpet"}], "heatmap": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmap"}], "heatmapgl": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmapgl"}], "histogram": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "histogram"}], "histogram2d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2d"}], "histogram2dcontour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2dcontour"}], "mesh3d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "mesh3d"}], "parcoords": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "parcoords"}], "scatter": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter"}], "scatter3d": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter3d"}], "scattercarpet": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattercarpet"}], "scattergeo": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergeo"}], "scattergl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergl"}], "scattermapbox": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattermapbox"}], "scatterpolar": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolar"}], "scatterpolargl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolargl"}], "scatterternary": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterternary"}], "surface": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "surface"}], "table": [{"cells": {"fill": {"color": "#EBF0F8"}, "line": {"color": "white"}}, "header": {"fill": {"color": "#C8D4E3"}, "line": {"color": "white"}}, "type": "table"}]}, "layout": {"annotationdefaults": {"arrowcolor": "#2a3f5f", "arrowhead": 0, "arrowwidth": 1}, "colorscale": {"diverging": [[0, "#8e0152"], [0.1, "#c51b7d"], [0.2, "#de77ae"], [0.3, "#f1b6da"], [0.4, "#fde0ef"], [0.5, "#f7f7f7"], [0.6, "#e6f5d0"], [0.7, "#b8e186"], [0.8, "#7fbc41"], [0.9, "#4d9221"], [1, "#276419"]], "sequential": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "sequentialminus": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}, "colorway": ["#636efa", "#EF553B", "#00cc96", "#ab63fa", "#FFA15A", "#19d3f3", "#FF6692", "#B6E880", "#FF97FF", "#FECB52"], "font": {"color": "#2a3f5f"}, "geo": {"bgcolor": "white", "lakecolor": "white", "landcolor": "#E5ECF6", "showlakes": true, "showland": true, "subunitcolor": "white"}, "hoverlabel": {"align": "left"}, "hovermode": "closest", "mapbox": {"style": "light"}, "paper_bgcolor": "white", "plot_bgcolor": "#E5ECF6", "polar": {"angularaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "radialaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "scene": {"xaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "yaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "zaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}}, "shapedefaults": {"line": {"color": "#2a3f5f"}}, "ternary": {"aaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "baxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "caxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "title": {"x": 0.05}, "xaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "zerolinecolor": "white", "zerolinewidth": 2}, "yaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "zerolinecolor": "white", "zerolinewidth": 2}}}, "title": {"text": "World Happiness 2019<br>(Cantrill Life Ladder)", "yanchor": "top"}},
                        {"responsive": true}
                    ).then(function(){

var gd = document.getElementById('66c8b56f-4bff-4d6a-b696-f245c333e887');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })
                };
                });
            </script>
{% endraw %}
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># This dictionary was a mapping between the WHR country names and geopandas country names.</span>
<span class="c1"># Left in notebook for potential future use.</span>
<span class="c1"># format: whr.Country : world.name</span>
<span class="n">whr_world</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'Bahrain'</span> <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">'Bosnia and Herzegovina'</span> <span class="p">:</span> <span class="s1">'Bosnia and Herz.'</span><span class="p">,</span>
    <span class="s1">'Central African Republic'</span> <span class="p">:</span> <span class="s1">'Central African Rep.'</span><span class="p">,</span>
    <span class="s1">'Congo (Brazzaville)'</span> <span class="p">:</span> <span class="s1">'Congo'</span><span class="p">,</span>
    <span class="s1">'Congo (Kinshasa)'</span> <span class="p">:</span> <span class="s1">'Dem. Rep. Congo'</span><span class="p">,</span>
    <span class="s1">'Czech Republic'</span> <span class="p">:</span> <span class="s1">'Czech Rep.'</span><span class="p">,</span>
    <span class="s1">'Dominican Republic'</span> <span class="p">:</span> <span class="s1">'Dominican Rep.'</span><span class="p">,</span>
    <span class="s1">'Hong Kong S.A.R. of China'</span> <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">'Ivory Coast'</span> <span class="p">:</span> <span class="s2">"Côte d'Ivoire"</span><span class="p">,</span>
    <span class="s1">'Laos'</span> <span class="p">:</span> <span class="s1">'Lao PDR'</span><span class="p">,</span>
    <span class="s1">'Malta'</span> <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">'Mauritius'</span> <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">'North Cyprus'</span> <span class="p">:</span> <span class="s1">'Cyprus'</span><span class="p">,</span>
    <span class="s1">'Palestinian Territories'</span> <span class="p">:</span> <span class="s1">'Palestine'</span><span class="p">,</span>
    <span class="s1">'Singapore'</span> <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
    <span class="s1">'Somaliland region'</span> <span class="p">:</span> <span class="s1">'Somalia'</span><span class="p">,</span>
    <span class="s1">'South Korea'</span> <span class="p">:</span> <span class="s1">'Korea'</span><span class="p">,</span>
    <span class="s1">'South Sudan'</span> <span class="p">:</span> <span class="s1">'S. Sudan'</span><span class="p">,</span>
    <span class="s1">'Taiwan Province of China'</span> <span class="p">:</span> <span class="s1">'Taiwan'</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Aggregating">Aggregating<a class="anchor-link" href="#Aggregating">¶</a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Ideally, we would simply use the most up to data that we have for each country, unfortunately, that causes some problems.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Take-latest">Take latest<a class="anchor-link" href="#Take-latest">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Get latest year indices</span>
<span class="n">latest_idx</span> <span class="o">=</span> <span class="n">whr_ext</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'Country'</span><span class="p">)</span><span class="o">.</span><span class="n">Year</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
<span class="n">whrl</span> <span class="o">=</span> <span class="n">whr_ext</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">latest_idx</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">'Country'</span><span class="p">)</span>
<span class="c1"># Check NAs in the core data set</span>
<span class="n">whrl</span><span class="p">[</span><span class="n">whrl</span><span class="p">[</span><span class="n">core_col</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Year</th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
</tr>
<tr>
<th>Country</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>Bahrain</th>
<td>2017</td>
<td>6.227321</td>
<td>10.675694</td>
<td>0.875747</td>
<td>68.500000</td>
<td>0.905859</td>
<td>0.128193</td>
<td>NaN</td>
<td>0.813571</td>
<td>0.289760</td>
<td>NaN</td>
<td>-1.167434</td>
<td>0.226644</td>
<td>NaN</td>
<td>0.446609</td>
</tr>
<tr>
<th>Cambodia</th>
<td>2018</td>
<td>5.121838</td>
<td>8.253352</td>
<td>0.794605</td>
<td>61.599998</td>
<td>0.958305</td>
<td>0.033787</td>
<td>NaN</td>
<td>0.844593</td>
<td>0.414346</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.603439</td>
</tr>
<tr>
<th>China</th>
<td>2018</td>
<td>5.131434</td>
<td>9.694376</td>
<td>0.787605</td>
<td>69.300003</td>
<td>0.895378</td>
<td>-0.174899</td>
<td>NaN</td>
<td>0.855784</td>
<td>0.189640</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.425000</td>
<td>0.538206</td>
</tr>
<tr>
<th>Cuba</th>
<td>2006</td>
<td>5.417869</td>
<td>9.676425</td>
<td>0.969595</td>
<td>68.440002</td>
<td>0.281458</td>
<td>NaN</td>
<td>NaN</td>
<td>0.646712</td>
<td>0.276602</td>
<td>0.513176</td>
<td>-0.706359</td>
<td>-0.543394</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>Cyprus</th>
<td>2018</td>
<td>6.276443</td>
<td>NaN</td>
<td>0.825573</td>
<td>73.699997</td>
<td>0.794215</td>
<td>NaN</td>
<td>0.848337</td>
<td>0.750122</td>
<td>0.298021</td>
<td>0.352440</td>
<td>NaN</td>
<td>NaN</td>
<td>0.326167</td>
<td>0.448661</td>
</tr>
<tr>
<th>Egypt</th>
<td>2018</td>
<td>4.005451</td>
<td>9.293960</td>
<td>0.758824</td>
<td>61.700001</td>
<td>0.681654</td>
<td>-0.222930</td>
<td>NaN</td>
<td>0.492261</td>
<td>0.285184</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.312000</td>
<td>0.323929</td>
</tr>
<tr>
<th>Gambia</th>
<td>2018</td>
<td>4.922099</td>
<td>7.376554</td>
<td>0.684800</td>
<td>55.000000</td>
<td>0.718729</td>
<td>NaN</td>
<td>0.691070</td>
<td>0.804012</td>
<td>0.379208</td>
<td>0.757543</td>
<td>NaN</td>
<td>NaN</td>
<td>0.422667</td>
<td>0.592391</td>
</tr>
<tr>
<th>Jordan</th>
<td>2018</td>
<td>4.638934</td>
<td>9.024435</td>
<td>0.799544</td>
<td>66.800003</td>
<td>0.762420</td>
<td>-0.183490</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.343000</td>
<td>0.391051</td>
</tr>
<tr>
<th>Kosovo</th>
<td>2018</td>
<td>6.391826</td>
<td>NaN</td>
<td>0.822407</td>
<td>65.149826</td>
<td>0.889737</td>
<td>NaN</td>
<td>0.922078</td>
<td>0.778271</td>
<td>0.170248</td>
<td>0.347547</td>
<td>NaN</td>
<td>NaN</td>
<td>0.289909</td>
<td>0.402302</td>
</tr>
<tr>
<th>Kuwait</th>
<td>2017</td>
<td>6.093905</td>
<td>11.090272</td>
<td>0.853491</td>
<td>66.500000</td>
<td>0.884182</td>
<td>-0.039014</td>
<td>NaN</td>
<td>0.692072</td>
<td>0.307321</td>
<td>NaN</td>
<td>-0.323727</td>
<td>-0.114578</td>
<td>NaN</td>
<td>0.591861</td>
</tr>
<tr>
<th>Libya</th>
<td>2018</td>
<td>5.493978</td>
<td>NaN</td>
<td>0.824165</td>
<td>62.299999</td>
<td>0.780559</td>
<td>NaN</td>
<td>0.645839</td>
<td>0.705535</td>
<td>0.398903</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.596754</td>
</tr>
<tr>
<th>Malta</th>
<td>2018</td>
<td>6.909711</td>
<td>NaN</td>
<td>0.931542</td>
<td>72.199997</td>
<td>0.927341</td>
<td>NaN</td>
<td>0.595200</td>
<td>0.721224</td>
<td>0.295699</td>
<td>0.757714</td>
<td>NaN</td>
<td>NaN</td>
<td>0.291100</td>
<td>0.385407</td>
</tr>
<tr>
<th>North Cyprus</th>
<td>2018</td>
<td>5.608056</td>
<td>NaN</td>
<td>0.837392</td>
<td>NaN</td>
<td>0.797066</td>
<td>NaN</td>
<td>0.613837</td>
<td>0.480453</td>
<td>0.261868</td>
<td>0.378324</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.200969</td>
</tr>
<tr>
<th>Oman</th>
<td>2011</td>
<td>6.852982</td>
<td>10.648312</td>
<td>NaN</td>
<td>65.500000</td>
<td>0.916293</td>
<td>-0.008942</td>
<td>NaN</td>
<td>NaN</td>
<td>0.295164</td>
<td>NaN</td>
<td>-0.314025</td>
<td>0.295601</td>
<td>NaN</td>
<td>0.494790</td>
</tr>
<tr>
<th>Palestinian Territories</th>
<td>2018</td>
<td>4.553922</td>
<td>NaN</td>
<td>0.819479</td>
<td>NaN</td>
<td>0.654535</td>
<td>NaN</td>
<td>0.813780</td>
<td>0.610405</td>
<td>0.418929</td>
<td>0.392373</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.482421</td>
</tr>
<tr>
<th>Poland</th>
<td>2017</td>
<td>6.201268</td>
<td>10.211576</td>
<td>0.881854</td>
<td>68.900002</td>
<td>0.830843</td>
<td>-0.127978</td>
<td>NaN</td>
<td>0.677436</td>
<td>0.203388</td>
<td>0.502480</td>
<td>0.651249</td>
<td>0.678493</td>
<td>NaN</td>
<td>0.260088</td>
</tr>
<tr>
<th>Qatar</th>
<td>2015</td>
<td>6.374529</td>
<td>11.693157</td>
<td>NaN</td>
<td>68.300003</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>-0.074040</td>
<td>0.823927</td>
<td>NaN</td>
<td>0.653175</td>
</tr>
<tr>
<th>Saudi Arabia</th>
<td>2018</td>
<td>6.356393</td>
<td>10.797972</td>
<td>0.867848</td>
<td>66.300003</td>
<td>0.854922</td>
<td>-0.209564</td>
<td>NaN</td>
<td>0.764405</td>
<td>0.288380</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.472084</td>
</tr>
<tr>
<th>Singapore</th>
<td>2018</td>
<td>6.374564</td>
<td>NaN</td>
<td>0.902841</td>
<td>76.800003</td>
<td>0.916078</td>
<td>NaN</td>
<td>0.096563</td>
<td>0.787093</td>
<td>0.106871</td>
<td>0.892469</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.399788</td>
</tr>
<tr>
<th>Somalia</th>
<td>2016</td>
<td>4.667941</td>
<td>NaN</td>
<td>0.594417</td>
<td>50.000000</td>
<td>0.917323</td>
<td>NaN</td>
<td>0.440802</td>
<td>0.891423</td>
<td>0.193282</td>
<td>0.700682</td>
<td>-2.134841</td>
<td>-2.125518</td>
<td>NaN</td>
<td>0.491746</td>
</tr>
<tr>
<th>Somaliland region</th>
<td>2012</td>
<td>5.057314</td>
<td>NaN</td>
<td>0.786291</td>
<td>NaN</td>
<td>0.758219</td>
<td>NaN</td>
<td>0.333832</td>
<td>0.735189</td>
<td>0.152428</td>
<td>0.651242</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.533575</td>
</tr>
<tr>
<th>South Sudan</th>
<td>2017</td>
<td>2.816622</td>
<td>NaN</td>
<td>0.556823</td>
<td>51.000000</td>
<td>0.456011</td>
<td>NaN</td>
<td>0.761270</td>
<td>0.585602</td>
<td>0.517364</td>
<td>0.461551</td>
<td>-2.138769</td>
<td>-2.018497</td>
<td>0.463000</td>
<td>0.703008</td>
</tr>
<tr>
<th>Swaziland</th>
<td>2018</td>
<td>4.211565</td>
<td>8.946771</td>
<td>0.779270</td>
<td>NaN</td>
<td>0.709974</td>
<td>-0.179938</td>
<td>0.692341</td>
<td>0.824355</td>
<td>0.252339</td>
<td>0.689549</td>
<td>NaN</td>
<td>NaN</td>
<td>0.523000</td>
<td>0.732568</td>
</tr>
<tr>
<th>Syria</th>
<td>2015</td>
<td>3.461913</td>
<td>NaN</td>
<td>0.463913</td>
<td>55.200001</td>
<td>0.448271</td>
<td>NaN</td>
<td>0.685237</td>
<td>0.369440</td>
<td>0.642589</td>
<td>NaN</td>
<td>-2.448228</td>
<td>-1.548680</td>
<td>0.358000</td>
<td>0.525934</td>
</tr>
<tr>
<th>Taiwan Province of China</th>
<td>2018</td>
<td>6.467005</td>
<td>NaN</td>
<td>0.896459</td>
<td>NaN</td>
<td>0.741033</td>
<td>NaN</td>
<td>0.735971</td>
<td>0.848399</td>
<td>0.092696</td>
<td>0.311723</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.330178</td>
</tr>
<tr>
<th>Turkmenistan</th>
<td>2018</td>
<td>4.620602</td>
<td>9.749464</td>
<td>0.984489</td>
<td>62.200001</td>
<td>0.857774</td>
<td>0.237280</td>
<td>NaN</td>
<td>0.612210</td>
<td>0.189025</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.271070</td>
</tr>
<tr>
<th>United Arab Emirates</th>
<td>2018</td>
<td>6.603744</td>
<td>11.127678</td>
<td>0.851041</td>
<td>67.099998</td>
<td>0.943664</td>
<td>0.036494</td>
<td>NaN</td>
<td>0.787243</td>
<td>0.302042</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.721079</td>
</tr>
<tr>
<th>Yemen</th>
<td>2018</td>
<td>3.057514</td>
<td>NaN</td>
<td>0.789422</td>
<td>56.700001</td>
<td>0.552726</td>
<td>NaN</td>
<td>0.792587</td>
<td>0.461114</td>
<td>0.314870</td>
<td>0.308151</td>
<td>NaN</td>
<td>NaN</td>
<td>0.357000</td>
<td>0.448597</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>That is quite a few missing values from the core attributes. Dropping these values would certainly degrade the quality of conclusions we are able to draw. Let's try another means of aggregating the data.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Mean-across-years">Mean across years<a class="anchor-link" href="#Mean-across-years">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">whr_mean</span> <span class="o">=</span> <span class="n">whr_ext</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'Country'</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">whr_mean</span><span class="p">[</span><span class="n">whr_mean</span><span class="p">[</span><span class="n">core_col</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Year</th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
</tr>
<tr>
<th>Country</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>China</th>
<td>2012.000000</td>
<td>4.984993</td>
<td>9.284457</td>
<td>0.780020</td>
<td>67.969230</td>
<td>0.829893</td>
<td>-0.191763</td>
<td>NaN</td>
<td>0.818346</td>
<td>0.158571</td>
<td>NaN</td>
<td>-1.081073</td>
<td>-0.229781</td>
<td>0.425</td>
<td>0.519979</td>
</tr>
<tr>
<th>Cuba</th>
<td>2006.000000</td>
<td>5.417869</td>
<td>9.676425</td>
<td>0.969595</td>
<td>68.440002</td>
<td>0.281458</td>
<td>NaN</td>
<td>NaN</td>
<td>0.646712</td>
<td>0.276602</td>
<td>0.513176</td>
<td>-0.706359</td>
<td>-0.543394</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>North Cyprus</th>
<td>2014.666667</td>
<td>5.682304</td>
<td>NaN</td>
<td>0.829782</td>
<td>NaN</td>
<td>0.779380</td>
<td>NaN</td>
<td>0.700919</td>
<td>0.646726</td>
<td>0.347834</td>
<td>0.414453</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.332236</td>
</tr>
<tr>
<th>Oman</th>
<td>2011.000000</td>
<td>6.852982</td>
<td>10.648312</td>
<td>NaN</td>
<td>65.500000</td>
<td>0.916293</td>
<td>-0.008942</td>
<td>NaN</td>
<td>NaN</td>
<td>0.295164</td>
<td>NaN</td>
<td>-0.314025</td>
<td>0.295601</td>
<td>NaN</td>
<td>0.494790</td>
</tr>
<tr>
<th>Somalia</th>
<td>2015.000000</td>
<td>5.183286</td>
<td>NaN</td>
<td>0.601511</td>
<td>49.899999</td>
<td>0.919690</td>
<td>NaN</td>
<td>0.435836</td>
<td>0.875515</td>
<td>0.195745</td>
<td>0.701591</td>
<td>-2.213750</td>
<td>-2.112246</td>
<td>NaN</td>
<td>0.508235</td>
</tr>
<tr>
<th>Somaliland region</th>
<td>2010.500000</td>
<td>4.909162</td>
<td>NaN</td>
<td>0.820706</td>
<td>NaN</td>
<td>0.795702</td>
<td>NaN</td>
<td>0.418910</td>
<td>0.768032</td>
<td>0.117528</td>
<td>0.634423</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.515988</td>
</tr>
<tr>
<th>Swaziland</th>
<td>2014.500000</td>
<td>4.539328</td>
<td>8.922841</td>
<td>0.808210</td>
<td>NaN</td>
<td>0.658565</td>
<td>-0.126601</td>
<td>0.804796</td>
<td>0.822484</td>
<td>0.251696</td>
<td>0.521415</td>
<td>-0.897581</td>
<td>-0.541850</td>
<td>0.523</td>
<td>0.710633</td>
</tr>
<tr>
<th>Turkmenistan</th>
<td>2013.888889</td>
<td>5.614522</td>
<td>9.517484</td>
<td>0.930100</td>
<td>60.826667</td>
<td>0.760401</td>
<td>-0.001878</td>
<td>NaN</td>
<td>0.641446</td>
<td>0.199920</td>
<td>NaN</td>
<td>-1.031149</td>
<td>-1.533028</td>
<td>NaN</td>
<td>0.263699</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We've improved in terms of NA quantity, but now we have a meaningless Year column and data that isn't representative of the most up to date information available. We need a method that can aggregate the data while still using the latest available information. Luckily, we already have most of the information needed to do this.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Forward-Fill-Latest">Forward Fill Latest<a class="anchor-link" href="#Forward-Fill-Latest">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Propagate the last available entry forward</span>
<span class="c1"># whrffl = whr_ext.groupby('Country').ffill().iloc[latest_idx].set_index('Country')</span>
<span class="n">whrffl</span> <span class="o">=</span> <span class="n">whr_ext</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">'Country'</span><span class="p">])</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">ffill</span><span class="p">())</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">latest_idx</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">'Country'</span><span class="p">)</span>
<span class="n">whrffl</span><span class="p">[</span><span class="n">whrffl</span><span class="p">[</span><span class="n">core_col</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Year</th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
</tr>
<tr>
<th>Country</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>China</th>
<td>2018</td>
<td>5.131434</td>
<td>9.694376</td>
<td>0.787605</td>
<td>69.300003</td>
<td>0.895378</td>
<td>-0.174899</td>
<td>NaN</td>
<td>0.855784</td>
<td>0.189640</td>
<td>NaN</td>
<td>-0.877810</td>
<td>-0.064555</td>
<td>0.425</td>
<td>0.538206</td>
</tr>
<tr>
<th>Cuba</th>
<td>2006</td>
<td>5.417869</td>
<td>9.676425</td>
<td>0.969595</td>
<td>68.440002</td>
<td>0.281458</td>
<td>NaN</td>
<td>NaN</td>
<td>0.646712</td>
<td>0.276602</td>
<td>0.513176</td>
<td>-0.706359</td>
<td>-0.543394</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>North Cyprus</th>
<td>2018</td>
<td>5.608056</td>
<td>NaN</td>
<td>0.837392</td>
<td>NaN</td>
<td>0.797066</td>
<td>NaN</td>
<td>0.613837</td>
<td>0.480453</td>
<td>0.261868</td>
<td>0.378324</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.200969</td>
</tr>
<tr>
<th>Oman</th>
<td>2011</td>
<td>6.852982</td>
<td>10.648312</td>
<td>NaN</td>
<td>65.500000</td>
<td>0.916293</td>
<td>-0.008942</td>
<td>NaN</td>
<td>NaN</td>
<td>0.295164</td>
<td>NaN</td>
<td>-0.314025</td>
<td>0.295601</td>
<td>NaN</td>
<td>0.494790</td>
</tr>
<tr>
<th>Somalia</th>
<td>2016</td>
<td>4.667941</td>
<td>NaN</td>
<td>0.594417</td>
<td>50.000000</td>
<td>0.917323</td>
<td>NaN</td>
<td>0.440802</td>
<td>0.891423</td>
<td>0.193282</td>
<td>0.700682</td>
<td>-2.134841</td>
<td>-2.125518</td>
<td>NaN</td>
<td>0.491746</td>
</tr>
<tr>
<th>Somaliland region</th>
<td>2012</td>
<td>5.057314</td>
<td>NaN</td>
<td>0.786291</td>
<td>NaN</td>
<td>0.758219</td>
<td>NaN</td>
<td>0.333832</td>
<td>0.735189</td>
<td>0.152428</td>
<td>0.651242</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.533575</td>
</tr>
<tr>
<th>Swaziland</th>
<td>2018</td>
<td>4.211565</td>
<td>8.946771</td>
<td>0.779270</td>
<td>NaN</td>
<td>0.709974</td>
<td>-0.179938</td>
<td>0.692341</td>
<td>0.824355</td>
<td>0.252339</td>
<td>0.689549</td>
<td>-0.897581</td>
<td>-0.541850</td>
<td>0.523</td>
<td>0.732568</td>
</tr>
<tr>
<th>Turkmenistan</th>
<td>2018</td>
<td>4.620602</td>
<td>9.749464</td>
<td>0.984489</td>
<td>62.200001</td>
<td>0.857774</td>
<td>0.237280</td>
<td>NaN</td>
<td>0.612210</td>
<td>0.189025</td>
<td>NaN</td>
<td>-1.153554</td>
<td>-1.545981</td>
<td>NaN</td>
<td>0.271070</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Now this is where we want to be. Using forward fill, we are able to preserve the latest available information while still reducing NA values. To a certain extent, we've corrupted the accuracy of <code>Year</code>, since it no long is exact measures from that year, but rather the last available data in each column up to that year. We'll keep it around for now, but drop it before we do any modeling.</p>
<p>The NaNs we are left with indicate that certain countries have no data available in any year of surveying.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Save NA country index for later use for future dataframe build</span>
<span class="n">naidx</span> <span class="o">=</span> <span class="n">whrffl</span><span class="p">[</span><span class="n">whrffl</span><span class="p">[</span><span class="n">core_col</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">index</span>
<span class="c1"># Save underlying 'natural' indices</span>
<span class="n">naiidx</span> <span class="o">=</span> <span class="n">whrffl</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[</span><span class="n">whrffl</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()[</span><span class="n">core_col</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">index</span>
<span class="c1">#nacnty = whr_lateff[whr_lateff[core_col].isna().any(axis=1)].Country.values</span>
<span class="n">whrffl</span><span class="p">[</span><span class="n">core_col</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>Year                     0
Life_Ladder              0
Log_GDP                  3
Social_support           1
Life_Expectancy          3
Freedom                  0
Generosity               4
Corruption_Perception    4
dtype: int64</pre>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We can't call it quits yet, these remaining missing values need to be addressed before we can do any sort of clustering. There are quite a few easy methods we could use to fill in these values, we could just enter 0 and move on, but let's try to be smart about this.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Imputation">Imputation<a class="anchor-link" href="#Imputation">¶</a></h3>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Somewhere in between filling values with a constant and engineering values by hand is variable imputation. If the stakes were higher, we'd want to try things like crafting missing GDP values with giniInc or values even just pull from another external data source, but let's keep it local and let some algorithms do the work for us.</p>
<ul>
<li>looking at region relationships (China and HongKong China)</li>
<li>training models for each column of interest with a missing value</li>
<li>pull for external sources</li>
<li>use Freedom,Confidence_natGovt,Democratic_Quality,Delivery_Quality to try and derive <code>Corruption_Perception</code></li>
</ul>
<p>There is a case to be made that forward filling prior to imputation is not optimal since we are not allowing the algorithm to fully transform true missing values. However, we must always consider what the data represents when making any decisions.</p>
<p>In the worst case, a country has data entry in 2005 (the first survey year) and has NaN values for every year thereafter. In such a case, using forward fill would propagate the value up to 2018 (latest survey year) potentially meaning it is outdated and no longer relevant. The alternative is to allow the imputer to derive these missing values with the other non-missing values as input. The question we must ask is do we value real, but potential outdated data, over fake, but temporally responsive data.</p>
<p>In all likelihood, the change that a given country experiences over a 13 year period is smaller than what we could accurately impute. If the dataset spanned, say, a generation (25 years) then perhaps more weight should be given to the imputation option.</p>
<p>As with most decision made during an analysis, this could be thoroughly vetted and a true optimal solution discovered, but again, the stakes are low enough to just leave well enough alone. Additionally, as shown below, the difference between each method is largely insignificant.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># fit on non-aggregated extended data</span>
<span class="n">imputer</span> <span class="o">=</span> <span class="n">IterativeImputer</span><span class="p">(</span><span class="n">estimator</span><span class="o">=</span><span class="n">BayesianRidge</span><span class="p">(),</span><span class="n">random_state</span><span class="o">=</span><span class="n">RS</span><span class="p">,</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">whr_ext</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:])</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We fit on the non-mutated data to maintain data purity and increase the number of samples the imputer has at its disposal.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="FFill-difference">FFill difference<a class="anchor-link" href="#FFill-difference">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Impute on latest data</span>
<span class="n">whrl_imp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">imputer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">whrl</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">whrl</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">whrl</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="c1"># Impute on latest forward filled data</span>
<span class="n">whrffl_imp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">imputer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">whrffl</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">whrffl</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="n">whrffl</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># whrl.loc[naidx] # Take latest Before</span>
<span class="n">whrffl</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">naidx</span><span class="p">]</span> <span class="c1"># FFill-latest Before</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Year</th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
</tr>
<tr>
<th>Country</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>China</th>
<td>2018</td>
<td>5.131434</td>
<td>9.694376</td>
<td>0.787605</td>
<td>69.300003</td>
<td>0.895378</td>
<td>-0.174899</td>
<td>NaN</td>
<td>0.855784</td>
<td>0.189640</td>
<td>NaN</td>
<td>-0.877810</td>
<td>-0.064555</td>
<td>0.425</td>
<td>0.538206</td>
</tr>
<tr>
<th>Cuba</th>
<td>2006</td>
<td>5.417869</td>
<td>9.676425</td>
<td>0.969595</td>
<td>68.440002</td>
<td>0.281458</td>
<td>NaN</td>
<td>NaN</td>
<td>0.646712</td>
<td>0.276602</td>
<td>0.513176</td>
<td>-0.706359</td>
<td>-0.543394</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>North Cyprus</th>
<td>2018</td>
<td>5.608056</td>
<td>NaN</td>
<td>0.837392</td>
<td>NaN</td>
<td>0.797066</td>
<td>NaN</td>
<td>0.613837</td>
<td>0.480453</td>
<td>0.261868</td>
<td>0.378324</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.200969</td>
</tr>
<tr>
<th>Oman</th>
<td>2011</td>
<td>6.852982</td>
<td>10.648312</td>
<td>NaN</td>
<td>65.500000</td>
<td>0.916293</td>
<td>-0.008942</td>
<td>NaN</td>
<td>NaN</td>
<td>0.295164</td>
<td>NaN</td>
<td>-0.314025</td>
<td>0.295601</td>
<td>NaN</td>
<td>0.494790</td>
</tr>
<tr>
<th>Somalia</th>
<td>2016</td>
<td>4.667941</td>
<td>NaN</td>
<td>0.594417</td>
<td>50.000000</td>
<td>0.917323</td>
<td>NaN</td>
<td>0.440802</td>
<td>0.891423</td>
<td>0.193282</td>
<td>0.700682</td>
<td>-2.134841</td>
<td>-2.125518</td>
<td>NaN</td>
<td>0.491746</td>
</tr>
<tr>
<th>Somaliland region</th>
<td>2012</td>
<td>5.057314</td>
<td>NaN</td>
<td>0.786291</td>
<td>NaN</td>
<td>0.758219</td>
<td>NaN</td>
<td>0.333832</td>
<td>0.735189</td>
<td>0.152428</td>
<td>0.651242</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>0.533575</td>
</tr>
<tr>
<th>Swaziland</th>
<td>2018</td>
<td>4.211565</td>
<td>8.946771</td>
<td>0.779270</td>
<td>NaN</td>
<td>0.709974</td>
<td>-0.179938</td>
<td>0.692341</td>
<td>0.824355</td>
<td>0.252339</td>
<td>0.689549</td>
<td>-0.897581</td>
<td>-0.541850</td>
<td>0.523</td>
<td>0.732568</td>
</tr>
<tr>
<th>Turkmenistan</th>
<td>2018</td>
<td>4.620602</td>
<td>9.749464</td>
<td>0.984489</td>
<td>62.200001</td>
<td>0.857774</td>
<td>0.237280</td>
<td>NaN</td>
<td>0.612210</td>
<td>0.189025</td>
<td>NaN</td>
<td>-1.153554</td>
<td>-1.545981</td>
<td>NaN</td>
<td>0.271070</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># whrl_imp.loc[naidx] # Take latest After</span>
<span class="n">whrffl_imp</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">naidx</span><span class="p">]</span> <span class="c1">#FFill-latest After</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Year</th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
</tr>
<tr>
<th>Country</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>China</th>
<td>2018.0</td>
<td>5.131434</td>
<td>9.694376</td>
<td>0.787605</td>
<td>69.300003</td>
<td>0.895378</td>
<td>-0.174899</td>
<td>0.598125</td>
<td>0.855784</td>
<td>0.189640</td>
<td>0.681986</td>
<td>-0.877810</td>
<td>-0.064555</td>
<td>0.425000</td>
<td>0.538206</td>
</tr>
<tr>
<th>Cuba</th>
<td>2006.0</td>
<td>5.417869</td>
<td>9.676425</td>
<td>0.969595</td>
<td>68.440002</td>
<td>0.281458</td>
<td>-0.113951</td>
<td>0.842834</td>
<td>0.646712</td>
<td>0.276602</td>
<td>0.513176</td>
<td>-0.706359</td>
<td>-0.543394</td>
<td>0.325290</td>
<td>0.271920</td>
</tr>
<tr>
<th>North Cyprus</th>
<td>2018.0</td>
<td>5.608056</td>
<td>10.096858</td>
<td>0.837392</td>
<td>70.319717</td>
<td>0.797066</td>
<td>-0.142033</td>
<td>0.613837</td>
<td>0.480453</td>
<td>0.261868</td>
<td>0.378324</td>
<td>-0.045114</td>
<td>0.384631</td>
<td>0.209252</td>
<td>0.200969</td>
</tr>
<tr>
<th>Oman</th>
<td>2011.0</td>
<td>6.852982</td>
<td>10.648312</td>
<td>0.905146</td>
<td>65.500000</td>
<td>0.916293</td>
<td>-0.008942</td>
<td>0.621081</td>
<td>0.795146</td>
<td>0.295164</td>
<td>0.607523</td>
<td>-0.314025</td>
<td>0.295601</td>
<td>0.427632</td>
<td>0.494790</td>
</tr>
<tr>
<th>Somalia</th>
<td>2016.0</td>
<td>4.667941</td>
<td>6.700755</td>
<td>0.594417</td>
<td>50.000000</td>
<td>0.917323</td>
<td>0.130703</td>
<td>0.440802</td>
<td>0.891423</td>
<td>0.193282</td>
<td>0.700682</td>
<td>-2.134841</td>
<td>-2.125518</td>
<td>0.481401</td>
<td>0.491746</td>
</tr>
<tr>
<th>Somaliland region</th>
<td>2012.0</td>
<td>5.057314</td>
<td>8.887497</td>
<td>0.786291</td>
<td>60.650726</td>
<td>0.758219</td>
<td>0.074972</td>
<td>0.333832</td>
<td>0.735189</td>
<td>0.152428</td>
<td>0.651242</td>
<td>-0.133132</td>
<td>0.440827</td>
<td>0.355993</td>
<td>0.533575</td>
</tr>
<tr>
<th>Swaziland</th>
<td>2018.0</td>
<td>4.211565</td>
<td>8.946771</td>
<td>0.779270</td>
<td>57.651606</td>
<td>0.709974</td>
<td>-0.179938</td>
<td>0.692341</td>
<td>0.824355</td>
<td>0.252339</td>
<td>0.689549</td>
<td>-0.897581</td>
<td>-0.541850</td>
<td>0.523000</td>
<td>0.732568</td>
</tr>
<tr>
<th>Turkmenistan</th>
<td>2018.0</td>
<td>4.620602</td>
<td>9.749464</td>
<td>0.984489</td>
<td>62.200001</td>
<td>0.857774</td>
<td>0.237280</td>
<td>0.896775</td>
<td>0.612210</td>
<td>0.189025</td>
<td>0.649490</td>
<td>-1.153554</td>
<td>-1.545981</td>
<td>0.292400</td>
<td>0.271070</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">whrffl_imp</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">naidx</span><span class="p">]</span> <span class="o">-</span> <span class="n">whrl_imp</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">naidx</span><span class="p">]</span> <span class="c1"># difference</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Year</th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
</tr>
<tr>
<th>Country</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>China</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.000000e+00</td>
<td>0.000000</td>
<td>0.0</td>
<td>0.0</td>
<td>-0.045064</td>
<td>0.000000e+00</td>
<td>0.0</td>
<td>0.083032</td>
<td>-1.031326</td>
<td>-0.434279</td>
<td>0.000000</td>
<td>0.0</td>
</tr>
<tr>
<th>Cuba</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.000000e+00</td>
<td>0.000000</td>
<td>0.0</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000e+00</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.0</td>
</tr>
<tr>
<th>North Cyprus</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.000000e+00</td>
<td>0.000000</td>
<td>0.0</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000e+00</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.0</td>
</tr>
<tr>
<th>Oman</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>4.440892e-16</td>
<td>0.000000</td>
<td>0.0</td>
<td>0.0</td>
<td>0.000000</td>
<td>1.110223e-16</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.0</td>
</tr>
<tr>
<th>Somalia</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.000000e+00</td>
<td>0.000000</td>
<td>0.0</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000e+00</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.0</td>
</tr>
<tr>
<th>Somaliland region</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.000000e+00</td>
<td>0.000000</td>
<td>0.0</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000e+00</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.0</td>
</tr>
<tr>
<th>Swaziland</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.000000e+00</td>
<td>-0.099673</td>
<td>0.0</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000e+00</td>
<td>0.0</td>
<td>0.000000</td>
<td>-0.503161</td>
<td>-0.216707</td>
<td>0.000000</td>
<td>0.0</td>
</tr>
<tr>
<th>Turkmenistan</th>
<td>0.0</td>
<td>0.0</td>
<td>0.0</td>
<td>0.000000e+00</td>
<td>0.000000</td>
<td>0.0</td>
<td>0.0</td>
<td>0.169159</td>
<td>0.000000e+00</td>
<td>0.0</td>
<td>-0.001948</td>
<td>-1.049260</td>
<td>-1.661919</td>
<td>0.045808</td>
<td>0.0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>With a few exceptions, there is no difference between the filled data fields. Looking at core columns, <code>Corruption_Perception</code> is the only attribute with a non-negligible difference for Turkmenistan.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Models">Models<a class="anchor-link" href="#Models">¶</a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<ul>
<li>K-means</li>
<li>Agglomerative Clustering</li>
<li>Affinity Propagation</li>
<li>Gaussian Mixture</li>
<li>DBSCAN</li>
<li>HDBSCAN</li>
</ul>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Helper-functions">Helper functions<a class="anchor-link" href="#Helper-functions">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plot_cluster</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">labels</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">centers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">""" Plot data from a clustering algorithm using dataframe column names</span>
<span class="sd">    </span>
<span class="sd">    If array-like values used for ``x``, ``y``, ``labels``, function will</span>
<span class="sd">    act as a loose wrapper to `matplotlib.plot.scatter()`</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        x, y : array-like, or str  </span>
<span class="sd">            axis data to be plotted or names of columns in ``data``</span>
<span class="sd">        labels: pandas.Series, or str</span>
<span class="sd">            predicted group labels, if string value, will be used as column in ``data``</span>
<span class="sd">        data : pandas.Dataframe, optional (default: None)</span>
<span class="sd">            DataFrame containing the data to be plotted along with the predicted groups</span>
<span class="sd">        centers : pd.DataFrame, optional (default: None)</span>
<span class="sd">            centers of the determined groups, only available if ``data`` is not None</span>
<span class="sd">        title : str, optional (default: '')</span>
<span class="sd">            plot title</span>
<span class="sd">        **kwargs : keyword arguments, optional</span>
<span class="sd">            arguments to pass to plt.scatter</span>
<span class="sd">    </span>
<span class="sd">    Returns:        </span>
<span class="sd">        ax : matplotlib Axes</span>
<span class="sd">            the Axes object with the plot drawn onto it.</span>
<span class="sd">    """</span>
    
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
    
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">labels</span><span class="p">]</span>
        <span class="n">gcounts</span> <span class="o">=</span> <span class="n">labels</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">nlabels</span> <span class="o">=</span> <span class="n">labels</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">labels</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">nlabels</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="c1"># 20 distinct colors, more visible and differentible than tab20 </span>
    <span class="c1"># https://sashat.me/2017/01/11/list-of-20-simple-distinct-colors/</span>
    <span class="n">cset</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'#3cb44b'</span><span class="p">,</span> <span class="s1">'#ffe119'</span><span class="p">,</span> <span class="s1">'#4363d8'</span><span class="p">,</span><span class="s1">'#e6194b'</span><span class="p">,</span> 
        <span class="s1">'#f58231'</span><span class="p">,</span><span class="s1">'#911eb4'</span><span class="p">,</span> <span class="s1">'#46f0f0'</span><span class="p">,</span> <span class="s1">'#f032e6'</span><span class="p">,</span> <span class="s1">'#bcf60c'</span><span class="p">,</span> 
        <span class="s1">'#fabebe'</span><span class="p">,</span> <span class="s1">'#008080'</span><span class="p">,</span> <span class="s1">'#e6beff'</span><span class="p">,</span><span class="s1">'#800000'</span><span class="p">,</span> <span class="s1">'#aaffc3'</span><span class="p">]</span> <span class="c1"># take 14</span>

    <span class="c1"># Add black in for negative label values</span>
    <span class="n">cm</span> <span class="o">=</span> <span class="p">(</span><span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">ListedColormap</span><span class="p">(</span><span class="n">cset</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="n">nlabels</span><span class="p">)</span> <span class="k">if</span> <span class="n">labels</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span> 
          <span class="k">else</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">ListedColormap</span><span class="p">([</span><span class="s1">'#000000'</span><span class="p">]</span><span class="o">+</span><span class="n">cset</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="n">nlabels</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>    
    
    <span class="c1"># Descrete colorbar setup </span>
    <span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.95</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">])</span> <span class="c1"># 'Magic' numbers for colorbar spacing</span>
    <span class="n">norm</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">BoundaryNorm</span><span class="p">(</span><span class="n">bounds</span><span class="p">,</span><span class="n">cm</span><span class="o">.</span><span class="n">N</span><span class="p">)</span>
    <span class="n">cb</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">colorbar</span><span class="o">.</span><span class="n">ColorbarBase</span><span class="p">(</span><span class="n">ax2</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cm</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span><span class="n">ticks</span><span class="o">=</span><span class="n">bounds</span><span class="o">+</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">boundaries</span><span class="o">=</span><span class="n">bounds</span><span class="p">)</span>
    <span class="n">cb</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>
    
    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="n">cm</span><span class="p">,</span><span class="n">edgecolors</span><span class="o">=</span><span class="s1">'face'</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">centers</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1">#center_size = gcounts*4 # scale ♦ size by number of group members</span>
        <span class="n">center_size</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">centers</span><span class="p">[</span><span class="s1">'Life_Ladder'</span><span class="p">])</span><span class="o">*</span><span class="mi">75</span> <span class="c1"># scale ♦ size by Life_Ladder score</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span><span class="n">marker</span><span class="o">=</span><span class="s1">'D'</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">centers</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="n">cm</span><span class="p">,</span>
                       <span class="n">s</span><span class="o">=</span><span class="n">center_size</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="s1">'black'</span><span class="p">,</span><span class="n">linewidths</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
            
        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">'(color=group, ♦size=Happiness, ♦loc = group center)'</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>       
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    
    <span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">ax</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">plot_boxolin</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">""" Plot a box plot and a violin plot.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        x,y : str</span>
<span class="sd">            columns in `data` to be plotted. x is the 'groupby' attribute.</span>
<span class="sd">        data : pandas.DataFrame</span>
<span class="sd">            DataFrame containing `x` and `y` columns</span>
<span class="sd">    </span>
<span class="sd">    Returns:        </span>
<span class="sd">        axes : matplotlib Axes</span>
<span class="sd">            the Axes object with the plot drawn onto it.</span>
<span class="sd">    """</span>
    <span class="n">fig</span><span class="p">,</span><span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">whr_grps</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="n">y</span><span class="p">,</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="n">x</span><span class="p">],</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># could use sns.boxplot, but why not try something different</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">data</span> <span class="o">=</span> <span class="n">whr_grps</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="s1">'area'</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">get_ylabel</span><span class="p">())</span>
    <span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">axes</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">cluster</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">""" Run a clustering model and return predictions.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        model : {sklearn.cluster, sklearn.mixture, or hdbscan}</span>
<span class="sd">            Model to fit and predict</span>
<span class="sd">        X : pandas.DataFrame</span>
<span class="sd">            Data used to fit `model`</span>
<span class="sd">        **kwargs : `model`.fit_predict() args, optional</span>
<span class="sd">            Keyword arguments to be passed into `model`.fit_predict()</span>
<span class="sd">    Returns:</span>
<span class="sd">        (labels,centers) : tuple(array, pandas.DataFrame)</span>
<span class="sd">            A tuple containing cluster labels and a DataFrame of cluster centers formated with X columns</span>
<span class="sd">    """</span>
    <span class="n">clust_labels</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">centers</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="n">model</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span> <span class="p">:</span> <span class="n">clust_labels</span><span class="p">}</span> <span class="c1"># assign a temp column to X with model name</span>
                      <span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span><span class="n">sort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="c1"># group on temp, gather mean of labels</span>
    
    <span class="k">return</span> <span class="p">(</span><span class="n">clust_labels</span><span class="p">,</span> <span class="n">centers</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">score_clusters</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">labels</span><span class="p">):</span>
<span class="w">    </span><span class="sd">""" Calculate silhouette, calinski-harabasz, and davies-bouldin scores</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        X : array-like, shape (``n_samples``, ``n_features``)</span>
<span class="sd">            List of ``n_features``-dimensional data points. Each row corresponds</span>
<span class="sd">            to a single data point.</span>

<span class="sd">        labels : array-like, shape (``n_samples``,)</span>
<span class="sd">            Predicted labels for each sample.</span>
<span class="sd">    Returns:</span>
<span class="sd">        scores : dict</span>
<span class="sd">            Dictionary containing the three metric scores</span>
<span class="sd">    """</span>
    <span class="n">scores</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'silhouette'</span><span class="p">:</span><span class="n">silhouette_score</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">labels</span><span class="p">),</span>
              <span class="s1">'calinski_harabasz'</span><span class="p">:</span><span class="n">calinski_harabasz_score</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">labels</span><span class="p">),</span>
              <span class="s1">'davies_bouldin'</span><span class="p">:</span><span class="n">davies_bouldin_score</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">labels</span><span class="p">)</span>
             <span class="p">}</span>
    <span class="k">return</span> <span class="n">scores</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h4 id="Setup-Modeling-Data">Setup Modeling Data<a class="anchor-link" href="#Setup-Modeling-Data">¶</a></h4>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">ss</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
<span class="n">whrX</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">ss</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">whrffl_imp</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">'Year'</span><span class="p">)),</span> <span class="n">columns</span><span class="o">=</span><span class="n">whrffl_imp</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="s1">'Year'</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">whrffl_imp</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">whrX</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
</tr>
<tr>
<th>Country</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>Afghanistan</th>
<td>-2.499994</td>
<td>-1.435267</td>
<td>-2.398592</td>
<td>-1.636104</td>
<td>-3.047681</td>
<td>-0.458046</td>
<td>1.095187</td>
<td>-2.485333</td>
<td>1.123785</td>
<td>-0.792207</td>
<td>-1.930070</td>
<td>-1.417846</td>
<td>-1.260899</td>
<td>-1.406094</td>
</tr>
<tr>
<th>Albania</th>
<td>-0.412826</td>
<td>0.132356</td>
<td>-0.972327</td>
<td>0.670231</td>
<td>0.356675</td>
<td>0.141452</td>
<td>0.942003</td>
<td>0.052647</td>
<td>0.236524</td>
<td>-0.439633</td>
<td>0.535487</td>
<td>-0.077580</td>
<td>-1.003994</td>
<td>-0.090691</td>
</tr>
<tr>
<th>Algeria</th>
<td>-0.377876</td>
<td>0.251331</td>
<td>-0.040310</td>
<td>0.269130</td>
<td>-1.462538</td>
<td>-1.039297</td>
<td>0.186609</td>
<td>-1.020356</td>
<td>-0.032534</td>
<td>-0.890863</td>
<td>-0.848822</td>
<td>-0.781312</td>
<td>-1.333314</td>
<td>1.591967</td>
</tr>
<tr>
<th>Angola</th>
<td>-1.505664</td>
<td>-0.416054</td>
<td>-0.397013</td>
<td>-1.349603</td>
<td>-3.040082</td>
<td>-0.937353</td>
<td>0.592058</td>
<td>-1.130291</td>
<td>0.741230</td>
<td>0.243888</td>
<td>-0.636459</td>
<td>-1.141828</td>
<td>1.053499</td>
<td>-0.213697</td>
</tr>
<tr>
<th>Argentina</th>
<td>0.299485</td>
<td>0.457333</td>
<td>0.779928</td>
<td>0.684557</td>
<td>0.520461</td>
<td>-1.268567</td>
<td>0.705990</td>
<td>0.991837</td>
<td>0.252072</td>
<td>-1.307633</td>
<td>0.593400</td>
<td>-0.106015</td>
<td>0.901679</td>
<td>-0.494615</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Most clustering algorithms are sensitive to the scale of data, standard scaling is advised.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">whr_grps</span> <span class="o">=</span> <span class="n">whrX</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="c1"># clone which we many append cluster groups to.</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="K-means">K-means<a class="anchor-link" href="#K-means">¶</a></h3><p>K-means clusters data by trying to separate samples in $k$ groups of equal variance, minimizing a criterion known as the <em>inertia</em> or <em>within-cluster sum-of-squares</em></p>
<p><a href="https://scikit-learn.org/stable/modules/clustering.html#k-means">https://scikit-learn.org/stable/modules/clustering.html#k-means</a></p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>We first need to determine a suitable value for $k$. To do so, one heuristic we may use is the 'elbow' method.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">),[</span><span class="n">KMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="n">n</span><span class="p">,</span><span class="n">random_state</span><span class="o">=</span><span class="n">RS</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">whrX</span><span class="p">)</span><span class="o">.</span><span class="n">inertia_</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">'title'</span><span class="p">:</span><span class="s1">'Elbow curve'</span><span class="p">,</span><span class="s1">'ylabel'</span><span class="p">:</span><span class="s1">'inertia'</span><span class="p">,</span><span class="s1">'xlabel'</span><span class="p">:</span><span class="s1">'n_clusters'</span><span class="p">})</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="jp-needs-light-background" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_70_0.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>As seen in the plot above, this plots the inertia against the number of cluster groups. The purpose is to choose a point which maximizes inertia and minimizes the number of clusters, this point is referred to as the 'elbow' of the plot. In our case, the elbow is not extremely pronounced, but 4 clusters seems to be 'bending' point of the line.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">km</span> <span class="o">=</span> <span class="n">KMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">random_state</span><span class="o">=</span><span class="n">RS</span><span class="p">)</span>
<span class="n">SilhouetteVisualizer</span><span class="p">(</span><span class="n">km</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">whrX</span><span class="p">)</span><span class="o">.</span><span class="n">poof</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="jp-needs-light-background" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_72_0.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Here we can see that 4 clusters has decent enough performance for each cluster grouping. The plot represents the average silhouette coefficient for each sample on a per-cluster basis. The dashed red line indicates the average silhouette score across all clusters, if any group falls short of this line, it may be a indication that the cluster choice is not ideal.</p>
<p>Cluster[3], on average, has a significantly higher score, but it also has the fewest total members, as represented by the group's width in the visualization. Since all clusters exceed the average value to at least some degree, we will proceed on using 4 clusters.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">clabels_km</span><span class="p">,</span> <span class="n">cent_km</span> <span class="o">=</span> <span class="n">cluster</span><span class="p">(</span><span class="n">km</span><span class="p">,</span> <span class="n">whrX</span><span class="p">)</span>
<span class="n">whr_grps</span><span class="p">[</span><span class="s1">'KMeans'</span><span class="p">]</span> <span class="o">=</span> <span class="n">clabels_km</span>
<span class="n">cent_km</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
</tr>
<tr>
<th>KMeans</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>0.107225</td>
<td>0.499364</td>
<td>0.450004</td>
<td>0.561292</td>
<td>-0.461269</td>
<td>-0.731501</td>
<td>0.563635</td>
<td>-0.753835</td>
<td>-0.252992</td>
<td>-0.673411</td>
<td>0.177701</td>
<td>0.189130</td>
<td>-0.733602</td>
<td>-0.846647</td>
</tr>
<tr>
<th>1</th>
<td>-0.968981</td>
<td>-1.115563</td>
<td>-1.123546</td>
<td>-1.123262</td>
<td>-0.530333</td>
<td>0.321729</td>
<td>0.137103</td>
<td>-0.457920</td>
<td>0.753672</td>
<td>0.421141</td>
<td>-0.825546</td>
<td>-0.853758</td>
<td>0.285630</td>
<td>0.666190</td>
</tr>
<tr>
<th>2</th>
<td>0.332972</td>
<td>0.207092</td>
<td>0.420160</td>
<td>0.192586</td>
<td>0.597954</td>
<td>0.006969</td>
<td>0.185112</td>
<td>0.860779</td>
<td>-0.190336</td>
<td>-0.034563</td>
<td>0.102118</td>
<td>-0.044563</td>
<td>0.829858</td>
<td>0.307015</td>
</tr>
<tr>
<th>3</th>
<td>1.413251</td>
<td>1.293082</td>
<td>0.975827</td>
<td>1.227086</td>
<td>0.891537</td>
<td>0.566482</td>
<td>-1.721364</td>
<td>0.730128</td>
<td>-0.926834</td>
<td>0.310068</td>
<td>1.409504</td>
<td>1.748233</td>
<td>-0.990706</td>
<td>-0.632077</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">plot_cluster</span><span class="p">(</span><span class="s1">'Log_GDP'</span><span class="p">,</span> <span class="s1">'Corruption_Perception'</span><span class="p">,</span> <span class="s1">'KMeans'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">whr_grps</span><span class="p">,</span> <span class="n">centers</span><span class="o">=</span><span class="n">cent_km</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'K-Means Cluster'</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="jp-needs-light-background" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_75_0.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Now, we can see more concretely how the silhouette visualization represents the data, at least for the case of <code>Corruption</code> and <code>GDP</code> attributes. Looking at the cluster dispersion, neither GDP nor Happiness has much bearing on perceived corruption until reaching the wealthiest nations, where it drops sharply.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">cent_km</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
</tr>
</thead>
<tbody>
<tr>
<th>count</th>
<td>4.000000</td>
<td>4.000000</td>
<td>4.000000</td>
<td>4.000000</td>
<td>4.000000</td>
<td>4.000000</td>
<td>4.000000</td>
<td>4.000000</td>
<td>4.000000</td>
<td>4.000000</td>
<td>4.000000</td>
<td>4.000000</td>
<td>4.000000</td>
<td>4.000000</td>
</tr>
<tr>
<th>mean</th>
<td>0.221117</td>
<td>0.220994</td>
<td>0.180611</td>
<td>0.214425</td>
<td>0.124472</td>
<td>0.040920</td>
<td>-0.208879</td>
<td>0.094788</td>
<td>-0.154122</td>
<td>0.005809</td>
<td>0.215944</td>
<td>0.259761</td>
<td>-0.152205</td>
<td>-0.126380</td>
</tr>
<tr>
<th>std</th>
<td>0.976900</td>
<td>1.002237</td>
<td>0.906118</td>
<td>0.989222</td>
<td>0.726736</td>
<td>0.563577</td>
<td>1.026210</td>
<td>0.819765</td>
<td>0.690956</td>
<td>0.492627</td>
<td>0.917189</td>
<td>1.088282</td>
<td>0.855814</td>
<td>0.728128</td>
</tr>
<tr>
<th>min</th>
<td>-0.968981</td>
<td>-1.115563</td>
<td>-1.123546</td>
<td>-1.123262</td>
<td>-0.530333</td>
<td>-0.731501</td>
<td>-1.721364</td>
<td>-0.753835</td>
<td>-0.926834</td>
<td>-0.673411</td>
<td>-0.825546</td>
<td>-0.853758</td>
<td>-0.990706</td>
<td>-0.846647</td>
</tr>
<tr>
<th>25%</th>
<td>-0.161826</td>
<td>-0.123572</td>
<td>0.034233</td>
<td>-0.136376</td>
<td>-0.478535</td>
<td>-0.177649</td>
<td>-0.327514</td>
<td>-0.531899</td>
<td>-0.421452</td>
<td>-0.194275</td>
<td>-0.129798</td>
<td>-0.246862</td>
<td>-0.797878</td>
<td>-0.685719</td>
</tr>
<tr>
<th>50%</th>
<td>0.220099</td>
<td>0.353228</td>
<td>0.435082</td>
<td>0.376939</td>
<td>0.068343</td>
<td>0.164349</td>
<td>0.161107</td>
<td>0.136104</td>
<td>-0.221664</td>
<td>0.137753</td>
<td>0.139910</td>
<td>0.072283</td>
<td>-0.223986</td>
<td>-0.162531</td>
</tr>
<tr>
<th>75%</th>
<td>0.603042</td>
<td>0.697793</td>
<td>0.581459</td>
<td>0.727740</td>
<td>0.671350</td>
<td>0.382918</td>
<td>0.279743</td>
<td>0.762790</td>
<td>0.045666</td>
<td>0.337836</td>
<td>0.485652</td>
<td>0.578906</td>
<td>0.421687</td>
<td>0.396808</td>
</tr>
<tr>
<th>max</th>
<td>1.413251</td>
<td>1.293082</td>
<td>0.975827</td>
<td>1.227086</td>
<td>0.891537</td>
<td>0.566482</td>
<td>0.563635</td>
<td>0.860779</td>
<td>0.753672</td>
<td>0.421141</td>
<td>1.409504</td>
<td>1.748233</td>
<td>0.829858</td>
<td>0.666190</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The initial K-Means cluster plot seems to indicate that the populations with lower GDP per captia tend to believe there is more corruption in business/government and rate their lives lower on the Cantril Life Ladder. However, the relationship is not exact, as seen in cluster[0] happiness and GDP can increase to a certain extent while also increasing perceptions of corruption.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">plot_boxolin</span><span class="p">(</span><span class="s1">'KMeans'</span><span class="p">,</span><span class="s1">'Log_GDP'</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">whr_grps</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="jp-needs-light-background" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_79_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">scores_km</span> <span class="o">=</span> <span class="n">score_clusters</span><span class="p">(</span><span class="n">whrX</span><span class="p">,</span><span class="n">clabels_km</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">score_clusters</span><span class="p">(</span><span class="n">whrX</span><span class="p">,</span><span class="n">KMeans</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="n">n</span><span class="p">,</span><span class="n">random_state</span><span class="o">=</span><span class="n">RS</span><span class="p">)</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">whrX</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">)],</span> <span class="n">index</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>silhouette</th>
<th>calinski_harabasz</th>
<th>davies_bouldin</th>
</tr>
</thead>
<tbody>
<tr>
<th>2</th>
<td>0.250627</td>
<td>68.240342</td>
<td>1.473583</td>
</tr>
<tr>
<th>3</th>
<td>0.218425</td>
<td>56.332407</td>
<td>1.458299</td>
</tr>
<tr>
<th>4</th>
<td>0.223155</td>
<td>51.815454</td>
<td>1.467267</td>
</tr>
<tr>
<th>5</th>
<td>0.207049</td>
<td>46.643073</td>
<td>1.565098</td>
</tr>
<tr>
<th>6</th>
<td>0.212860</td>
<td>42.543303</td>
<td>1.489635</td>
</tr>
<tr>
<th>7</th>
<td>0.187045</td>
<td>39.199290</td>
<td>1.531604</td>
</tr>
<tr>
<th>8</th>
<td>0.179825</td>
<td>36.340180</td>
<td>1.616779</td>
</tr>
<tr>
<th>9</th>
<td>0.185598</td>
<td>33.989629</td>
<td>1.567083</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Agglomerative-Clustering">Agglomerative Clustering<a class="anchor-link" href="#Agglomerative-Clustering">¶</a></h3><p>Agglomerative clustering performs a hierarchical clustering using a bottom up approach: each observation starts in its own cluster, and clusters are successively merged together. The hierarchy of clusters is represented as a tree or dendrogram where the root of the tree is the unique cluster that gathers all the samples, and the leaves are the clusters with only one sample.</p>
<p><a href="https://scikit-learn.org/stable/modules/clustering.html#hierarchical-clustering">https://scikit-learn.org/stable/modules/clustering.html#hierarchical-clustering</a></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">ac</span> <span class="o">=</span> <span class="n">AgglomerativeClustering</span><span class="p">(</span><span class="n">n_clusters</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">affinity</span> <span class="o">=</span> <span class="s1">'euclidean'</span><span class="p">,</span> <span class="n">linkage</span> <span class="o">=</span> <span class="s1">'ward'</span><span class="p">)</span>
<span class="n">clabels_ac</span><span class="p">,</span><span class="n">cent_ac</span> <span class="o">=</span> <span class="n">cluster</span><span class="p">(</span><span class="n">ac</span><span class="p">,</span> <span class="n">whrX</span><span class="p">)</span>
<span class="n">whr_grps</span><span class="p">[</span><span class="s1">'AgglomerativeClustering'</span><span class="p">]</span> <span class="o">=</span> <span class="n">clabels_ac</span>
<span class="n">cent_ac</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
</tr>
<tr>
<th>AgglomerativeClustering</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>0.402045</td>
<td>0.454050</td>
<td>0.533844</td>
<td>0.480147</td>
<td>0.195623</td>
<td>-0.186684</td>
<td>0.266133</td>
<td>0.211264</td>
<td>-0.300157</td>
<td>-0.332329</td>
<td>0.214791</td>
<td>0.159060</td>
<td>-0.044172</td>
<td>-0.375563</td>
</tr>
<tr>
<th>1</th>
<td>-0.937664</td>
<td>-0.963593</td>
<td>-1.003734</td>
<td>-1.001937</td>
<td>-0.525592</td>
<td>0.081686</td>
<td>0.148570</td>
<td>-0.472275</td>
<td>0.663155</td>
<td>0.332682</td>
<td>-0.675974</td>
<td>-0.688059</td>
<td>0.324815</td>
<td>0.663159</td>
</tr>
<tr>
<th>2</th>
<td>1.517015</td>
<td>1.319089</td>
<td>1.016879</td>
<td>1.324479</td>
<td>1.024796</td>
<td>0.757579</td>
<td>-2.175405</td>
<td>0.712655</td>
<td>-0.980121</td>
<td>0.574577</td>
<td>1.533921</td>
<td>1.910826</td>
<td>-1.083430</td>
<td>-0.537756</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">plot_cluster</span><span class="p">(</span><span class="s1">'Log_GDP'</span><span class="p">,</span> <span class="s1">'Corruption_Perception'</span><span class="p">,</span> <span class="s1">'AgglomerativeClustering'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">whr_grps</span><span class="p">,</span> <span class="n">centers</span><span class="o">=</span><span class="n">cent_ac</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Agglomerative Cluster'</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="jp-needs-light-background" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_83_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">scores_ac</span> <span class="o">=</span> <span class="n">score_clusters</span><span class="p">(</span><span class="n">whrX</span><span class="p">,</span><span class="n">clabels_ac</span><span class="p">);</span> <span class="n">scores_ac</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>{'silhouette': 0.19685197257469053,
 'calinski_harabasz': 48.287898116425936,
 'davies_bouldin': 1.4184695148698854}</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">plot_boxolin</span><span class="p">(</span><span class="s1">'AgglomerativeClustering'</span><span class="p">,</span><span class="s1">'Log_GDP'</span><span class="p">,</span><span class="n">whr_grps</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="jp-needs-light-background" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_85_0.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Affinity-Propagation">Affinity Propagation<a class="anchor-link" href="#Affinity-Propagation">¶</a></h3>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">ap</span> <span class="o">=</span> <span class="n">AffinityPropagation</span><span class="p">(</span><span class="n">damping</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">max_iter</span> <span class="o">=</span> <span class="mi">250</span><span class="p">,</span> <span class="n">affinity</span> <span class="o">=</span> <span class="s1">'euclidean'</span><span class="p">)</span>
<span class="n">clabels_ap</span><span class="p">,</span> <span class="n">cent_ap</span> <span class="o">=</span> <span class="n">cluster</span><span class="p">(</span><span class="n">ap</span><span class="p">,</span><span class="n">whrX</span><span class="p">)</span>
<span class="n">whr_grps</span><span class="p">[</span><span class="s1">'AffinityPropagation'</span><span class="p">]</span> <span class="o">=</span> <span class="n">clabels_ap</span>
<span class="n">cent_ap</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
</tr>
<tr>
<th>AffinityPropagation</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>-0.500617</td>
<td>-0.567265</td>
<td>-0.493516</td>
<td>-0.063212</td>
<td>0.293655</td>
<td>-0.052284</td>
<td>0.059636</td>
<td>-0.889806</td>
<td>0.309342</td>
<td>1.238099</td>
<td>-0.803796</td>
<td>-0.438167</td>
<td>-0.705119</td>
<td>-0.571035</td>
</tr>
<tr>
<th>1</th>
<td>-0.747142</td>
<td>-1.272132</td>
<td>-1.024236</td>
<td>-1.285140</td>
<td>-0.239862</td>
<td>0.221882</td>
<td>0.249245</td>
<td>0.015651</td>
<td>0.581525</td>
<td>0.484327</td>
<td>-0.424674</td>
<td>-0.730613</td>
<td>0.567298</td>
<td>0.978746</td>
</tr>
<tr>
<th>2</th>
<td>-1.279836</td>
<td>-1.313996</td>
<td>-1.903009</td>
<td>-1.561613</td>
<td>-1.223334</td>
<td>0.629845</td>
<td>0.294700</td>
<td>-1.372540</td>
<td>2.123510</td>
<td>-0.048624</td>
<td>-1.307729</td>
<td>-1.353406</td>
<td>0.344303</td>
<td>1.161366</td>
</tr>
<tr>
<th>3</th>
<td>0.222655</td>
<td>0.477397</td>
<td>0.609701</td>
<td>0.623043</td>
<td>-0.670309</td>
<td>-0.611355</td>
<td>0.745696</td>
<td>-0.853739</td>
<td>-0.286430</td>
<td>-1.206889</td>
<td>0.423385</td>
<td>0.222335</td>
<td>-0.646431</td>
<td>-0.864157</td>
</tr>
<tr>
<th>4</th>
<td>0.466757</td>
<td>0.073115</td>
<td>0.479527</td>
<td>0.338572</td>
<td>0.494534</td>
<td>-0.339993</td>
<td>0.483445</td>
<td>1.031721</td>
<td>-0.023339</td>
<td>-0.865418</td>
<td>0.270854</td>
<td>-0.206464</td>
<td>1.170024</td>
<td>0.098470</td>
</tr>
<tr>
<th>5</th>
<td>1.545599</td>
<td>1.302150</td>
<td>1.021691</td>
<td>1.311734</td>
<td>1.017160</td>
<td>0.768865</td>
<td>-1.940286</td>
<td>0.743073</td>
<td>-0.972178</td>
<td>0.444538</td>
<td>1.533331</td>
<td>1.879546</td>
<td>-1.083620</td>
<td>-0.663310</td>
</tr>
<tr>
<th>6</th>
<td>0.165519</td>
<td>-0.073751</td>
<td>0.656839</td>
<td>0.041118</td>
<td>0.987783</td>
<td>1.986966</td>
<td>0.606842</td>
<td>0.647387</td>
<td>-0.879889</td>
<td>0.636642</td>
<td>-0.532076</td>
<td>-0.595852</td>
<td>-0.587825</td>
<td>-0.545105</td>
</tr>
<tr>
<th>7</th>
<td>-1.006123</td>
<td>0.039446</td>
<td>0.132144</td>
<td>-0.950234</td>
<td>-0.139271</td>
<td>-1.012953</td>
<td>0.390493</td>
<td>0.606351</td>
<td>-0.366652</td>
<td>0.578280</td>
<td>0.364302</td>
<td>0.126509</td>
<td>2.534934</td>
<td>1.858689</td>
</tr>
<tr>
<th>8</th>
<td>0.723209</td>
<td>0.964495</td>
<td>0.369699</td>
<td>0.405695</td>
<td>0.909633</td>
<td>-0.012255</td>
<td>-0.688852</td>
<td>0.755897</td>
<td>-0.082930</td>
<td>0.769516</td>
<td>-0.092241</td>
<td>0.444170</td>
<td>0.454449</td>
<td>0.716381</td>
</tr>
<tr>
<th>9</th>
<td>0.730402</td>
<td>0.902029</td>
<td>0.792365</td>
<td>0.911248</td>
<td>0.224374</td>
<td>-0.714315</td>
<td>0.244477</td>
<td>0.061031</td>
<td>-0.770132</td>
<td>-0.517626</td>
<td>0.954993</td>
<td>0.963504</td>
<td>-0.925618</td>
<td>-1.038152</td>
</tr>
<tr>
<th>10</th>
<td>-1.408119</td>
<td>-0.783961</td>
<td>-0.254358</td>
<td>-0.947068</td>
<td>-2.798362</td>
<td>-0.613527</td>
<td>0.499679</td>
<td>-1.359079</td>
<td>0.285656</td>
<td>-0.599311</td>
<td>-1.384850</td>
<td>-1.129199</td>
<td>-0.317092</td>
<td>-0.555974</td>
</tr>
<tr>
<th>11</th>
<td>-0.898008</td>
<td>-0.861645</td>
<td>-0.733028</td>
<td>-0.804342</td>
<td>0.618704</td>
<td>1.440850</td>
<td>-0.997173</td>
<td>0.791620</td>
<td>-0.404495</td>
<td>1.501329</td>
<td>-0.515023</td>
<td>-0.413840</td>
<td>0.259245</td>
<td>0.480501</td>
</tr>
<tr>
<th>12</th>
<td>-0.567129</td>
<td>0.163784</td>
<td>-0.343996</td>
<td>0.153978</td>
<td>-0.790771</td>
<td>-0.888230</td>
<td>0.515507</td>
<td>-0.985809</td>
<td>0.473750</td>
<td>-0.640716</td>
<td>-0.706652</td>
<td>-0.416651</td>
<td>-0.116206</td>
<td>-0.114559</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">plot_cluster</span><span class="p">(</span><span class="s1">'Log_GDP'</span><span class="p">,</span> <span class="s1">'Corruption_Perception'</span><span class="p">,</span> <span class="s1">'AffinityPropagation'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">whr_grps</span><span class="p">,</span> <span class="n">centers</span><span class="o">=</span><span class="n">cent_ap</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Affinity Propagation'</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="jp-needs-light-background" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_88_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">scores_ap</span> <span class="o">=</span> <span class="n">score_clusters</span><span class="p">(</span><span class="n">whrX</span><span class="p">,</span><span class="n">clabels_ap</span><span class="p">);</span> <span class="n">scores_ap</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>{'silhouette': 0.1807914178898567,
 'calinski_harabasz': 27.84691838858024,
 'davies_bouldin': 1.5462700501887794}</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">plot_boxolin</span><span class="p">(</span><span class="s1">'AffinityPropagation'</span><span class="p">,</span><span class="s1">'Log_GDP'</span><span class="p">,</span><span class="n">whr_grps</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="jp-needs-light-background" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_90_0.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Violin plot loses a fair bit of its aesthetics when we ramp up the cluster count</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="Gaussian-Mixture">Gaussian Mixture<a class="anchor-link" href="#Gaussian-Mixture">¶</a></h3><p>A probabilistic model that assumes all the data points are generated from a mixture of a finite number of Gaussian distributions with unknown parameters.</p>
<p><a href="https://scikit-learn.org/stable/modules/mixture.html#mixture">https://scikit-learn.org/stable/modules/mixture.html#mixture</a></p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">gm</span> <span class="o">=</span> <span class="n">GaussianMixture</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">init_params</span><span class="o">=</span><span class="s1">'kmeans'</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="n">RS</span><span class="p">)</span>
<span class="n">clabels_gm</span><span class="p">,</span><span class="n">cent_gm</span> <span class="o">=</span> <span class="n">cluster</span><span class="p">(</span><span class="n">gm</span><span class="p">,</span><span class="n">whrX</span><span class="p">)</span>
<span class="n">whr_grps</span><span class="p">[</span><span class="s1">'GaussianMixture'</span><span class="p">]</span> <span class="o">=</span> <span class="n">clabels_gm</span>
<span class="n">cent_gm</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
</tr>
<tr>
<th>GaussianMixture</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>0.121003</td>
<td>0.290848</td>
<td>0.329489</td>
<td>0.305264</td>
<td>0.128359</td>
<td>-0.278011</td>
<td>0.404304</td>
<td>0.102988</td>
<td>-0.194147</td>
<td>-0.334905</td>
<td>0.082581</td>
<td>-0.020472</td>
<td>0.155404</td>
<td>-0.172694</td>
</tr>
<tr>
<th>1</th>
<td>1.366164</td>
<td>1.290100</td>
<td>0.946226</td>
<td>1.152916</td>
<td>0.845298</td>
<td>0.504250</td>
<td>-1.563515</td>
<td>0.725152</td>
<td>-0.836110</td>
<td>0.228849</td>
<td>1.328231</td>
<td>1.680884</td>
<td>-0.898514</td>
<td>-0.469166</td>
</tr>
<tr>
<th>2</th>
<td>-0.848250</td>
<td>-1.078975</td>
<td>-0.974230</td>
<td>-1.035616</td>
<td>-0.609042</td>
<td>0.194823</td>
<td>0.116398</td>
<td>-0.511258</td>
<td>0.708173</td>
<td>0.416979</td>
<td>-0.769506</td>
<td>-0.777091</td>
<td>0.188000</td>
<td>0.497728</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">plot_cluster</span><span class="p">(</span><span class="s1">'Log_GDP'</span><span class="p">,</span> <span class="s1">'Corruption_Perception'</span><span class="p">,</span> <span class="s1">'GaussianMixture'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">whr_grps</span><span class="p">,</span> <span class="n">centers</span><span class="o">=</span><span class="n">cent_gm</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'Gaussian Mixture'</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="jp-needs-light-background" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_94_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">scores_gm</span> <span class="o">=</span> <span class="n">score_clusters</span><span class="p">(</span><span class="n">whrX</span><span class="p">,</span><span class="n">clabels_gm</span><span class="p">);</span> <span class="n">scores_gm</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>{'silhouette': 0.17602676065311476,
 'calinski_harabasz': 46.98962716751056,
 'davies_bouldin': 1.6456170460570363}</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">plot_boxolin</span><span class="p">(</span><span class="s1">'GaussianMixture'</span><span class="p">,</span><span class="s1">'Log_GDP'</span><span class="p">,</span><span class="n">whr_grps</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="jp-needs-light-background" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_96_0.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="DBSCAN">DBSCAN<a class="anchor-link" href="#DBSCAN">¶</a></h3><p>Density-Based Spatial Clustering of Applications with Noise. Finds core samples of high density and expands clusters from them.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">db</span> <span class="o">=</span> <span class="n">DBSCAN</span><span class="p">(</span><span class="n">eps</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">clabels_db</span><span class="p">,</span><span class="n">cent_db</span> <span class="o">=</span> <span class="n">cluster</span><span class="p">(</span><span class="n">db</span><span class="p">,</span><span class="n">whrX</span><span class="p">)</span>
<span class="n">whr_grps</span><span class="p">[</span><span class="s1">'DBSCAN'</span><span class="p">]</span> <span class="o">=</span> <span class="n">clabels_db</span>
<span class="n">cent_db</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
</tr>
<tr>
<th>DBSCAN</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>-1</th>
<td>3.095167e-16</td>
<td>-5.800074e-16</td>
<td>-2.508095e-16</td>
<td>-8.504981e-16</td>
<td>-5.887546e-17</td>
<td>-4.642751e-17</td>
<td>2.839479e-16</td>
<td>-4.750409e-16</td>
<td>3.297026e-17</td>
<td>5.070018e-16</td>
<td>1.480297e-17</td>
<td>-1.076580e-17</td>
<td>2.893308e-16</td>
<td>6.331636e-16</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">plot_cluster</span><span class="p">(</span><span class="s1">'Log_GDP'</span><span class="p">,</span> <span class="s1">'Corruption_Perception'</span><span class="p">,</span> <span class="s1">'DBSCAN'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">whr_grps</span><span class="p">,</span> <span class="n">centers</span><span class="o">=</span><span class="n">cent_db</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'DBSCAN'</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="jp-needs-light-background" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_99_0.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Running with with a scaled version of the data failed to categorize any of the points at all. It considered every point to be too noisy group.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="c1"># Will throw an error, can't calculate scores when only "one" group exists.  </span>
<span class="c1"># score_clusters(whrX,clabels_db)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>The Calinski-Harabasz index is generally higher for convex clusters than other concepts of clusters, such as density based clusters like those obtained through DBSCAN.</p>
<p>The Davies-Boulding index is generally higher for convex clusters than other concepts of clusters, such as density based clusters like those obtained from DBSCAN.</p>
<p>The usage of centroid distance limits the distance metric to Euclidean space.
A good value reported by this method does not imply the best information retrieval.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">plot_boxolin</span><span class="p">(</span><span class="s1">'DBSCAN'</span><span class="p">,</span><span class="s1">'Log_GDP'</span><span class="p">,</span><span class="n">whr_grps</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="jp-needs-light-background" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_103_0.png"/>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>Given this dataset has relatively low density, this model had substandard performance w.r.t the other contenders.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="HDBSCAN">HDBSCAN<a class="anchor-link" href="#HDBSCAN">¶</a></h3><p>Hierarchical Density-Based Spatial Clustering of Applications with Noise.
It extends DBSCAN by converting it into a hierarchical clustering algorithm, and then using a technique to extract a flat clustering based in the stability of clusters.</p>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">hd</span> <span class="o">=</span> <span class="n">hdbscan</span><span class="o">.</span><span class="n">HDBSCAN</span><span class="p">()</span>
<span class="n">clabels_hd</span><span class="p">,</span> <span class="n">cent_hd</span> <span class="o">=</span> <span class="n">cluster</span><span class="p">(</span><span class="n">hd</span><span class="p">,</span><span class="n">whrX</span><span class="p">)</span>
<span class="n">whr_grps</span><span class="p">[</span><span class="s1">'HDBSCAN'</span><span class="p">]</span> <span class="o">=</span> <span class="n">clabels_hd</span>
<span class="n">cent_hd</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>Life_Ladder</th>
<th>Log_GDP</th>
<th>Social_support</th>
<th>Life_Expectancy</th>
<th>Freedom</th>
<th>Generosity</th>
<th>Corruption_Perception</th>
<th>Positive_affect</th>
<th>Negative_affect</th>
<th>Confidence_natGovt</th>
<th>Democratic_Quality</th>
<th>Delivery_Quality</th>
<th>giniIncWBavg</th>
<th>giniIncGallup</th>
</tr>
<tr>
<th>HDBSCAN</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>-1</th>
<td>-0.325745</td>
<td>-0.191294</td>
<td>-0.233152</td>
<td>-0.234759</td>
<td>-0.124759</td>
<td>0.082251</td>
<td>0.087954</td>
<td>-0.227406</td>
<td>0.115121</td>
<td>0.213518</td>
<td>-0.318442</td>
<td>-0.256041</td>
<td>0.006019</td>
<td>0.152915</td>
</tr>
<tr>
<th>0</th>
<td>-0.594262</td>
<td>-1.306554</td>
<td>-1.067221</td>
<td>-1.435553</td>
<td>-0.471403</td>
<td>0.337794</td>
<td>0.436063</td>
<td>0.145287</td>
<td>0.848195</td>
<td>0.262831</td>
<td>-0.547068</td>
<td>-0.673820</td>
<td>0.313713</td>
<td>0.926564</td>
</tr>
<tr>
<th>1</th>
<td>0.548691</td>
<td>0.145915</td>
<td>0.517590</td>
<td>0.398214</td>
<td>0.540105</td>
<td>-0.527929</td>
<td>0.466860</td>
<td>1.033615</td>
<td>-0.025376</td>
<td>-0.973451</td>
<td>0.332459</td>
<td>-0.177761</td>
<td>1.218192</td>
<td>0.047480</td>
</tr>
<tr>
<th>2</th>
<td>1.012796</td>
<td>0.955901</td>
<td>0.821159</td>
<td>0.996843</td>
<td>0.254934</td>
<td>-0.072167</td>
<td>-0.715967</td>
<td>0.167328</td>
<td>-0.629233</td>
<td>-0.261801</td>
<td>1.103414</td>
<td>1.216625</td>
<td>-0.836442</td>
<td>-0.831162</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">plot_cluster</span><span class="p">(</span><span class="s1">'Log_GDP'</span><span class="p">,</span> <span class="s1">'Corruption_Perception'</span><span class="p">,</span> <span class="s1">'HDBSCAN'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">whr_grps</span><span class="p">,</span> <span class="n">centers</span><span class="o">=</span><span class="n">cent_hd</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">'HDBSCAN'</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="jp-needs-light-background" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_107_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">scores_hd</span> <span class="o">=</span> <span class="n">score_clusters</span><span class="p">(</span><span class="n">whrX</span><span class="p">,</span><span class="n">clabels_hd</span><span class="p">);</span> <span class="n">scores_hd</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/plain">
<pre>{'silhouette': -0.06289074714996329,
 'calinski_harabasz': 14.315184058617332,
 'davies_bouldin': 1.9554553185648444}</pre>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">plot_boxolin</span><span class="p">(</span><span class="s1">'HDBSCAN'</span><span class="p">,</span><span class="s1">'Log_GDP'</span><span class="p">,</span><span class="n">whr_grps</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child">
<div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
<div class="jp-RenderedImage jp-OutputArea-output">
<img alt="No description has been provided for this image" class="jp-needs-light-background" src="/assets/images/pyimgs/9_clustering_whr2019/9_clustering_whr2019_109_0.png"/>
</div>
</div>
</div>
</div>
</div><div class="jp-Cell jp-CodeCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea">
<div class="jp-InputPrompt jp-InputArea-prompt">
    In [ ]:
    
</div>
<div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
<div class="cm-editor cm-s-jupyter">
<div class="highlight hl-ipython3"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">scores_km</span><span class="p">,</span><span class="n">scores_ac</span><span class="p">,</span><span class="n">scores_ap</span><span class="p">,</span><span class="n">scores_gm</span><span class="p">,</span><span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="n">scores_km</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">),</span><span class="n">scores_hd</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">'Kmeans'</span><span class="p">,</span> <span class="s1">'AgglomerativeClustering'</span><span class="p">,</span> <span class="s1">'AffinityPropagation'</span><span class="p">,</span> <span class="s1">'GaussianMixture'</span><span class="p">,</span><span class="s1">'DBSCAN'</span><span class="p">,</span> <span class="s1">'HDBSCAN'</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="jp-Cell-outputWrapper">
<div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
</div>
<div class="jp-OutputArea jp-Cell-outputArea">
<div class="jp-OutputArea-child jp-OutputArea-executeResult">
<div class="jp-OutputPrompt jp-OutputArea-prompt">Out[ ]:
    </div>
<div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
<thead>
<tr style="text-align: right;">
<th></th>
<th>silhouette</th>
<th>calinski_harabasz</th>
<th>davies_bouldin</th>
</tr>
</thead>
<tbody>
<tr>
<th>Kmeans</th>
<td>0.223155</td>
<td>51.815454</td>
<td>1.467267</td>
</tr>
<tr>
<th>AgglomerativeClustering</th>
<td>0.196852</td>
<td>48.287898</td>
<td>1.418470</td>
</tr>
<tr>
<th>AffinityPropagation</th>
<td>0.180791</td>
<td>27.846918</td>
<td>1.546270</td>
</tr>
<tr>
<th>GaussianMixture</th>
<td>0.176027</td>
<td>46.989627</td>
<td>1.645617</td>
</tr>
<tr>
<th>DBSCAN</th>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
<tr>
<th>HDBSCAN</th>
<td>-0.062891</td>
<td>14.315184</td>
<td>1.955455</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h2 id="Conclusions">Conclusions<a class="anchor-link" href="#Conclusions">¶</a></h2>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<p>This notebook explored the World Happiness Dataset using a total of 6 models:<br>
K-means, Agglomerative Clustering, Affinity Propagation, Gaussian Mixture, DBSCAN, and HDBSCAN.</br></p>
<p>The was a somewhat significant degree of variation between the examined models, but those that were not prescribed a certain number of clusters arrived at a 9 or 10 groups. With this many groupings, however, it became much more difficult to see exactly how a model was making clustering decisions.</p>
<p>For the models which we assigned a group count of 3, K-means, Agglomerative Clustering, and Gaussian Mixture, two diagonal or vertical lines could nearly be drawn between decision boundaries by way of GDP considerations.</p>
<p>Only one version of one model failed to perform at all, that was DBSCAN with scaled data, the rest found some form of suitable clustering. However, the Boxplots showed that when models were given free reign over the number of clusters, they tend to have one cluster serve to explain a large range of values and another to explain an extremely tightly grouped set with many outliers.</p>
<h4 id="Future-work">Future work<a class="anchor-link" href="#Future-work">¶</a></h4><p>One thought that was left untested was looking to see if the previous model's metrics in anyway influenced successive models. Since a new column was appended to the dataset and not removed, there is indeed a possibility of this happening.
A good deal more EDA could be done on this dataset by looking at relationships between variables in a market basic analysis fashion. As always, there are many different hyperparamaters that could still be experimented with, as well as other clustering models like Spectral, Ward, and MeanShift that might yield interesting results. Additionally, and perhaps most poignantly, only <code>Log_GDP</code> and <code>Corruption_Perception</code> were explored, the rest were left untouched, thus leaving a significant portion of the data not truly explored to its fullest.</p>
</div>
</div>
</div>
</div>
<div class="jp-Cell jp-MarkdownCell jp-Notebook-cell">
<div class="jp-Cell-inputWrapper">
<div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
</div>
<div class="jp-InputArea jp-Cell-inputArea"><div class="jp-InputPrompt jp-InputArea-prompt">
</div><div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput" data-mime-type="text/markdown">
<h3 id="References">References<a class="anchor-link" href="#References">¶</a></h3><h4 id="Code-&amp;-Docs:">Code &amp; Docs:<a class="anchor-link" href="#Code-&amp;-Docs:">¶</a></h4><ol>
<li><a href="https://www.kaggle.com/dhanyajothimani/basic-visualization-and-clustering-in-python/notebook">https://www.kaggle.com/dhanyajothimani/basic-visualization-and-clustering-in-python/notebook</a></li>
<li><a href="https://stackoverflow.com/a/42505051">https://stackoverflow.com/a/42505051</a></li>
<li><a href="https://matplotlib.org/api/colorbar_api.html?highlight=colorbar#module-matplotlib.colorbar">https://matplotlib.org/api/colorbar_api.html?highlight=colorbar#module-matplotlib.colorbar</a></li>
<li><a href="https://hdbscan.readthedocs.io/en/latest/comparing_clustering_algorithms.html">https://hdbscan.readthedocs.io/en/latest/comparing_clustering_algorithms.html</a></li>
<li><a href="https://stackoverflow.com/questions/14777066/matplotlib-discrete-colorbar">https://stackoverflow.com/questions/14777066/matplotlib-discrete-colorbar</a></li>
<li><a href="https://scikit-learn.org/stable/modules/generated/sklearn.impute.IterativeImputer.html">https://scikit-learn.org/stable/modules/generated/sklearn.impute.IterativeImputer.html</a></li>
<li><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.interpolate.html">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.interpolate.html</a></li>
<li><a href="https://plot.ly/python/choropleth-maps/">https://plot.ly/python/choropleth-maps/</a></li>
<li><a href="https://community.plot.ly/t/additional-measures-in-hover-text/5747">https://community.plot.ly/t/additional-measures-in-hover-text/5747</a></li>
</ol>
<h4 id="Text:">Text:<a class="anchor-link" href="#Text:">¶</a></h4><ol>
<li><a href="https://scikit-learn.org/stable/modules/clustering.html#clustering-evaluation">https://scikit-learn.org/stable/modules/clustering.html#clustering-evaluation</a></li>
<li><a href="https://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html">https://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html</a></li>
<li><a href="https://hdbscan.readthedocs.io/en/latest/how_hdbscan_works.html">https://hdbscan.readthedocs.io/en/latest/how_hdbscan_works.html</a></li>
<li><a href="https://scikit-learn.org/stable/modules/clustering.html">https://scikit-learn.org/stable/modules/clustering.html</a></li>
<li><a href="https://www.scikit-yb.org/en/latest/api/cluster/silhouette.html">https://www.scikit-yb.org/en/latest/api/cluster/silhouette.html</a></li>
</ol>
<h4 id="Other:">Other:<a class="anchor-link" href="#Other:">¶</a></h4><ol>
<li><a href="https://sashat.me/2017/01/11/list-of-20-simple-distinct-colors/">https://sashat.me/2017/01/11/list-of-20-simple-distinct-colors/</a></li>
<li><a href="https://medium.com/ibm-data-science-experience/missing-data-conundrum-exploration-and-imputation-techniques-9f40abe0fd87">https://medium.com/ibm-data-science-experience/missing-data-conundrum-exploration-and-imputation-techniques-9f40abe0fd87</a></li>
<li><a href="https://towardsdatascience.com/how-to-handle-missing-data-8646b18db0d4">https://towardsdatascience.com/how-to-handle-missing-data-8646b18db0d4</a></li>
<li><a href="https://towardsdatascience.com/6-different-ways-to-compensate-for-missing-values-data-imputation-with-examples-6022d9ca0779">https://towardsdatascience.com/6-different-ways-to-compensate-for-missing-values-data-imputation-with-examples-6022d9ca0779</a></li>
</ol>
</div>
</div>
</div>
</div>
